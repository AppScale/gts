diff -Naur Python-2.5-base/Demo/curses/ncurses.py Python-2.5/Demo/curses/ncurses.py
--- Python-2.5-base/Demo/curses/ncurses.py	2004-07-17 22:56:09.000000000 -0700
+++ Python-2.5/Demo/curses/ncurses.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #!/usr/bin/env python
 #
-# $Id: ncurses.py 36559 2004-07-18 05:56:09Z tim_one $
+# $Id: ncurses.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # (n)curses exerciser in Python, an interactive test for the curses
 # module. Currently, only the panel demos are ported.
diff -Naur Python-2.5-base/Demo/curses/rain.py Python-2.5/Demo/curses/rain.py
--- Python-2.5-base/Demo/curses/rain.py	2006-06-03 16:02:15.000000000 -0700
+++ Python-2.5/Demo/curses/rain.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #!/usr/bin/env python
 #
-# $Id: rain.py 46625 2006-06-03 23:02:15Z andrew.kuchling $
+# $Id: rain.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # somebody should probably check the randrange()s...
 
diff -Naur Python-2.5-base/Demo/curses/tclock.py Python-2.5/Demo/curses/tclock.py
--- Python-2.5-base/Demo/curses/tclock.py	2006-06-03 16:07:21.000000000 -0700
+++ Python-2.5/Demo/curses/tclock.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #!/usr/bin/env python
 #
-# $Id: tclock.py 46626 2006-06-03 23:07:21Z andrew.kuchling $
+# $Id: tclock.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # From tclock.c, Copyright Howard Jones <ha.jones@ic.ac.uk>, September 1994.
 
diff -Naur Python-2.5-base/Demo/curses/xmas.py Python-2.5/Demo/curses/xmas.py
--- Python-2.5-base/Demo/curses/xmas.py	2006-06-03 15:59:23.000000000 -0700
+++ Python-2.5/Demo/curses/xmas.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,7 +1,7 @@
 # asciixmas
 # December 1989             Larry Bartz           Indianapolis, IN
 #
-# $Id: xmas.py 46623 2006-06-03 22:59:23Z andrew.kuchling $
+# $Id: xmas.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # I'm dreaming of an ascii character-based monochrome Christmas,
 # Just like the ones I used to know!
diff -Naur Python-2.5-base/Demo/scripts/newslist.py Python-2.5/Demo/scripts/newslist.py
--- Python-2.5-base/Demo/scripts/newslist.py	2004-09-11 09:34:35.000000000 -0700
+++ Python-2.5/Demo/scripts/newslist.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #! /usr/bin/env python
 #######################################################################
-# Newslist  $Revision: 37320 $
+# Newslist  $Revision: 1.1.1.1 $
 #
 # Syntax:
 #    newslist [ -a ]
@@ -105,7 +105,7 @@
 from nntplib import NNTP
 from stat import *
 
-rcsrev = '$Revision: 37320 $'
+rcsrev = '$Revision: 1.1.1.1 $'
 rcsrev = string.join(filter(lambda s: '$' not in s, string.split(rcsrev)))
 desc = {}
 
diff -Naur Python-2.5-base/Demo/tix/INSTALL.txt Python-2.5/Demo/tix/INSTALL.txt
--- Python-2.5-base/Demo/tix/INSTALL.txt	2001-11-11 06:07:37.000000000 -0800
+++ Python-2.5/Demo/tix/INSTALL.txt	2009-03-17 15:50:58.000000000 -0700
@@ -1,4 +1,4 @@
-$Id: INSTALL.txt 24230 2001-11-11 14:07:37Z loewis $
+$Id: INSTALL.txt,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 
 Installing Tix.py
 ----------------
diff -Naur Python-2.5-base/Demo/tix/samples/Balloon.py Python-2.5/Demo/tix/samples/Balloon.py
--- Python-2.5-base/Demo/tix/samples/Balloon.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/Balloon.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: Balloon.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: Balloon.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/BtnBox.py Python-2.5/Demo/tix/samples/BtnBox.py
--- Python-2.5-base/Demo/tix/samples/BtnBox.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/BtnBox.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: BtnBox.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: BtnBox.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/CmpImg.py Python-2.5/Demo/tix/samples/CmpImg.py
--- Python-2.5-base/Demo/tix/samples/CmpImg.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/CmpImg.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: CmpImg.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: CmpImg.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/ComboBox.py Python-2.5/Demo/tix/samples/ComboBox.py
--- Python-2.5-base/Demo/tix/samples/ComboBox.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/ComboBox.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: ComboBox.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: ComboBox.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/Control.py Python-2.5/Demo/tix/samples/Control.py
--- Python-2.5-base/Demo/tix/samples/Control.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/Control.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: Control.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: Control.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/DirList.py Python-2.5/Demo/tix/samples/DirList.py
--- Python-2.5-base/Demo/tix/samples/DirList.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/DirList.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-#       $Id: DirList.py 36560 2004-07-18 06:16:08Z tim_one $
+#       $Id: DirList.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/DirTree.py Python-2.5/Demo/tix/samples/DirTree.py
--- Python-2.5-base/Demo/tix/samples/DirTree.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/DirTree.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-#       $Id: DirTree.py 36560 2004-07-18 06:16:08Z tim_one $
+#       $Id: DirTree.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/NoteBook.py Python-2.5/Demo/tix/samples/NoteBook.py
--- Python-2.5-base/Demo/tix/samples/NoteBook.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/NoteBook.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: NoteBook.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: NoteBook.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/OptMenu.py Python-2.5/Demo/tix/samples/OptMenu.py
--- Python-2.5-base/Demo/tix/samples/OptMenu.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/OptMenu.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: OptMenu.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: OptMenu.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/PanedWin.py Python-2.5/Demo/tix/samples/PanedWin.py
--- Python-2.5-base/Demo/tix/samples/PanedWin.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/PanedWin.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: PanedWin.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: PanedWin.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/PopMenu.py Python-2.5/Demo/tix/samples/PopMenu.py
--- Python-2.5-base/Demo/tix/samples/PopMenu.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/PopMenu.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-#       $Id: PopMenu.py 36560 2004-07-18 06:16:08Z tim_one $
+#       $Id: PopMenu.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/SHList1.py Python-2.5/Demo/tix/samples/SHList1.py
--- Python-2.5-base/Demo/tix/samples/SHList1.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/SHList1.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: SHList1.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: SHList1.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/SHList2.py Python-2.5/Demo/tix/samples/SHList2.py
--- Python-2.5-base/Demo/tix/samples/SHList2.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/SHList2.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: SHList2.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: SHList2.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/samples/Tree.py Python-2.5/Demo/tix/samples/Tree.py
--- Python-2.5-base/Demo/tix/samples/Tree.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/samples/Tree.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: Tree.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: Tree.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix Demostration Program
 #
diff -Naur Python-2.5-base/Demo/tix/tixwidgets.py Python-2.5/Demo/tix/tixwidgets.py
--- Python-2.5-base/Demo/tix/tixwidgets.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Demo/tix/tixwidgets.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: tixwidgets.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: tixwidgets.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # tixwidgets.py --
 #
diff -Naur Python-2.5-base/Doc/dist/dist.tex Python-2.5/Doc/dist/dist.tex
--- Python-2.5-base/Doc/dist/dist.tex	2006-08-12 17:20:49.000000000 -0700
+++ Python-2.5/Doc/dist/dist.tex	2009-03-17 15:50:58.000000000 -0700
@@ -1,7 +1,7 @@
 \documentclass{manual}
 \usepackage{distutils}
 
-% $Id: dist.tex 51240 2006-08-13 00:20:49Z neal.norwitz $
+% $Id: dist.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 
 % TODO
 %   Document extension.read_setup_file
diff -Naur Python-2.5-base/Doc/lib/liboptparse.tex Python-2.5/Doc/lib/liboptparse.tex
--- Python-2.5-base/Doc/lib/liboptparse.tex	2006-07-23 09:05:51.000000000 -0700
+++ Python-2.5/Doc/lib/liboptparse.tex	2009-03-17 15:50:58.000000000 -0700
@@ -71,7 +71,7 @@
 
 where the value of \emph{yourscript} is determined at runtime (normally
 from \code{sys.argv{[}0]}).
-% $Id: intro.txt 413 2004-09-28 00:59:13Z greg $ 
+% $Id: liboptparse.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $ 
 
 
 \subsection{Background\label{optparse-background}}
@@ -234,7 +234,7 @@
 implementation becomes.  Too much flexibility has drawbacks as well, of
 course; too many options can overwhelm users and make your code much
 harder to maintain.
-% $Id: tao.txt 413 2004-09-28 00:59:13Z greg $ 
+% $Id: liboptparse.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $ 
 
 
 \subsection{Tutorial\label{optparse-tutorial}}
@@ -661,7 +661,7 @@
 if __name__ == "__main__":
     main()
 \end{verbatim}
-% $Id: tutorial.txt 515 2006-06-10 15:37:45Z gward $ 
+% $Id: liboptparse.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $ 
 
 
 \subsection{Reference Guide\label{optparse-reference-guide}}
@@ -1390,7 +1390,7 @@
 \end{verbatim}
 
 \end{itemize}
-% $Id: reference.txt 519 2006-06-11 14:39:11Z gward $ 
+% $Id: liboptparse.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $ 
 
 
 \subsection{Option Callbacks\label{optparse-option-callbacks}}
@@ -1681,7 +1681,7 @@
 numbers in the arguments following \code{"-c"} will be interpreted as
 further options (probably causing an error), rather than as arguments to
 \code{"-c"}.  Fixing this is left as an exercise for the reader.
-% $Id: callbacks.txt 415 2004-09-30 02:26:17Z greg $ 
+% $Id: liboptparse.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $ 
 
 
 \subsection{Extending \module{optparse}\label{optparse-extending-optparse}}
@@ -1884,5 +1884,5 @@
 it's needed.
 
 \end{itemize}
-% $Id: extending.txt 517 2006-06-10 16:18:11Z gward $ 
+% $Id: liboptparse.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $ 
 
diff -Naur Python-2.5-base/Doc/templates/whatsnewXY.tex Python-2.5/Doc/templates/whatsnewXY.tex
--- Python-2.5-base/Doc/templates/whatsnewXY.tex	2003-07-30 18:17:22.000000000 -0700
+++ Python-2.5/Doc/templates/whatsnewXY.tex	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 \documentclass{howto}
 \usepackage{distutils}
-% $Id: whatsnewXY.tex 33728 2003-07-31 01:17:22Z montanaro $
+% $Id: whatsnewXY.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 
 % When creating a new ``What's New'' document, copy this to
 % ../whatsnew/whatsnewXY.tex, where X is replaced by the major version
diff -Naur Python-2.5-base/Doc/texinputs/distutils.sty Python-2.5/Doc/texinputs/distutils.sty
--- Python-2.5-base/Doc/texinputs/distutils.sty	2000-04-19 15:40:34.000000000 -0700
+++ Python-2.5/Doc/texinputs/distutils.sty	2009-03-17 15:50:58.000000000 -0700
@@ -2,7 +2,7 @@
 % LaTeX commands and macros needed for the two Distutils manuals,
 % inst.tex and dist.tex.
 %
-% $Id: distutils.sty 15178 2000-04-19 22:40:34Z gward $
+% $Id: distutils.sty,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 %
 
 % My gripe list about the Python style files:
diff -Naur Python-2.5-base/Doc/tools/anno-api.py Python-2.5/Doc/tools/anno-api.py
--- Python-2.5-base/Doc/tools/anno-api.py	2000-09-22 10:55:32.000000000 -0700
+++ Python-2.5/Doc/tools/anno-api.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #! /usr/bin/env python
 """Add reference count annotations to the Python/C API Reference."""
-__version__ = '$Revision: 17623 $'
+__version__ = '$Revision: 1.1.1.1 $'
 
 import getopt
 import os
diff -Naur Python-2.5-base/Doc/tools/buildindex.py Python-2.5/Doc/tools/buildindex.py
--- Python-2.5-base/Doc/tools/buildindex.py	2004-07-07 20:56:12.000000000 -0700
+++ Python-2.5/Doc/tools/buildindex.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #! /usr/bin/env python
 
-__version__ = '$Revision: 36356 $'
+__version__ = '$Revision: 1.1.1.1 $'
 
 import os.path
 import re
diff -Naur Python-2.5-base/Doc/tools/getpagecounts Python-2.5/Doc/tools/getpagecounts
--- Python-2.5-base/Doc/tools/getpagecounts	2005-09-22 12:37:52.000000000 -0700
+++ Python-2.5/Doc/tools/getpagecounts	2009-03-17 15:50:58.000000000 -0700
@@ -2,7 +2,7 @@
 
 """Generate a page count report of the PostScript version of the manuals."""
 
-__version__ = '$Revision: 39598 $'
+__version__ = '$Revision: 1.1.1.1 $'
 
 import getopt
 import sys
diff -Naur Python-2.5-base/Doc/tools/indfix.py Python-2.5/Doc/tools/indfix.py
--- Python-2.5-base/Doc/tools/indfix.py	2002-10-16 08:30:17.000000000 -0700
+++ Python-2.5/Doc/tools/indfix.py	2009-03-17 15:50:58.000000000 -0700
@@ -16,7 +16,7 @@
 Note that an item which matches the format of a collapsable item but which
 isn't part of a group of similar items is not modified.
 """
-__version__ = '$Revision: 29268 $'
+__version__ = '$Revision: 1.1.1.1 $'
 
 import re
 import StringIO
diff -Naur Python-2.5-base/Doc/tools/listmodules Python-2.5/Doc/tools/listmodules
--- Python-2.5-base/Doc/tools/listmodules	2000-11-17 11:05:12.000000000 -0800
+++ Python-2.5/Doc/tools/listmodules	2009-03-17 15:50:58.000000000 -0700
@@ -28,7 +28,7 @@
 
 """
 
-__version__ = '$Revision: 18276 $'
+__version__ = '$Revision: 1.1.1.1 $'
 
 import getopt
 import glob
diff -Naur Python-2.5-base/Doc/tools/listmodules.py Python-2.5/Doc/tools/listmodules.py
--- Python-2.5-base/Doc/tools/listmodules.py	2006-01-24 08:16:19.000000000 -0800
+++ Python-2.5/Doc/tools/listmodules.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,4 +1,4 @@
-# $Id: listmodules.py 42172 2006-01-24 16:16:19Z fredrik.lundh $
+# $Id: listmodules.py,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 #
 # Locate all standard modules available in this build.
 #
diff -Naur Python-2.5-base/Doc/tools/py2texi.el Python-2.5/Doc/tools/py2texi.el
--- Python-2.5-base/Doc/tools/py2texi.el	2005-03-09 21:02:18.000000000 -0800
+++ Python-2.5/Doc/tools/py2texi.el	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
 ;; Copyright (C) 1998, 1999, 2001, 2002 Milan Zamazal
 
 ;; Author: Milan Zamazal <pdm@zamazal.org>
-;; Version: $Id: py2texi.el 38616 2005-03-10 05:02:18Z fdrake $
+;; Version: $Id: py2texi.el,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 ;; Keywords: python
 
 ;; COPYRIGHT NOTICE
diff -Naur Python-2.5-base/Doc/tools/refcounts.py Python-2.5/Doc/tools/refcounts.py
--- Python-2.5-base/Doc/tools/refcounts.py	2004-02-12 09:35:32.000000000 -0800
+++ Python-2.5/Doc/tools/refcounts.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,5 +1,5 @@
 """Support functions for loading the reference count data file."""
-__version__ = '$Revision: 35267 $'
+__version__ = '$Revision: 1.1.1.1 $'
 
 import os
 import sys
diff -Naur Python-2.5-base/Doc/tools/support.py Python-2.5/Doc/tools/support.py
--- Python-2.5-base/Doc/tools/support.py	2004-11-04 20:05:06.000000000 -0800
+++ Python-2.5/Doc/tools/support.py	2009-03-17 15:50:58.000000000 -0700
@@ -4,7 +4,7 @@
 useful helpers.
 
 """
-__version__ = '$Revision: 37764 $'
+__version__ = '$Revision: 1.1.1.1 $'
 
 
 import getopt
diff -Naur Python-2.5-base/Doc/whatsnew/whatsnew20.tex Python-2.5/Doc/whatsnew/whatsnew20.tex
--- Python-2.5-base/Doc/whatsnew/whatsnew20.tex	2006-07-29 20:03:43.000000000 -0700
+++ Python-2.5/Doc/whatsnew/whatsnew20.tex	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 \documentclass{howto}
 
-% $Id: whatsnew20.tex 50964 2006-07-30 03:03:43Z fred.drake $
+% $Id: whatsnew20.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 
 \title{What's New in Python 2.0}
 \release{1.02}
diff -Naur Python-2.5-base/Doc/whatsnew/whatsnew21.tex Python-2.5/Doc/whatsnew/whatsnew21.tex
--- Python-2.5-base/Doc/whatsnew/whatsnew21.tex	2006-07-29 20:03:43.000000000 -0700
+++ Python-2.5/Doc/whatsnew/whatsnew21.tex	2009-03-17 15:50:58.000000000 -0700
@@ -2,7 +2,7 @@
 
 \usepackage{distutils}
 
-% $Id: whatsnew21.tex 50964 2006-07-30 03:03:43Z fred.drake $
+% $Id: whatsnew21.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 
 \title{What's New in Python 2.1}
 \release{1.01}
diff -Naur Python-2.5-base/Doc/whatsnew/whatsnew22.tex Python-2.5/Doc/whatsnew/whatsnew22.tex
--- Python-2.5-base/Doc/whatsnew/whatsnew22.tex	2004-09-10 12:33:00.000000000 -0700
+++ Python-2.5/Doc/whatsnew/whatsnew22.tex	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 \documentclass{howto}
 
-% $Id: whatsnew22.tex 37315 2004-09-10 19:33:00Z akuchling $
+% $Id: whatsnew22.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 
 \title{What's New in Python 2.2}
 \release{1.02}
diff -Naur Python-2.5-base/Doc/whatsnew/whatsnew23.tex Python-2.5/Doc/whatsnew/whatsnew23.tex
--- Python-2.5-base/Doc/whatsnew/whatsnew23.tex	2006-07-29 20:03:43.000000000 -0700
+++ Python-2.5/Doc/whatsnew/whatsnew23.tex	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 \documentclass{howto}
 \usepackage{distutils}
-% $Id: whatsnew23.tex 50964 2006-07-30 03:03:43Z fred.drake $
+% $Id: whatsnew23.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 
 \title{What's New in Python 2.3}
 \release{1.01}
diff -Naur Python-2.5-base/Doc/whatsnew/whatsnew24.tex Python-2.5/Doc/whatsnew/whatsnew24.tex
--- Python-2.5-base/Doc/whatsnew/whatsnew24.tex	2006-07-29 08:42:46.000000000 -0700
+++ Python-2.5/Doc/whatsnew/whatsnew24.tex	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 \documentclass{howto}
 \usepackage{distutils}
-% $Id: whatsnew24.tex 50936 2006-07-29 15:42:46Z andrew.kuchling $
+% $Id: whatsnew24.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 
 % Don't write extensive text for new sections; I'll do that.  
 % Feel free to add commented-out reminders of things that need
diff -Naur Python-2.5-base/Doc/whatsnew/whatsnew25.tex Python-2.5/Doc/whatsnew/whatsnew25.tex
--- Python-2.5-base/Doc/whatsnew/whatsnew25.tex	2006-09-05 06:11:33.000000000 -0700
+++ Python-2.5/Doc/whatsnew/whatsnew25.tex	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 \documentclass{howto}
 \usepackage{distutils}
-% $Id: whatsnew25.tex 51743 2006-09-05 13:11:33Z andrew.kuchling $
+% $Id: whatsnew25.tex,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 
 % Fix XXX comments
 
diff -Naur Python-2.5-base/Include/cct.h Python-2.5/Include/cct.h
--- Python-2.5-base/Include/cct.h	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Include/cct.h	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,151 @@
+/*
+Software License Agreement (BSD License)
+
+Copyright (c) 2008, Regents of the University of California
+All rights reserved.
+
+Redistribution and use of this software in source and binary forms, with or
+without modification, are permitted provided that the following conditions
+are met:
+
+* Redistributions of source code must retain the above
+  copyright notice, this list of conditions and the
+  following disclaimer.
+
+* Redistributions in binary form must reproduce the above
+  copyright notice, this list of conditions and the
+  following disclaimer in the documentation and/or other
+  materials provided with the distribution.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
+LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGE.  USERS OF THIS SOFTWARE ACKNOWLEDGE THE POSSIBLE
+ PRESENCE OF OTHER OPEN SOURCE LICENSED MATERIAL, COPYRIGHTED MATERIAL OR
+PATENTED MATERIAL IN THIS SOFTWARE, AND IF ANY SUCH MATERIAL IS DISCOVERED THE PARTY
+DISCOVERING IT MAY INFORM DR. RICH WOLSKI AT THE UNIVERSITY OF CALIFORNIA, 
+SANTA BARBARA WHO WILL THEN ASCERTAIN THE MOST APPROPRIATE REMEDY, WHICH
+IN THE REGENTS. DISCRETION MAY INCLUDE, WITHOUT LIMITATION, REPLACEMENT
+OF THE CODE SO IDENTIFIED, LICENSING OF THE CODE SO IDENTIFIED, OR WITHDRAWAL
+OF THE CODE CAPABILITY TO THE EXTENT NEEDED TO COMPLY WITH ANY SUCH LICENSES
+OR RIGHTS.
+*/
+#include <stdio.h>
+
+// Manages CCT for each thread. Thread name is used as ID.
+/*typdef CCTManager;
+class CCTNode;
+class CCT;
+*/
+//typedef char char;
+
+#define INIT_CH_SIZE 2	 // number of children to start with
+#define UL unsigned long
+
+#define ULL unsigned long long
+//#define LOG_CALLS_DEBUG
+
+typedef struct CCTManager_t{
+	int tm_size;	
+	struct CCT_t** ccts;	// cct roots
+	int free_thread_slot;
+} CCTManager;
+
+
+
+
+typedef struct CCTNode_t{
+	
+	/*
+		Since the CCT takes call-site into consideration, the node ID is (id, bci)
+	*/
+	UL id; 						// unique node id
+	UL mid;						// unique method id 
+	int bci; 					// call site
+	
+	struct CCT_t* cct; 					// the CCT it belongs to
+	char* name;
+	
+	
+	struct CCTNode_t* parent;
+	struct CCTNode_t** children;
+	int children_size; 		// current capacity of children array
+	int free_child_slot;
+	char interpolated; 		// this node could be a native call
+	 
+	// other information
+	ULL start_time;
+	double sum, sq_sum; 			// total sum of execution time, and sum of squares
+	int inv_count;				// invocation count
+	ULL avg_time;			// average of execution times
+	ULL var_time;			// variance of execution times
+	ULL max_time, min_time;	// maximum/minimum execution time
+		
+	
+} CCTNode;
+
+	
+
+
+
+typedef struct CCT_t{
+
+	
+	struct CCTNode_t* root;
+	struct CCTNode_t* current;
+	UL tid;						// thread id
+	UL node_id;				// used for assigning unique IDs to nodes
+	char* tname;
+	unsigned int no_of_nodes;	
+} CCT;
+
+
+// CCTManager API
+void initCCTManager(void);
+
+void destroyCCTManager(void);							// destroy tree manager
+
+struct CCT_t* getTree(UL tid);		// gets tree of specific thread name
+struct CCT_t* addTree(UL tid, char* tname);			// adds a tree for the given thread
+void dump_as_bin(UL tid);
+void dump_as_text(UL tid);
+void dump_all_as_bin(void);
+void dump_all_as_text(void);
+
+
+// CCTNode API (private)
+//static CCTNode* createCCTNode(UL id/*, CCT* cct*/, char* name, UL mid, int bci, ULL t);
+//static void destroyCCTNode(CCTNode* ccn);
+//static CCTNode* addChild(CCTNode* cctn, UL id, char* name, UL mid, int bci, ULL t);
+//static CCTNode* getChildByMID(CCTNode* cctn, UL mid, int bci);
+//static CCTNode* getChildByName(CCTNode* cctn, char* name, UL mid, int bci);
+//static CCTNode* getInterpolatedChild(CCTNode* cctn, UL mid);
+
+
+
+//void update_stats(CCTNode* cctn, ULL t);
+//static void dump_CCTNode_as_bin(CCTNode* cctn, FILE* fp);
+//static void dump_CCTNode_as_text(CCTNode* cctn, FILE* fp);
+
+// CCT API
+//static CCT* createCCT(UL tid, char* tname);
+void load(CCT* cct, char** stack, UL* ids, int depth);	// initialize the CCT with initial stack contents. The reason we do that
+																			// is that by the time a thread get named, the stack won't be empty.
+													
+void update_with_call(CCT* cct, const char* caller, UL caller_id, const char* callee, UL callee_id, int bci);
+void update_with_return(CCT* cct, const char* callee, UL callee_id);
+void update_with_return_all(CCT* cct);
+	
+	
+//static void dump_CCT_as_bin(CCT* cct, FILE* fp);
+//static void dump_CCT_as_text(CCT* cct, FILE* fp);
+
+//static void dump_node_text(CCTNode* node, FILE* fp);
+//static void dump_node_bin(CCTNode* node, FILE* fp);
diff -Naur Python-2.5-base/Include/logger.h Python-2.5/Include/logger.h
--- Python-2.5-base/Include/logger.h	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Include/logger.h	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,51 @@
+/*
+Software License Agreement (BSD License)
+
+Copyright (c) 2008, Regents of the University of California
+All rights reserved.
+
+Redistribution and use of this software in source and binary forms, with or
+without modification, are permitted provided that the following conditions
+are met:
+
+* Redistributions of source code must retain the above
+  copyright notice, this list of conditions and the
+  following disclaimer.
+
+* Redistributions in binary form must reproduce the above
+  copyright notice, this list of conditions and the
+  following disclaimer in the documentation and/or other
+  materials provided with the distribution.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
+LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGE.  USERS OF THIS SOFTWARE ACKNOWLEDGE THE POSSIBLE
+PRESENCE OF OTHER OPEN SOURCE LICENSED MATERIAL, COPYRIGHTED MATERIAL OR
+PATENTED MATERIAL IN THIS SOFTWARE, AND IF ANY SUCH MATERIAL IS DISCOVERED THE PARTY
+DISCOVERING IT MAY INFORM DR. RICH WOLSKI AT THE UNIVERSITY OF CALIFORNIA,
+SANTA BARBARA WHO WILL THEN ASCERTAIN THE MOST APPROPRIATE REMEDY, WHICH
+IN THE REGENTS. DISCRETION MAY INCLUDE, WITHOUT LIMITATION, REPLACEMENT
+OF THE CODE SO IDENTIFIED, LICENSING OF THE CODE SO IDENTIFIED, OR WITHDRAWAL
+OF THE CODE CAPABILITY TO THE EXTENT NEEDED TO COMPLY WITH ANY SUCH LICENSES
+OR RIGHTS.
+*/
+void resetCallCounts(void);
+void openLogFile(char* fileName);
+void openBinLogFile(char* fileName);
+inline void logMessage(char* s);
+inline void logBinMessage(char type,unsigned long long timestamp, unsigned long tid, const char* name );
+void initSampleVars(int msr, int bli);
+unsigned long long getTotalCallCount(void);
+inline void incTotalCallCount(void);
+inline void decTotalCallCount(void);
+inline int decSampleCounter(void);
+void printCallCounts(void);
+void closeLogFile(void);
diff -Naur Python-2.5-base/Include/patchlevel.h Python-2.5/Include/patchlevel.h
--- Python-2.5-base/Include/patchlevel.h	2006-09-17 23:51:50.000000000 -0700
+++ Python-2.5/Include/patchlevel.h	2009-03-17 15:50:58.000000000 -0700
@@ -29,7 +29,7 @@
 #define PY_VERSION		"2.5"
 
 /* Subversion Revision number of this file (not of the repository) */
-#define PY_PATCHLEVEL_REVISION  "$Revision: 51908 $"
+#define PY_PATCHLEVEL_REVISION  "$Revision: 1.1.1.1 $"
 
 /* Version as a single 4-byte hex number, e.g. 0x010502B2 == 1.5.2b2.
    Use this for numeric comparisons, e.g. #if PY_VERSION_HEX >= ... */
diff -Naur Python-2.5-base/Include/pycct.h Python-2.5/Include/pycct.h
--- Python-2.5-base/Include/pycct.h	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Include/pycct.h	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,54 @@
+/*
+Software License Agreement (BSD License)
+
+Copyright (c) 2008, Regents of the University of California
+All rights reserved.
+
+Redistribution and use of this software in source and binary forms, with or
+without modification, are permitted provided that the following conditions
+are met:
+
+* Redistributions of source code must retain the above
+  copyright notice, this list of conditions and the
+  following disclaimer.
+
+* Redistributions in binary form must reproduce the above
+  copyright notice, this list of conditions and the
+  following disclaimer in the documentation and/or other
+  materials provided with the distribution.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
+LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGE.  USERS OF THIS SOFTWARE ACKNOWLEDGE THE POSSIBLE
+ PRESENCE OF OTHER OPEN SOURCE LICENSED MATERIAL, COPYRIGHTED MATERIAL OR
+PATENTED MATERIAL IN THIS SOFTWARE, AND IF ANY SUCH MATERIAL IS DISCOVERED THE PARTY
+DISCOVERING IT MAY INFORM DR. RICH WOLSKI AT THE UNIVERSITY OF CALIFORNIA, 
+SANTA BARBARA WHO WILL THEN ASCERTAIN THE MOST APPROPRIATE REMEDY, WHICH
+IN THE REGENTS. DISCRETION MAY INCLUDE, WITHOUT LIMITATION, REPLACEMENT
+OF THE CODE SO IDENTIFIED, LICENSING OF THE CODE SO IDENTIFIED, OR WITHDRAWAL
+OF THE CODE CAPABILITY TO THE EXTENT NEEDED TO COMPLY WITH ANY SUCH LICENSES
+OR RIGHTS.
+*/
+// Nagy
+#ifdef __cplusplus
+extern "C" {
+#endif
+PyAPI_DATA(int) Py_CCT;
+PyAPI_DATA(int) Py_txtCCT;
+PyAPI_DATA(int) Py_logCalls;
+PyAPI_DATA(int) Py_txtLogCalls;
+PyAPI_DATA(int) Py_cntCalls;
+PyAPI_DATA(int) Py_sampleLogs;
+PyAPI_DATA(int) Py_maxLogRate;
+PyAPI_DATA(int) Py_logInt;
+#ifdef __cplusplus
+}
+#endif
diff -Naur Python-2.5-base/Include/pystate.h Python-2.5/Include/pystate.h
--- Python-2.5-base/Include/pystate.h	2006-07-10 14:08:24.000000000 -0700
+++ Python-2.5/Include/pystate.h	2009-03-17 15:50:58.000000000 -0700
@@ -94,6 +94,9 @@
     PyObject *async_exc; /* Asynchronous exception to raise */
     long thread_id; /* Thread id where this tstate was created */
 
+	// Nagy
+	struct CCT_t* cct;
+
     /* XXX signal handlers should also be here */
 
 } PyThreadState;
diff -Naur Python-2.5-base/Include/rdtsc.h Python-2.5/Include/rdtsc.h
--- Python-2.5-base/Include/rdtsc.h	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Include/rdtsc.h	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,60 @@
+#ifndef __RDTSC_H_DEFINED__
+#define __RDTSC_H_DEFINED__
+
+
+#if defined(__i386__)
+
+static __inline__ unsigned long long rdtsc(void)
+{
+  unsigned long long int x;
+     __asm__ volatile (".byte 0x0f, 0x31" : "=A" (x));
+     return x;
+}
+#elif defined(__x86_64__)
+
+//typedef unsigned long long int unsigned long long;
+
+static __inline__ unsigned long long rdtsc(void)
+{
+  unsigned hi, lo;
+  __asm__ __volatile__ ("rdtsc" : "=a"(lo), "=d"(hi));
+  return ( (unsigned long long)lo)|( ((unsigned long long)hi)<<32 );
+}
+
+#elif defined(__powerpc__)
+
+typedef unsigned long long int unsigned long long;
+
+static __inline__ unsigned long long rdtsc(void)
+{
+  unsigned long long int result=0;
+  unsigned long int upper, lower,tmp;
+  __asm__ volatile(
+                "0:                  \n"
+                "\tmftbu   %0           \n"
+                "\tmftb    %1           \n"
+                "\tmftbu   %2           \n"
+                "\tcmpw    %2,%0        \n"
+                "\tbne     0b         \n"
+                : "=r"(upper),"=r"(lower),"=r"(tmp)
+                );
+  result = upper;
+  result = result<<32;
+  result = result|lower;
+
+  return(result);
+}
+
+#else
+
+#error "No tick counter is available!"
+
+#endif
+
+
+/*  $RCSfile: rdtsc.h,v $   $Author: nagy $
+ *  $Revision: 1.1.1.1 $  $Date: 2009/01/29 18:17:31 $
+ */
+
+#endif
+
diff -Naur Python-2.5-base/Lib/bsddb/dbtables.py Python-2.5/Lib/bsddb/dbtables.py
--- Python-2.5-base/Lib/bsddb/dbtables.py	2006-06-11 01:35:14.000000000 -0700
+++ Python-2.5/Lib/bsddb/dbtables.py	2009-03-17 15:50:58.000000000 -0700
@@ -15,7 +15,7 @@
 # This provides a simple database table interface built on top of
 # the Python BerkeleyDB 3 interface.
 #
-_cvsid = '$Id: dbtables.py 46858 2006-06-11 08:35:14Z neal.norwitz $'
+_cvsid = '$Id: dbtables.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $'
 
 import re
 import sys
diff -Naur Python-2.5-base/Lib/bsddb/test/test_dbtables.py Python-2.5/Lib/bsddb/test/test_dbtables.py
--- Python-2.5-base/Lib/bsddb/test/test_dbtables.py	2006-06-07 22:38:11.000000000 -0700
+++ Python-2.5/Lib/bsddb/test/test_dbtables.py	2009-03-17 15:50:58.000000000 -0700
@@ -18,7 +18,7 @@
 #
 #   --  Gregory P. Smith <greg@electricrain.com>
 #
-# $Id: test_dbtables.py 46737 2006-06-08 05:38:11Z gregory.p.smith $
+# $Id: test_dbtables.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 
 import sys, os, re
 try:
diff -Naur Python-2.5-base/Lib/cgitb.py Python-2.5/Lib/cgitb.py
--- Python-2.5-base/Lib/cgitb.py	2005-10-20 12:59:25.000000000 -0700
+++ Python-2.5/Lib/cgitb.py	2009-03-17 15:50:58.000000000 -0700
@@ -23,7 +23,7 @@
 
 __author__ = 'Ka-Ping Yee'
 
-__version__ = '$Revision: 39758 $'
+__version__ = '$Revision: 1.1.1.1 $'
 
 import sys
 
diff -Naur Python-2.5-base/Lib/curses/__init__.py Python-2.5/Lib/curses/__init__.py
--- Python-2.5-base/Lib/curses/__init__.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Lib/curses/__init__.py	2009-03-17 15:50:58.000000000 -0700
@@ -10,7 +10,7 @@
 
 """
 
-__revision__ = "$Id: __init__.py 36560 2004-07-18 06:16:08Z tim_one $"
+__revision__ = "$Id: __init__.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $"
 
 from _curses import *
 from curses.wrapper import wrapper
diff -Naur Python-2.5-base/Lib/curses/panel.py Python-2.5/Lib/curses/panel.py
--- Python-2.5-base/Lib/curses/panel.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Lib/curses/panel.py	2009-03-17 15:50:58.000000000 -0700
@@ -3,6 +3,6 @@
 Module for using panels with curses.
 """
 
-__revision__ = "$Id: panel.py 36560 2004-07-18 06:16:08Z tim_one $"
+__revision__ = "$Id: panel.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $"
 
 from _curses_panel import *
diff -Naur Python-2.5-base/Lib/distutils/README Python-2.5/Lib/distutils/README
--- Python-2.5-base/Lib/distutils/README	2002-11-13 05:26:59.000000000 -0800
+++ Python-2.5/Lib/distutils/README	2009-03-17 15:50:58.000000000 -0700
@@ -19,4 +19,4 @@
 
         Greg Ward (gward@python.net)
 
-$Id: README 29650 2002-11-13 13:26:59Z akuchling $
+$Id: README,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
diff -Naur Python-2.5-base/Lib/distutils/__init__.py Python-2.5/Lib/distutils/__init__.py
--- Python-2.5-base/Lib/distutils/__init__.py	2006-08-16 01:13:26.000000000 -0700
+++ Python-2.5/Lib/distutils/__init__.py	2009-03-17 15:50:58.000000000 -0700
@@ -10,7 +10,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: __init__.py 51309 2006-08-16 08:13:26Z marc-andre.lemburg $"
+__revision__ = "$Id: __init__.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 # Distutils version
 #
diff -Naur Python-2.5-base/Lib/distutils/archive_util.py Python-2.5/Lib/distutils/archive_util.py
--- Python-2.5-base/Lib/distutils/archive_util.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/archive_util.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: archive_util.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: archive_util.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os
 from distutils.errors import DistutilsExecError
diff -Naur Python-2.5-base/Lib/distutils/bcppcompiler.py Python-2.5/Lib/distutils/bcppcompiler.py
--- Python-2.5-base/Lib/distutils/bcppcompiler.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/bcppcompiler.py	2009-03-17 15:50:58.000000000 -0700
@@ -13,7 +13,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: bcppcompiler.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: bcppcompiler.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 
 import sys, os
diff -Naur Python-2.5-base/Lib/distutils/ccompiler.py Python-2.5/Lib/distutils/ccompiler.py
--- Python-2.5-base/Lib/distutils/ccompiler.py	2006-05-26 07:07:23.000000000 -0700
+++ Python-2.5/Lib/distutils/ccompiler.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: ccompiler.py 46331 2006-05-26 14:07:23Z bob.ippolito $"
+__revision__ = "$Id: ccompiler.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, re
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/cmd.py Python-2.5/Lib/distutils/cmd.py
--- Python-2.5-base/Lib/distutils/cmd.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/cmd.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: cmd.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: cmd.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string, re
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/command/__init__.py Python-2.5/Lib/distutils/command/__init__.py
--- Python-2.5-base/Lib/distutils/command/__init__.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/command/__init__.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: __init__.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: __init__.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 __all__ = ['build',
            'build_py',
diff -Naur Python-2.5-base/Lib/distutils/command/bdist.py Python-2.5/Lib/distutils/command/bdist.py
--- Python-2.5-base/Lib/distutils/command/bdist.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/command/bdist.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: bdist.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: bdist.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os, string
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/command/bdist_dumb.py Python-2.5/Lib/distutils/command/bdist_dumb.py
--- Python-2.5-base/Lib/distutils/command/bdist_dumb.py	2005-03-23 10:54:36.000000000 -0800
+++ Python-2.5/Lib/distutils/command/bdist_dumb.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: bdist_dumb.py 38697 2005-03-23 18:54:36Z loewis $"
+__revision__ = "$Id: bdist_dumb.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os
 from distutils.core import Command
diff -Naur Python-2.5-base/Lib/distutils/command/bdist_rpm.py Python-2.5/Lib/distutils/command/bdist_rpm.py
--- Python-2.5-base/Lib/distutils/command/bdist_rpm.py	2006-07-03 05:28:58.000000000 -0700
+++ Python-2.5/Lib/distutils/command/bdist_rpm.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: bdist_rpm.py 47213 2006-07-03 12:28:58Z martin.v.loewis $"
+__revision__ = "$Id: bdist_rpm.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string
 import glob
diff -Naur Python-2.5-base/Lib/distutils/command/bdist_wininst.py Python-2.5/Lib/distutils/command/bdist_wininst.py
--- Python-2.5-base/Lib/distutils/command/bdist_wininst.py	2005-03-23 10:54:36.000000000 -0800
+++ Python-2.5/Lib/distutils/command/bdist_wininst.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: bdist_wininst.py 38697 2005-03-23 18:54:36Z loewis $"
+__revision__ = "$Id: bdist_wininst.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string
 from distutils.core import Command
diff -Naur Python-2.5-base/Lib/distutils/command/build.py Python-2.5/Lib/distutils/command/build.py
--- Python-2.5-base/Lib/distutils/command/build.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/command/build.py	2009-03-17 15:50:58.000000000 -0700
@@ -4,7 +4,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: build.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: build.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os
 from distutils.core import Command
diff -Naur Python-2.5-base/Lib/distutils/command/build_clib.py Python-2.5/Lib/distutils/command/build_clib.py
--- Python-2.5-base/Lib/distutils/command/build_clib.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/command/build_clib.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: build_clib.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: build_clib.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 
 # XXX this module has *lots* of code ripped-off quite transparently from
diff -Naur Python-2.5-base/Lib/distutils/command/build_ext.py Python-2.5/Lib/distutils/command/build_ext.py
--- Python-2.5-base/Lib/distutils/command/build_ext.py	2006-05-23 04:47:16.000000000 -0700
+++ Python-2.5/Lib/distutils/command/build_ext.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: build_ext.py 46103 2006-05-23 11:47:16Z ronald.oussoren $"
+__revision__ = "$Id: build_ext.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string, re
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/command/build_py.py Python-2.5/Lib/distutils/command/build_py.py
--- Python-2.5-base/Lib/distutils/command/build_py.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/command/build_py.py	2009-03-17 15:50:58.000000000 -0700
@@ -4,7 +4,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: build_py.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: build_py.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, string, os
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/command/build_scripts.py Python-2.5/Lib/distutils/command/build_scripts.py
--- Python-2.5-base/Lib/distutils/command/build_scripts.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/command/build_scripts.py	2009-03-17 15:50:58.000000000 -0700
@@ -4,7 +4,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: build_scripts.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: build_scripts.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, re
 from stat import ST_MODE
diff -Naur Python-2.5-base/Lib/distutils/command/clean.py Python-2.5/Lib/distutils/command/clean.py
--- Python-2.5-base/Lib/distutils/command/clean.py	2005-03-03 00:12:27.000000000 -0800
+++ Python-2.5/Lib/distutils/command/clean.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: clean.py 38532 2005-03-03 08:12:27Z loewis $"
+__revision__ = "$Id: clean.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os
 from distutils.core import Command
diff -Naur Python-2.5-base/Lib/distutils/command/command_template Python-2.5/Lib/distutils/command/command_template
--- Python-2.5-base/Lib/distutils/command/command_template	2000-05-29 19:04:54.000000000 -0700
+++ Python-2.5/Lib/distutils/command/command_template	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 
 # created 2000/mm/dd, John Doe
 
-__revision__ = "$Id$"
+__revision__ = "$Id: command_template,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 from distutils.core import Command
 
diff -Naur Python-2.5-base/Lib/distutils/command/config.py Python-2.5/Lib/distutils/command/config.py
--- Python-2.5-base/Lib/distutils/command/config.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/command/config.py	2009-03-17 15:50:58.000000000 -0700
@@ -11,7 +11,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: config.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: config.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string, re
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/command/install.py Python-2.5/Lib/distutils/command/install.py
--- Python-2.5-base/Lib/distutils/command/install.py	2006-03-27 13:55:21.000000000 -0800
+++ Python-2.5/Lib/distutils/command/install.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: install.py 43363 2006-03-27 21:55:21Z phillip.eby $"
+__revision__ = "$Id: install.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/command/install_data.py Python-2.5/Lib/distutils/command/install_data.py
--- Python-2.5-base/Lib/distutils/command/install_data.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/command/install_data.py	2009-03-17 15:50:58.000000000 -0700
@@ -7,7 +7,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: install_data.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: install_data.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os
 from types import StringType
diff -Naur Python-2.5-base/Lib/distutils/command/install_headers.py Python-2.5/Lib/distutils/command/install_headers.py
--- Python-2.5-base/Lib/distutils/command/install_headers.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/command/install_headers.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: install_headers.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: install_headers.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os
 from distutils.core import Command
diff -Naur Python-2.5-base/Lib/distutils/command/install_lib.py Python-2.5/Lib/distutils/command/install_lib.py
--- Python-2.5-base/Lib/distutils/command/install_lib.py	2004-12-02 12:14:16.000000000 -0800
+++ Python-2.5/Lib/distutils/command/install_lib.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: install_lib.py 37946 2004-12-02 20:14:16Z lemburg $"
+__revision__ = "$Id: install_lib.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string
 from types import IntType
diff -Naur Python-2.5-base/Lib/distutils/command/install_scripts.py Python-2.5/Lib/distutils/command/install_scripts.py
--- Python-2.5-base/Lib/distutils/command/install_scripts.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/command/install_scripts.py	2009-03-17 15:50:58.000000000 -0700
@@ -7,7 +7,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: install_scripts.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: install_scripts.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os
 from distutils.core import Command
diff -Naur Python-2.5-base/Lib/distutils/command/register.py Python-2.5/Lib/distutils/command/register.py
--- Python-2.5-base/Lib/distutils/command/register.py	2005-03-31 05:57:38.000000000 -0800
+++ Python-2.5/Lib/distutils/command/register.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 
 # created 2002/10/21, Richard Jones
 
-__revision__ = "$Id: register.py 38752 2005-03-31 13:57:38Z doerwalter $"
+__revision__ = "$Id: register.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string, urllib2, getpass, urlparse
 import StringIO, ConfigParser
diff -Naur Python-2.5-base/Lib/distutils/command/sdist.py Python-2.5/Lib/distutils/command/sdist.py
--- Python-2.5-base/Lib/distutils/command/sdist.py	2005-03-23 10:54:36.000000000 -0800
+++ Python-2.5/Lib/distutils/command/sdist.py	2009-03-17 15:50:58.000000000 -0700
@@ -4,7 +4,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: sdist.py 38697 2005-03-23 18:54:36Z loewis $"
+__revision__ = "$Id: sdist.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/command/wininst-6.exe Python-2.5/Lib/distutils/command/wininst-6.exe
--- Python-2.5-base/Lib/distutils/command/wininst-6.exe	2005-02-03 12:48:26.000000000 -0800
+++ Python-2.5/Lib/distutils/command/wininst-6.exe	1969-12-31 16:00:00.000000000 -0800
@@ -1,93 +0,0 @@
-MZ                @                                       	!L!This program cannot be run in DOS mode.
-$       mmmam|cmimmmlom~m2mgmGkmRichm                PE  L B           `         g      p    @                                                                     X                                                                           p  \                          .text   PY      `                    `.rdata  N:   p   @   p              @  @.data   (*                        @  .rsrc   X                        @  @                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        SUVt$Wt}l$|$> tpj\VPq@ YYt_& Wp@ u'j Wp@ utWh@ jWjYYuh   p@ tWh@ j\FujX_^][USVW=p@ 3   9uuE   Vh   uVVSuE   p@ uu uu  Pt	Pp@ /9u    ujU YYt.Vh   jVVSuEu%9u    uhT@    ujU YY   9u t
-ujU YYEPuup@ }EPEPEPWp@ 9uu	Wp@ \VuVjVWp@ W=p@ u9u t8uh<@ &VVVjSp@ SEE;u9u tuh(@ jU 3_^[U8}S]VW   j8Ej PMU  EjEE@^EEEj8h@ EjP]0  }tt*Ph@ EjP2  Y;YttPh|@ j3EPG  Yt.tPhd@ j339uuuuST  j^Sp@ _^[U(  EUSVL\W]+C+;PK}k  e f{
- `  	MU}D*4>PK:  ?PK.  .uMVMN VUOUWEUDEPS  PS  \th@ PS  YYPp@ e EE8 t>EEE0S  PEu0Lq@    EEEE8 uGPuP\q@ P@  P/S  \YYtJufFPfFPvuPj t"uOvvQuPh   } tE@PC
-PujUC
-E9EM   EM4R  sEPR  _EM+MPiR  \t*PPR  /Yth@ P.R  YYE\t/u@KSPP\q@ ]3jX_^[D$tt/u \@uUEPh@ u@ u]ujs  h @ @ ]UEPh@ u@ u]uj;  h @ @ ]U  =@  VWu h@ p@ t3h@ Pp@ @ EPh@ u@ tY=@  uh@ 5@ @ YY;3$@ u64q@ YYt)Gt@ |uh@ 5t@ @ 3_^ @ j PPj @ tPh@ @ YYuh@ 5@ U,  V3VuuuuuuLr@ ;}PhD@   EPEPEPEPEPEPEPh8@ u@ $F  EPh@ jVh@ Pr@ ;}Ph@    EURh@ P;}Ph@    EuPQP;}Ph@ pEuPQ;}Ph@ X9utEuPQ,;}Ph@ ;9utuEuPQD;}Phl@ 9ut'EuPQ$;}PhH@ 5@ @ Gh  PjuVVp@ EjRPQ;}<Puh@ 5@ @ E;tPQE;tPQTr@ 3$EPQEPQTr@ h @ @ Y^UQQEPEPEPhh@ u@ uuuu@r@ PDr@ Phd@ @ YY5@ hl@ @ YYU   EP uh   Pxq@ EH   HH   HtuHt[HtH   @    uh@ EV5<r@ W}Pj h  5@ uWh  5@ _^    Pp@ P   YYj0 h@ P@r@ PDr@ b@ tuh@ Ptq@ j.upq@ YYt6h@ POM  YYu%u"   @ tuhp@ Ptq@ jXVj|q@ t$8q@ @ YFY5@ ^U   3V9E   t5PMPQVuPh   \p@ V uPq@ uXp@   Pp@ u+ VPq@  jh@ P5@ Dr@ 3^U@}tuuuu,r@    SVEWPu0r@ j]4r@ j
-Y3h@ QQQQQQQjh  QQQP<p@ =@p@ PSjSEDp@ `@ VK  YPVjjSHp@ h uLp@ VK  YPVj
-j
-uuuPPp@ EPu8r@ _^3[ U   K  }N   }     VW}W   @ YtPj hr  h  Wr@ Wr@ P   $ @  h@ P r@ 5$r@  Ph  Wh@ h  Wh@ h   W_3^'Ex8ujj hp  ur@ P(r@ 3 =@  tB=@  u9Vt$r@ @ j P
-HQRjQV8p@ V@ t$r@ ^UVEWPur@ 54r@ j jUEj ++ERU+UR+PE+E+Pur@ _^UQEVPjj h@ h  p@ u	up@ 3^@ V  ;t@=  uu05@ ^jhl@ hD@ t$Dr@ @ ^|$~@ u|$@ }@   ^I  $  SUVNW  $   -r@ -   t+H!  $(    f;  H    @ tPj hr  h  V@   Sh  WVr@ P  Sh  WVr@ P  j j h  WVD$ttHj Ph  WVt4=@  t+S$   h @ P r@ $  Ph  V$r@ |$ uCt)=@  t S$   h@ P r@ $  @ jh@ PVDr@ r@ jj hp  VP(r@ j j h  WVD$uNjj hp  VP(r@ $r@  @ Wh  VWh  VWh @ G  Wh @ G    jj hp  VP(r@ j t$h  WV   @ PS@ HG  YYSh  V$r@ j t$h  WV@P|q@ YD$tZPt$h  WVhp@ h@ h@ t$q@ u5p@ 5@ ht@ h @  r@ t$q@ h @ h @ F  YY5p@ 5@ $D$ SPF  D$(PF  |\tD$h@ PaF  YYwD$PRF  YD$YPh  V$r@ K$,  x8u;$   3WWh  h  Vr@ ujjWhp  Vr@ P(r@ _^]3[   U  ES3Ph  Sh@ ]up@ t3-  SSSESPEEP   PSu p@    VW=<r@ EE;EP   t8tMQPwE  YY   5 r@ EPh@ PEPLhd@ PEPh  LSPup@ u^h  |q@ Y;E  t<EPVSSSup@ u'PSh  uMVPh  u  up@ SSSESPEPuu p@ _^up@ jX[  D  $  SUVNW   -   tv-  tMH  j $$  h  h  $(  r@ $$  h  $   $r@   jXv  $$  j h  h  $(  r@ @ $  tPj hr  h  Wr@ h @ D$h@ P r@ 5$r@ D$Ph  Whx@ h  W  $$  @=1t-=8  jj hp  $$  r@ P(r@   $  =r@ 3-@ VVhp  U@    P(r@ VVhk  UP<r@  @ SC  @ \Yth@ SB  YYSB  @  US	  ,  5p@ 5@ BD$@ Y;5$r@ Y  t8 thX@ WU5@   Y=@     hD@ WUh4@ 5@ 5D@ St$ uh @    Y=@     =4@   @ t>h@ WUh@ h  5@ SR  YD$tj P   YYt$`p@ =@  tB=x@  t9h@ WUh@ h  5@ S  YtjVA   YYV`p@ 3_^][   @ tPq@ Yt$8q@ %@  Y@ USV5p@ W}h@ Whl@ Wh`@ WEhL@ WEh<@ WEh,@ WE395@ u3J;tC9ut>9ut99ut49ut/;t+39uh@@ Uuu   U_^[P  @ SUV3Wt$3;t@A=r@ PV  h  S5@ V  VUS5@ t$5@    $h  cD$6D$D$ h@ P r@ D$(P$t  tD$t$D$ 6h@ P r@ D$,Pjj t$US5@ 6h  5@ $r@ vuD$_^][P  Uh  VW= r@ h @ h@ PE  Pq@ 5p@ uuh5p@ E5@ h@ PEPPEPh  p@ t3,h@ P?  uP?  P_^QQSUV3WVV@q@ =q@ q@ x@ @l$PSUq@  PSUh @ $;uhL@ Y   t$W   YD$YW`p@ q@ =q@ @Pq@ q@ @Pq@  Pq@  P9t$   h@ 3>  $@ Uq@ jV5q@ UUq@ j j UD$@D$@D8P|q@ (t7h@ V=  U>t$(jPq@ U$8 V5Vq@ $h@ Yt$q@ D$Y_^][YYUQQSV5p@ W}h@ Whl@ Wh`@ WEhL@ WEh|@ WE3;t;9Et69Et19Et,;t(h@@ UW    uUtU_^[USV5p@ W}h@ Wh@ Wh@ WEh@ WEh@ WEh@ WEh@ WE3E;   9u   9ut|9utw9utr9utm;tih@ Y;t?h@ WUh@ Wt@ U@ p@ j VUP6WU@ |E@ E@ E@ 3jX_^[UV5q@ W3jWWEWPtEPq@ EP r@ jWWEWP_^U  @ E@ =  tE@ VW3MWQWjWW@ WVPp@ ;t5ujWh@ @r@ PDr@ 3  Whx@ V@r@ PDr@  @ =q@ SVuhd@ Phx@ Pq@ @ EPq@ q@ EPEPPh4@ h  Pq@ tq@ P5@ h@@ h(@ 5@ Huh@ 5@ 5p@ 5@ Vh@ P EPEP3Ph  PPPPup@ tj h@ P@r@ PDr@ up@ }uPh@ h@ 5@ h`@ 5p@ 5@ h@ PP9  @PPjj h@ up@ tj h@ P@r@ PDr@ Ph@ Ph@ h@ 5@ Vuht@ Php@ Pq@ Pj5@ E5D@ q@ @uq@ VuVuhD@ PP+9   @4@ PPjj Vup@ tj h@ P@r@ PDr@ PVPh@ h@ 5@ jX[_^U  8  }NV  }  K  }     W39=@ )  @   =@    S$r@ h @ h  u}E@ }h @ P68  h@ P8  VP8  @ ;tQh @ h@ Ptq@ WW@q@ q@ 5q@ @x@ QWPEuPPh@ @r@ PDr@ q@  PWuuPPh@ @r@ PDr@ h  j q@ Pq@ Eh @ EYt<EPjPVy  uPq@ @h@ Ptq@ V`p@ q@ h`@ @Ptq@ YYq@ =q@ @Pq@ 5q@ @Pq@  Pq@  Ph@ uq@ EPh   jPq@ uuq@ 0= Ph  uh@ h  uuq@   [jX_x@ 3;tPVhr  h  ur@ 95@ uP   Ph  u$r@ VVh   u(r@ jX'Ex8ujj hp  ur@ P(r@ 3^ @ u0@ U8SV5p@ W}h@ Wh@ WEhL@ WEh`@ WEh@ WEh@ Wh@ WEh@ WE39M  9M   9M   9M   ;   9M   ;   9M   u;   8   QV,q@ YYuq@ V@h\@ Ptq@ j   hH@ h  5@ $r@ UWuuUjE^PSuq@ u2}G$4  WVSHq@ ~V 
-` UYEUSDq@ EYjjXe_^[U  EVPq@ 5q@ EPEPPh@ h  Pq@ P5@ tq@ @ $^tPq@ YUtSVWjY3}3}udp@ jY3}u   VE0   }EEu5,p@ PE@ Ek   EEP}El   E(@ EEP}Em   E"@ EEP}En   E.@ 3EVE4   EEEEEEPE    uuuE   (p@ _^[   2  SUVW5@ =pp@    D$U @ PS4@ h,@ VD$jPPh`@ 
-  D$5@ UPSh$@ VD$UPh@    5@ jPh@ Sh@ V5@ -lp@ jh@ V5@ 4@ jh@ V5@ x@ j
-h@ Sh@ V5@ jPh @ Sh@ h@ 5@ h  h@ Sh@ Vh`@    P@ YY5D@ p@ @ _^][tPhp@ @ tPPp@ 3   UEVWto}utfva\uNH@0|J3~ntru;@F3@F
-FOO'MjQPq@ <
-uFOEFOF@Ouu& _^]U(  1  SV3W=dp@ VE   E$@ uuh   VEuq@ h   E4p@ EEt@ Pu]q@ fuVhh@ hH@ 5@ Dr@ uh<@ P r@ VV=4r@ PVVjPjPVVVPSVq@ jVq@ Vq@ _^[U`  SVWh  3PSp@ Ph@ Pq@ h@ Pq@ 5tq@ h@ PE@ PWuPh@ uPWu@uq@ jDE^VSP~/  EuE   PEPh@ SVSSSPSf]p@ tC5p@ jujp@ Ph   |p@ Pxp@ u5p@ utp@ u_^[UQQSVWu8q@ 5Pq@ j[PE   Cj]SYY   ' Gj
-W3Y;Yt  EPh  VS5@ p@ tVhx@ u@r@ PDr@ 2Wup@ ;ttVh@ u@r@ PDr@ up@ uq@ Y_^[UQQSVWu8q@ 5Pq@ j[PE   Cj]SYY   ' Gj=W3Y;Ytr  EPh  VS5@ p@ tVhx@ u@r@ PDr@ 2Wu p@ ;ttVh@ u@r@ PDr@ up@ uq@ Y_^[Vj:t$Pq@ YYu^q@ F8~jPq@ YYq@ 	AuVhp@ ^Vj:t$Pq@ YYu^q@ F8~jPq@ YYq@ 	AuVp@ ^  ,  SV5Pq@ Wj[$(  3Y;Yt@j]PD$Y;Yu3y  # CSh@ \$,  YYY  UWWD$$@ |$(\$ @q@ 5q@ q@ x@ @PWUuPPh@ @r@ PDr@ q@  PWUuPPh@ @r@ PDr@ t$p@ t5D$PjSV,=   uq@ h`@ @Ptq@ YYV`p@ q@ =q@ @Pq@ 5q@ @Pq@  Pq@  Ph@ Uq@ D$<Wh   jPq@ WUq@ dT 0|$$ ]tj D$$h@ P@r@ PDr@ t$h@ 4+  YYjX_^[  U  (+  SVW3}}}}}E
-   tWWh@ W<  uh@ v*  YYt	WWh@ h @ vq@ Y;YEu	WWh@ j(|q@ Y;uh@ W  uh   P q@    j(_P_*  Yq@ 8~5jPq@ YYq@ 5	AtN5 P8q@ YMA;MM|E
-(WSq@ YY   uh   P q@ Uu3uq@ $Q@@ juSq@ j$h@ h@ WDr@ P  e } @    @   5q@ j][E0WX)  YY_  E8PEPht@ W;uKh@ P)  YYu"@     h@ j YY  "     PEPhd@ W;u2WYtE   p@ ;      E   PEPhP@ W;tPEPh8@ W;uWYtEePEPh$@ W;uWBPEPh@ W;uW PEPh@ W;uWYEEE;Eyuvhp@ t E/jj h@ @r@ PDr@ jXrvEp@ PYY} t uuuhL@ P r@ uuh(@ P r@ j@h@ Pj Dr@ 3_^[D$0D$0$'  YYVW@@ h  Vj p@ h@ V   YD@ Yuh@ p@ P   h@ h@ h@ 5@ P   tj=@  u"=p@ 8~p@ 00jYY?j\Vpq@ YYt@tjh@ Pp@ uhX@ h4@ j aYYjX_^ UQSV3WVh   jVjh   up@ t+EPWp@ VVVjVWEp@ W=p@ u3VVVjSp@ SEM_^[U  UESVLW}+A+A"43}9PK   >{V4th@ RYY   ;   N;t+V+@ +FMh  +F+~|q@ Y   Ph  p@ tmSj h@ Pp@ tT3PPPvPSj
-EtLvWPq@ u$  |W8q@ MuEp@ jXh@ p@ PYY3_^[T$3;t9B;t2HJJJHHH H$H0H4(  HdHHHD3D$W3;   81   |$8   Vt$;   9~ ~u
-F Y@ ~(9~$uF$ Z@ F(h  jPV ;u^_L$;F}xB0P}|VHx,^_PF(PV$~^__SUl$]VWC,3;u(K   M(jPQU ;C,u
-_^]   [9{ uK   {({$S }K +;r*u{,+K _^]C(    K$3[+K(;L$vL$S({,u+L$+t(u{,+_C(C ^C$]3[{(C ;{(uC(    S$;sS$_^]3[D$8S  X  H  8 uH  ;u   HS0Uk4V0WxL$(HL$ t$|$T$|$<L$,D$4      $ Y@ Cu     s'  O|$FT$t$rCtF  u>3UUU>!  CjL$4D$4D$5SQR!!  Cl$   /  C       %   3      D$tD$LT$@|@   KD$;vL$LT$A|@   3UUUt  T$XCB0D$	l$  T$L$LA|@ f  s)  O|$FT$t$rStL$LA|@    tD$L@d|@   t!T$$jL$(T$)SQR  C3l$    s/  OF rCt3T$$L$%jL$(D$*T$+SQR`  C3l$   
-s(I   O|$Ft$rCt!T$$jL$(T$)SQR  C3l$   Ct\s#X  O|$Ft$rCS8t!T$$jL$(T$)SQR  C3l$   KtVC8;D$vD$t6tD$KPVQK  T$CD$(K8++|$t$K8C8     Ct`  3    0@L$0t;rK D$tCRVP  T$CD$(+D$0|$t$7     CtZ!  30@L$0t;rK D$tSQVRn  T$CD$(+D$0|$t$     CtTs,I   O|$FT$t$rK  ;tD$L@P|@   3l$j j j   L$XT$CA0      s'9  O|$F T$t$r   3d$L$L3CA0l$
-   C  j j j 5  T$XCB0T$   |$P  Ct+   T$)  s#~  O|$Ft$rMKws$tY@    T$  CD`r@ CL	   CH`z@ CP      T$     T$  D$L@<|@    T$j  + T$s*I   O|$F T$t$r%  ;tD$L@|@   3C8l$   K8L$  ;vL$D$ ;vL$.  t$|$(D$t$L$|$ +t$t$(L$K8++|$ |$t$(t$K8u
-  s#
-  O|$Ft$r  KX@C\CX=  KTT$   {\   C`       K`;KTsYs'd$ ?
-  O|$Ft$rC`Ez@ 3T$fLChK`AK`;KTrK`   ;s3S`Uz@ fLShS`B;S`r(  KdCD  RCLPQ    jChPj H  T$(D$4t L$LA |@ 	  D$L@{@ 	  C`       KXC\9C`6  KL   KDH#;L$@v<,	  KLO   KDF|$H#;t$L$@wD$@f= sR;L$s&  L$OF;|$t$rfD$B+K`fDKhC`@T$C`H  uhA;L$s+  L$OFA;|$t$rC`+T$  LCfL$0   f= D$uL;s-d$   O|$D$F;t$rL$F;s)  O|$D$F;t$rL$+D$0    {\K`{X;T$w@tL$0{`fL{h{`GH{`u|$KXC\9C`"L$LA{@ T$L|$B{@    (  KdCD  RCLPQ 	   CXPKhQj  D$4tT$LB{@ T$f  CdKdCH  RSXCPPQK\    QDShPjI  T$(D$4tL$LA{@      re|$   r[D$LL$(HL$ H0xS0T$,RPk4}  D$TPH0xC0k4T$(L$(t$|$D$  KL   H#CD;D$@v<  KLO   KDF|$H#;t$D$@w      L$3D$0L$   L$H#L$@CDL$0D$@;L$vXN  3L$0OD$F|$   L$t$H#L$2KDL$D$@;wD$@++L$@T$K8u   m   t   ^  @tD$L@p{@ D  C@   C@tE;s%  O|$C@F;t$rK@   K8H#K8K@+   KP   H#CH;D$@vC$      KPO   KHF|$H#;t$D$@w   L$3D$0L$   L$H#L$@CHL$0D$@;L$vX  3L$0OD$F|$   L$t$H#L$2KHL$D$@;wD$@++@T$tL$LAX{@   L$@K<C@   C@tI;s%  O|$C@F;t$rK@   K<H#K<K@+T$D$ K$+L$,9K<vD$L@8{@ "     D$ x  L$,+C<;v<+K(;D$v+K,K D$+K,+K(D$L$0K8;L$8vL$(+C8L$0D$8D$L$ ;vD$+L$ L$8+D$(K8L$0	L$0@AL$0L$uD$(C8n     c  D$   D$(K8@D$(L$    :  C    s,I   O|$F T$t$rD$,+D$ L$LAKD$,Kt8CSL$(D$,Pt+QR  	+QR  L$XT$CA0D$ D$,Cu%   3l$;CtD$L@ {@ `3l$   C   C    s'   O|$F T$t$r;StSL$LA{@    4_^][8D$LL$(HL$ x0_H^k4]S0   [83l$   D$4   D$4D$LL$(HL$ H0xC S0k4u;}5D$LT$,;Pt(L$LD$,Qt   _^][8t$LVNl$<|$,F+V+FVKCKt5t1CWtVC+RP  NS+QR
-  CF0C3@I   C4F,ut|$PuD$4_^][8D$4_^][8[8E@ 	G@ G@ H@ jH@ H@ 8I@ I@ J@ J@ J@ "K@ -K@ L@ zL@  M@ M@ tN@ \Q@ 7S@ S@ T@ SU@ V@ ;V@ W@ W@ W@ (X@ K@ K@ K@ K@ Vt$t8Ft1N$t*@,t
-PF(PNV(QRV$F    3^^D$D$P|q@ D$Pq@ Y<SUVWD$PH\$TJLhL$0p@+N0D$4E$L$DM D$HE,]4L$(M(D$,EHL$MDD$$L$ ML   MP}0HD$8   l$T$HD$<s BBBBT$L$8D$ #D$+tBuM@     L$TD$TL$H#L$ D$+uD$F  L$L$Tt6;sjBT$   L$TM#l$L$T+s BBBBT$L$<D$$#D$+u>@3     L$@D$@L$H#L$$D$+tL$;L$s(jBT$;sjBT$   +M#l$L$D+;l$  +;l$Hn  L$,D$Iu*D$(+D$T;   +D$Td$ AAFMus;sS+D$(+l$D$T;sc+D$T    AAFMuL$,D$l$TI;s<+l$TD$@AAFMu+D$T;s+D$TAAFMuD$+D$Tv7PEAAFQAFT$TAAFMT$TuT$D$Tt^AAF|$TvPIFH+$    H@FH@FH@FL$TL$TwtH@F|$Tv@Fl$;T$0sQ;t$4EL$PD$A8{@     ,L$PAX{@  t	E    D$P@p{@ E        ++   L$PH#BFAD$0+AD$4+  A}0_^]4][<x3D$8D$<D$@D$DS$   D$LU$   D$TD$XD$\v$    CfDL@LL@@;r$   	   L$D$f|D@ uHs;D$vD$u	][xV   f|tD u:f|tF u"f|tH uf|tJ uf|tL uvF;st$       LDD+x/@vW$   ~'tD$H+t_^][x^][xfD$j     fThfTHfLJffTjfLlr3v3    f<C t!CLTh$   fJCfDThTTh@;r t;HtD$4 ~@ D$0`~@ T$,9}@ -  D$4}@ -  D$,   $   D$4D$,   D$0$   L$ L$   T$<33Pt$D$8D$(T$@u=  o  $   D$$$    L$t$$fT$,*L$;}D$ fD$-~T$0T$4fL$fD$D$`fD$  L$T$8+   L$ 4    |$++9uT$J   t
-d$ utH#3t$$fLTHf|TH t$$u;T$   $   AT$;T$	t$@D$<#;t$Du\$D$ L$8|$L$+T$    ;s tTH>+~|$AB;rt$DT$(   D$8$   T$(u=     $   D$DL$ +T$<fLG$   *D$@D$fD$  t]t$ d$ t L$@D$<#;tD$73D$D$L$J   tutH#uT$(    T$$   _^]3[x_^]   [xVt$W|$  u_   ^S\$   U  r  +       .nnnnnnnnn	n
-nnnnnJwtI FHu3    3][_^QSVt&I t33   ~@ 3ANu UW  3,@ @ 3D$,~@ Y3%   3@ 3,@ @ 3T$,~@ Y3   3@ 3,@ @ 3D$,~@ Y3%   3@ 3,@ @ 3T$,~@ Y   3,@ 33@ D$3@ ,~@ 3%   3@ 3,@ @ 3,~@ Y3T$   3@ 3,@ @ 3D$,~@ Y%   3,@ 33,@ @ 3,~@ T$   @ 33 OrH3,@ D$|$<@ 3,~@ %   33<@ Ju_]t"    33   ~@ 3ANu^[YL$u3T$D$%Tq@ %Xq@ %`q@ %dq@ %hq@ %lq@ Q=   L$r   -   =   s+@PUjh@ h@i@ d    Pd%    hSVWe3]j$q@ Y@  @  q@ 0@ <q@ ,@ q@  $@   9 @ uh<i@ q@ Y   h@ h@    (@ EEP5$@ EPEPEPq@ h@ h @    $p@ 0u>"u:Fu:t<"u>"uFu:t< v]EPp@ EtE> vFuj
-XPVSSdp@ PrEPp@ E	MPQ   YYeup@ %p@ %q@ h   h      YY3%(q@ %0q@                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 b  R  @        .            *                t  d  T      \  h  z                  *  >  P  f  z      d  x  F                  T      $  6      X  P  B  :                  b  r  ~          F          (  4  >                              
-      &  0  :  B  J  R  Z  d  n  v                        6  $                        t  ^  R  F  4  $                                  `   P   s   p  0  	 
-  `     	       @  	   X    	 ;  x  8  	   h  (  	      H  	   T    +  t  4  	   d  $  	      D  	   \    	 S  |  <  	   l  ,  	      L  	   R    #  r  2  	   b  "  	      B  	   Z    	 C  z  :  	   j  *  	  
-    J  	   V   @  3  v  6  	   f  &  	      F  	 	  ^    	 c  ~  >  	   n  .  	      N  	 `   Q      q  1  	 
-  a  !  	      A  	   Y    	 ;  y  9  	   i  )  	  	    I  	   U   +  u  5  	   e  %  	      E  	   ]    	 S  }  =  	   m  -  	      M  	   S    #  s  3  	   c  #  	      C  	   [    	 C  {  ;  	   k  +  	      K  	   W   @  3  w  7  	   g  '  	      G  	 	  _    	 c    ?  	   o  /  	      O  	 `   P   s   p  0  	 
-  `     	       @  	   X    	 ;  x  8  	   h  (  	      H  	   T    +  t  4  	   d  $  	      D  	   \    	 S  |  <  	   l  ,  	      L  	   R    #  r  2  	   b  "  	      B  	   Z    	 C  z  :  	   j  *  	  
-    J  	   V   @  3  v  6  	   f  &  	      F  	 	  ^    	 c  ~  >  	   n  .  	      N  	 `   Q      q  1  	 
-  a  !  	      A  	   Y    	 ;  y  9  	   i  )  	  	    I  	   U   +  u  5  	   e  %  	      E  	   ]    	 S  }  =  	   m  -  	      M  	   S    #  s  3  	   c  #  	      C  	   [    	 C  {  ;  	   k  +  	      K  	   W   @  3  w  7  	   g  '  	      G  	 	  _    	 c    ?  	   o  /  	      O  	    A @ !  	  @     a ` 1 0  @         	  
-             incorrect length check  incorrect data check    invalid distance too far back   invalid distance code   invalid literal/length code invalid distances set   invalid literal/lengths set invalid bit length repeat   too many length or distance symbols invalid code lengths set    invalid stored block lengths    invalid block type  header crc mismatch unknown header flags set    incorrect header check  invalid window size unknown compression method  `}@ T}@ S}@ H}@ 8}@ ,}@ }@ }@ |@ S}@ incompatible version    buffer error    insufficient memory data error  stream error    file error  stream end  need dictionary  inflate 1.2.1 Copyright 1995-2003 Mark Adler         	 
-         # + 3 ; C S c s                                        L B         	    ! 1 A a    0@`                                  @ @     0w,aQ	mjp5cd2y+L	|~-d jHqA}mQVlkdzbeO\lcc= n;^iLA`rqg<GKk
-5lB@l2u\EY=0&: QQa!#V(_$|o/LhXa=-fAvq *q3x4 	j-=mld\cQkkbal0eN bl{WeP|bI-|eLXaMQ:t 0AJ=mjiCn4Fg`s-D3_L
-|<qPA' %hWo 	fa^)"=Y.;\l t9Gw&sc;d>jmZjz	' 
-}Dhi]Wbgeq6lknv+ZzJgoC`~8ROggW?K6H+L
-J6`zA`Ugn1yiFafo%6hRwG"/&U;(Z+j\1,[d&cju
-m	?6grW Jz+{8|!Bhn[&wowGZpj;f\eibkaElx
-TN9a&g`MGiIwn>JjZf@;7SG00S$6)WTg#.zfJah]+o*7Z-    A1b62S-+ldEw}ZVAOIOM~-QJ#SpxAaU.7Y -6]]wll?AZ$ Faw$e]]FD(koipvk19Z* ,	m86F]qTp0ek*1u4y%8<ysHj}A<*XOyD~b-OT@#88L!
-	 \H1EbnSwT]l?P\brykT@OYX#p8$A#=keZ|%	Wd8N!3`*$?-l	$HS)F~hwey?/H$6t	5*SKHRpey1~`|=6xT9eK;
-"	O]_lF?mtCZ#AplAwG6- Aq[ZhwClZO-_~6-' > S1bSWk1**ykHpo].*F6fcTT"eMg0&):{kZ>	8$,52F*sw1pHkQ6Fzw]cNJ#pAF]#l8?1(BOgT~yUbL8^# TZ1ObbSyOIV~P-{b-R4~^eGnHl/Su6:	#jT$+e?yHf'*b#?&~?$pi;FBzw[keZ~7	Sv8H	3?r$    7jnYF	|OQ;Ud	S
--
-=G\p&Gw)`/ai5&LsZ<#0zMzFM8,9;:<D?>R:<eP=X^6o}7654W10k23k$%1'[-&LMb#{'"" $!(x*+F`)q
->(q-v,.7/pXqYs3r%w+OQvrtEux~OK}!b|tyBxz{.lD~m8onlk[wjR1h58ib?mcf+aQ`edd"fig HINSKyuJcO	NZLMFGN@E$DD2AsX@*IBCPhTg3U>uW	VS:R|P~Q9ZS [fYX4])\ZEo^m/_5qs\<k2gz8J& Va`/6\ilU,zBu\H &=WFA	+O`]xW79>q!K7kf-b3jp]$^'~*I@VW<M{tDCm-@wm.B+(>Td"~8y$owJ1}05_K^iBI#dXTcQ:r fn|xK)o%/3vUuA?)C:|s@;bIUeh"_HS1^Z4    eg	Wb27_k%8(O}doJj3wVcXWP0qB{gCru&op-?'Bs Gz>2[g;
- i8P/_Y=e:ZO?(3wwXR@hQ+H*0"ZOWoI}@mN5+#*'G| AH=XX?#1jv`p^Y<L~i/{kHwhs)aLoD~Pf7VM'(@g9x+n&;f?/X)T`D1M.FgTp'Hq/L0UEc?kh6ry7]P\@TN%s7@'>$!AxU\3;Y^U~PGl!;b	F2p(Q_V:1X:	n3m:@/)IJNv"2x+ Kx.HfAj^y9*O]#kM`~b_R	7zF h!1Vc0a"j6nS	Nr){t*F8#vufz`rs"WG9^EMvc&DAdQy/4A&SEbiLQ<6'5P..T&q]w4.6IE? v\[YI>U!lDa>7~8A]&nv|oY
-yKiw\9~$66nQfq>,o,I	{I.H>C-YngQztaf    w0a,	Qmpjc5d2y	L+~|-dj qHA}mQlVdkbze\Ocl=c;n Li^`Agqr<KG
-k5Bl@2lE\u=Y&0Q :Qa!V#(_$/o|XhLaf-=vAq *q3x 4	jm=-dlc\kkQlabe0b Nl{WeP|b-I|LeMaX:Q t0JA=mCij4ngF`D-s3
-L_|Pq<'A Wh% of	a^)"Y=.\;l tG9w&scd;mj>zjZ	
- '}DhibW]egl6qnkv+zZgJoC`~8ORgWg?H6K+
-L6JAz``gU1nFiyaf%oRh6wG"U&/;(+Z\j1,[dc&ujm
-	6?rg WJz{+8|!Bhn&[owGwZjpf;\ebiaklE
-xNT9g&a`IiGM>nwjJZ@f7;SG0S0$6TW)#gfz.aJ]h*o+7Z-    1A26b+-Sdl}wEVZOAIO~M-JQS#xpaA.U7Y -6w]]llA?Z$F wa$e]]DFok(vpi91k *Z	,8mF6]pTqke0*1u4%y<8syjHA}X*<yOb~DO-T@#88!L
-\ 	E1HnbwS]Tl?Prb\ky@TYOX#$8p=#Aek|ZW	%N8d3!*`$?-	lH$S~F)ewh/?y6$H	t*5KSRHyep`~1|=6Txe9;K"
-	_]OFlm?tZCA#lpwA6G- qAhZ[CwZl-O6~_'->  1SbSW1k**kypH]oF*.f6TTcMe"0g)&:{kZ	>8,$5*F21wsHpQkzF6c]wNJ#pA#]F8l1?(gOB~TUyLb8#^T O1ZbbySIOP~V{-b-4R^~GelHnuS/:6#	$Tj?e+yHf*'b#&??~p$iBF;[wzek~ZS	7H8v	?3$r    j7nFY	|OQ;U	dS
--
-\G=&pGw`)/ai5&sL<Z0#zzM8MF9,;:?D<><:R=Pe6^X7}o5641W02k3$k%'1&-[#bML"'{ "!$*x(+)`F(>
-q-q,v./7pqXsYr3w%vQO+truE~xKO}|b!ytxBz{l.m~Do8nkljw[h1Ri85bcm?a+f`Qeddf"giH IKSNJuyOcN	LZMFGE@ND$A2D@XsBI*CThPU3gWu>V	SR:P|Q~Z9[ SYfX]4\)^oEZ_/m5qs<\kg2z&J8 V`a/6i\lU,zB\u H=&FW	A+Ox]`7W>9q!7Kkf-b3pj$]^'*~@IWV<M{DtmC-@mw+B.(>dT"~8yo$w1J}50K_^iBI#dXTQc:r fnx|)Ko%3/uUv?A):C|s@;IbeU"hH_S1Z^4    ge	bW72%k_8(}OodJjw3XcVPW0Bq{gurCo&p-?'sB zG2>[
-;g /P8i_Y=e:OZw3(?RXw@Qh+HZ"0*WOIo@}m5N#+'*GA |HX=#?X1vj`^pYL<i~{/wHksha)LDofP~V7'M@(9g+xn;&f/?)XD`T1MF.Tg'pqHL/0cEUk?6hyr]7\PNT@%s7@>'!$UxA3\Y;U^GP~b;!lF	2p(QV_:X1:	3n:m@I)/NJ2"v+x xKH.jAf^O*9y]#Mk~`b_	Rz7h F!10cV"ajn6	SrN){t*8Fv#fu`zrsW"G9E^vMcD&dA/yQA4S&EbLi<Q'65..P&T]q4w6.I?E v[\IYU>l!>aD~7A8n&]|vYo
-Kyiw\~9$66Qnf>q,o,I	I{.C>HnY-Qgtzfa           F           F            Fh@ i@             Lr            F  (p              Xp  \          H  q              4p  |          t   p  `          .  p                      b  R  @        .            *                t  d  T      \  h  z                  *  >  P  f  z      d  x  F                  T      $  6      X  P  B  :                  b  r  ~          F          (  4  >                              
-      &  0  :  B  J  R  Z  d  n  v                        6  $                        t  ^  R  F  4  $                              S CoUninitialize   CoCreateInstance  - CoInitialize  ole32.dll I PropertySheetA   CreatePropertySheetPageA  COMCTL32.dll  qSetLastError  - CreateDirectoryA  GetFileAttributesA  MapViewOfFile 5 CreateFileMappingA   CloseHandle lSetFileTime _ DosDateTimeToFileTime GetLastError  4 CreateFileA UnmapViewOfFile lstrlenA  >GetProcAddress  LoadLibraryA  MultiByteToWideChar LocalFree  FormatMessageA   FreeLibrary &GetModuleHandleA  W DeleteFileA 4GetPrivateProfileIntA :GetPrivateProfileStringA  ,ResumeThread  wSetPriorityClass   GetCurrentProcess  GetCurrentThread  SetThreadPriority D CreateProcessA  $GetModuleFileNameA  'RemoveDirectoryA  GetFileSize cGetTempFileNameA  eGetTempPathA  KERNEL32.dll  MessageBoxA GetFocus  SendMessageA   EndPaint  FGetSystemMetrics   BeginPaint   DefWindowProcA  PostMessageA  ,SetDlgItemTextA wsprintfA 5GetParent SendDlgItemMessageA ReleaseDC  GetDC MoveWindow  \GetWindowRect GetDlgItem   DispatchMessageA  TranslateMessage  PeekMessageA  &SetCursor LoadCursorA UpdateWindow  jShowWindow  Y CreateWindowExA RegisterClassA  USER32.dll  S DeleteObject  SetTextColor  TextOutA  SetBkMode SelectObject  6 CreateFontA 0 CreateDIBitmap  M CreateSolidBrush  GDI32.dll [RegCloseKey rRegOpenKeyExA {RegQueryValueExA  gRegEnumKeyExA zRegQueryValueA  RegSetValueExA  _RegCreateKeyExA bRegDeleteKeyA dRegDeleteValueA ADVAPI32.dll  strchr  memcpy  memset  strncat strcat  strlen  strcpy  strcmp  strrchr Xfprintf _vsnprintf  malloc  _snprintf strncpy ^free  sscanf  _putenv remove  ]fread dftell bfseek Wfopen Lfclose  Offlush  _iob  _freopen ffwrite  strftime  localtime time  sprintf  _fstat  strtol  _pctype _isctype  a __mb_cur_max  qsort realloc Rfgets strncmp c __p___argv  b __p___argc  MSVCRT.dll   _exit H _XcptFilter Iexit   _acmdln X __getmainargs _initterm  __setusermatherr   _adjust_fdiv  j __p__commode  o __p__fmode   __set_app_type   _except_handler3   _controlfp  PGetStartupInfoA _strnicmp _strcmpi  _strdup _tempnam   _close  _read _open                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   CreateDirectory (%s)    MapViewOfFile (%s)  CreateFileMapping (%s)  CreateFile (%s) inflateEnd returns %d   inflate returns %d  inflateInit2 returns %d 1.2.1   \           @  @ @  @ @  @ @ @ @  @         @ l@ @ l@ @  @ @ @ @  @            T@    D@    4@    @    @    @    @    @    @    @ @ @        x@ 	@        h@  @        X@ @        D@ @        8@ @        Software\Microsoft\Windows\CurrentVersion\Uninstall Software\Microsoft\Windows\CurrentVersion\Uninstall message_box directory_created   file_created    get_root_hkey   get_special_folder_path create_shortcut CSIDL_FONTS CSIDL_PROGRAMS  CSIDL_COMMON_PROGRAMS   CSIDL_STARTUP   CSIDL_COMMON_STARTUP    CSIDL_DESKTOPDIRECTORY  CSIDL_COMMON_DESKTOPDIRECTORY   CSIDL_APPDATA   CSIDL_STARTMENU CSIDL_COMMON_STARTMENU  Lib\site-packages\  DATA    Scripts\    SCRIPTS HEADERS PLATLIB PURELIB s   no such folder (%s) unknown CSIDL (%s)  function not available  SHGetSpecialFolderPathA shell32.dll Failed to create shortcut '%s' - error 0x%x SetWorkingDirectory() error 0x%x    SetIconLocation() error 0x%x    SetArguments() error 0x%x   SetDescription() failed, error 0x%x SetPath() failed, error 0x%x    QueryInterface(IPersistFile) error 0x%x CoCreateInstance failed, error 0x%x sss|sssi    CoInitialize failed, error 0x%x i   ssi l   100 Made Dir: %s
-   .py 200 File Copy: %s
-  Error   200 File Overwrite: %s
- Runtime Error   Times Roman This Wizard will install %s on your computer. Click Next to continue or Cancel to exit the Setup Wizard.    Don't know Python's installation type   Strange python%d%d.dll  Python Version %d.%d    Cannot install  No Python installation found in the registry.   Python version %s required, which was not found in the registry.    Python %s is required for this package. Select installation to use: Software\Python\PythonCore\%s\InstallPath   Python Version %s (found in registry)   Software\Python\PythonCore  Compiling files to .pyo...  Loading python...   Compiling files to .pyc...  Failed to unzip installation files  Installing files... Running pre-installation script Ready to install    Click Next to begin the installation of %s. If you want to review or change any of your  installation settings, click Back. Click Cancel to exit the wizard.    Py_OptimizeFlag PySys_GetObject PyRun_SimpleString  Py_Finalize Py_SetProgramName   Py_Initialize   %s%c    import py_compile; py_compile.compile (r'%s')   SOFTWARE\Python\PythonCore\%d.%d\InstallPath    PYTHONHOME=%s   Out of memory!  rb  Running the pre-installation script failed
-    Can't load Python for pre-install script    a   PyErr_Print OSError ValueError  __builtin__ PyErr_Format    PyArg_ParseTuple    Py_BuildValue   PyCFunction_New PyObject_GetAttrString  PyObject_SetAttrString  PyImport_ImportModule   UninstallString "%s\Remove%s.exe" -u "%s\%s-wininst.log"    wb  %s\Remove%s.exe 040 Reg DB Value: [%s\%s]%s=%s
- Could not set key value DisplayName Python %d.%d %s 020 Reg DB Key: [%s]%s
- Could not create key    %s-py%d.%d  999 Root Key: %s
-   Source: %s
- *** Installation started %Y/%m/%d %H:%M ***
-    %s\%s-wininst.log   Could not open key  You do not seem to have sufficient access rights
-on this machine to install this software   HKEY_CURRENT_USER   HKEY_LOCAL_MACHINE  Postinstall script finished.
-Click the Finish button to exit the Setup wizard.  *** Could not load Python ***   *** run_installscript: internal error 0x%X ***
- freopen stdout  freopen stderr  300 Run Script: [%s]%s
- \Scripts\   -install    Please wait while running postinstall script... Installation failed.    Running Script...   Could not open postinstall-script %s
-   PySys_SetArgv   *** Installation finished %Y/%m/%d %H:%M ***
-   install_script  metadata    name    target_version  target_optimize target_compile  build_info  info    title   Setup   Setup %s    Could not register window class Setup.exe   SetupWindowClass    if exist "%s" goto Repeat
-  del "%s"
-   :Repeat
-    w   %s.bat  Could not delete key    Could not delete value  uninstall-script    -remove Uninstall Finished! %d files and %d directories removed %d files and %d directories removed
-%d files or directories could not be removed    You do not seem to have sufficient access rights
-on this machine to uninstall this software %d Run Script: %s   %d Reg DB Value: %s %d Reg DB Key: %s   %d File Overwrite: %s   %d File Copy: %s    %d Made Dir: %s %d Root Key: %s Are you sure you want to remove
-this package from your computer?    Please confirm  Out of memory   could not open logfile  r   2. arg is not -u    -u  Wrong number of args    Setup program invalid or damaged    This program is normally started by windows Remove  Could not open archive  Could not create temporary file ~du Invalid cfgdata magic number (see bdist_wininst.py)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            8                 n   h                 k     l     m     n                                          	                    	                    	                   	     0  
-          8                          Z          @            (   n   ,         	                        BBB 999 111 )))      c               R[RABZRYRZRAB[R[RAB[RAAB[  &    & &  &   & @JQ1AA1ZQ1111ZQ1AAZ@JQ1AAZQ1AAJ  eu eu  @ABZ@J@G@F@F@G@AABX@J@AABX@J@J             @AA1X@J@G@HRX@G@AAG@ZRX@AAG@JQJ ed%ed %ed  @AA1ZQ1AA1X@J@HQ1AA1X@1A1ZQ1AA1ZQ1A1J        & &        RAABZRABZR[R[RABZRYRBZRABZRBW@J  @J  & R[R[R[R[R[RABZR[R[R[  & & & & &   & & @J@J@J@J@HQ1AA1X@J@J  @J@J@J@J@G@J@G@JQJ   @ABZQ11Z@J@AAG@J@G@GQ1J         @AA1ZQ1YQ1[@J@AAG@J@G@1W@J &  @I@G@J@J@J@J@G@J@G@Z@J  @AA1X@J@HRABX@J@HQ1AA1X@J@J      &      %& &   & & RAABZR[RZRAAABZR[R[RABZR[R[                @ H     {     S e t u p       M S   S a n s   S e r i f              P} 
-      T h i s   W i z a r d   w i l l   i n s t a l l   % s   o n   y o u r   c o m p u t e r .   C l i c k   N e x t   t o   c o n t i n u e   o r   C a n c e l   t o   e x i t   t h e   S e t u p   W i z a r d .             P}                   P  h     n               P}                     @ H     {     S e t u p       M S   S a n s   S e r i f              P} 
-      S e l e c t   p y t h o n   i n s t a l l a t i o n   t o   u s e :             P                     P}  7   P y t h o n   D i r e c t o r y :               P}   j                P  h     n             P                     P}  B   I n s t a l l a t i o n   D i r e c t o r y :                 @B 2     F i n d   o t h e r   . . .                  @ H     {     S e t u p       M S   S a n s   S e r i f              P} 
-      C l i c k   N e x t   t o   b e g i n   t h e   i n s t a l l a t i o n .   I f   y o u   w a n t   t o   r e v i e w   o r   c h a n g e   a n y   o f   y o u r   i n s t a l l a t i o n   s e t t i n g s ,   c l i c k   B a c k .   C l i c k   C a n c e l   t o   e x i t   t h e   W i z a r d .                 P}      m s c t l s _ p r o g r e s s 3 2   P r o g r e s s 1                P}       I n s t a l l a t i o n   p r o g r e s s :             P  h     n                  @ H     {     S e t u p       M S   S a n s   S e r i f              P} 
-      C l i c k   t h e   F i n i s h   b u t t o n   t o   e x i t   t h e   S e t u p   w i z a r d .               P  h     n             P} (                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
\ No newline at end of file
diff -Naur Python-2.5-base/Lib/distutils/command/wininst-7.1.exe Python-2.5/Lib/distutils/command/wininst-7.1.exe
--- Python-2.5-base/Lib/distutils/command/wininst-7.1.exe	2005-02-03 12:48:26.000000000 -0800
+++ Python-2.5/Lib/distutils/command/wininst-7.1.exe	1969-12-31 16:00:00.000000000 -0800
@@ -1,97 +0,0 @@
-MZ                @                                       	!L!This program cannot be run in DOS mode.
-$       mLj)"9)"9)"9:K9."9,9+"9,B9("9,-9+"9}9("9>9("9:9+"99!"9;9*"9)#9"9,}98"9(9+"9|9("9,x9("9Rich)"9                        PE  L B         
- `         g      p    @                                                             $        X                                                                           p  t                          .text   [      `                    `.rdata  :   p   @   p              @  @.data   H*                        @  .rsrc   X                        @  @                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        SUVt$Wt}l$|$> tpj\VXq@ YYt_& Wp@ u'j Wp@ utWh@ jWjYYuh   p@ tWh@ j\FujX_^][USVW=p@ 3   9uuE   Vh   uVVSuE   p@ uu uu  Pt	Pp@ /9u    ujU YYt.Vh   jVVSuEu%9u    uhT@    ujU YY   9u t
-ujU YYEPuup@ }EPEPEPWp@ 9uu	Wp@ \VuVjVWp@ W=p@ u9u t8uh<@ &VVVjSp@ SEE;u9u tuh(@ jU 3_^[U8}S]VW   j8Ej PMU  EjEE@^EEEj8h@ EjP]0  }tt*Ph@ EjP2  Y;YttPh|@ j3EPG  Yt.tPhd@ j339uuuuST  j^Sp@ _^[U(  EUSVL\W]+C+;PK}k  e f{
- `  	MU}D*4>PK:  ?PK.  .uMVMN VUOUWEUDEPS  PS  \th@ PS  YYPp@ e EE8 t>EEE0S  PEu0,q@    EEEE8 uGPuPdq@ P@  P/S  \YYtJufFPfFPvuPj t"uOvvQuPh   } tE@PC
-PujUC
-E9EM   EM4R  sEPR  _EM+MPiR  \t*PPR  /Yth@ P.R  YYE\t/u@KSPPdq@ ]3jX_^[D$tt/u \@uUEPh@ u@ u]ujs  h0@ @ ]UEPh@ u@ u]uj;  h0@ @ ]U  =$@  VWu h@ p@ t3h@ Pp@ $@ EPh@ u@ tY=$@  uh@ 5,@ @ YY;3$@ u60q@ YYt)Gt@ |uh@ 5@ @ 3_^ @ j PPj $@ tPh@ @ YYuh@ 5,@ U,  V3Vuuuuuulr@ ;}PhD@   EPEPEPEPEPEPEPh8@ u@ $F  EPh@ jVh@ dr@ ;}Ph@    EURh@ P;}Ph@    EuPQP;}Ph@ pEuPQ;}Ph@ X9utEuPQ,;}Ph@ ;9utuEuPQD;}Phl@ 9ut'EuPQ$;}PhH@ 5,@ @ Gh  PjuVVp@ EjRPQ;}<Puh@ 5,@ @ E;tPQE;tPQhr@ 3$EPQEPQhr@ h0@ @ Y^UQQEPEPEPhh@ u@ uuuuq@ P0r@ Phd@ @ YY5@ hl@ @ YYU   EP uh   Pq@ EH   HH   HtuHt[HtH   $@    uh@ EV5 r@ W}Pj h  5@ uWh  5@ _^    Pp@ P   YYj0 h@ Pq@ P0r@ b$@ tuh@ P|q@ j.uxq@ YYt6h@ POM  YYu%u"   $@ tuhp@ P|q@ jXVjq@ t$4q@ ,@ YFY5,@ ^U   3V9E   t5PMPQVuPh   p@ V uPq@ up@   Pp@ u+ VPq@  jh@ P5 @ 0r@ 3^U@}tuuuuPr@    SVEWPuTr@ j]Xr@ j
-Y3h@ QQQQQQQjh  QQQPDp@ =@p@ PSjSE<p@ @ VK  YPVjjS8p@ h uPp@ VK  YPVj
-j
-uuuP4p@ EPu\r@ _^3[ U   K  }N   }     VW}W   8@ YtPj hr  h  W<r@ W@r@ P   $@@  h@ PDr@ 5Hr@  Ph  Wh @ h  Wh@ h   W_3^'Ex8ujj hp  u@r@ PLr@ 3 =0@  tB=8@  u9Vt$4r@ 0@ j P
-HQRjQVHp@ V8@ t$8r@ ^UVEWPu,r@ 5Xr@ j jUEj ++ERU+UR+PE+E+Puq@ _^UQEVPjj h@ h  p@ u	u p@ 3^@ V  ;t@=  uu05@ ^jhl@ hD@ t$0r@ @ ^|$~@ u|$@ }@   ^I  $  SUVNW  $   -<r@ -   t+H!  $(    f;  H    8@ tPj hr  h  V@   Sh  WV(r@ P  Sh  WV(r@ P  j j h  WVD$ttHj Ph  WVt4=@  t+S$   h @ PDr@ $  Ph  VHr@ |$ uCt)=@  t S$   h@ PDr@ $  @ jh@ PV0r@ @r@ jj hp  VPLr@ j j h  WVD$uNjj hp  VPLr@ Hr@ 0@ Wh  VWh  VWh @ G  Wh @ G    jj hp  VPLr@ j t$h  WV   @ PS@ HG  YYSh  VHr@ j t$h  WV@Pq@ YD$tZPt$h  WVh@ h$@ h@ t$q@ u5@ 5$@ ht@ h @ Dr@ t$q@ h0@ h @ F  YY5@ 5$@ $D$ SPF  D$(PF  |\tD$h@ PaF  YYwD$PRF  YD$YPh  VHr@ K$,  x8u;$   3WWh  h  V<r@ ujjWhp  V@r@ PLr@ _^]3[   U  ES3Ph  Sh@ ]up@ t3-  SSSESPEEP   PSup@    VW= r@ EE;EP   t8tMQPwE  YY   5Dr@ EPh@ PEPLhd@ PEPh  LSPup@ u^h  q@ Y;E  t<EPVSSSup@ u'PSh  uMVPh  u  u p@ SSSESPEPuup@ _^u p@ jX[  D  $  SUVNW   -   tv-  tMH  j $$  h  h  $(  <r@ $$  h  $   Hr@   jXv  $$  j h  h  $(  <r@ 8@ $  tPj hr  h  W<r@ h@@ D$h@ PDr@ 5Hr@ D$Ph  Whx@ h  W  $$  @=1t-=8  jj hp  $$  @r@ PLr@   $  =@r@ 3-@ VVhp  U4@    PLr@ VVhk  UP r@  @ SC  @ \Yth@ SB  YYSB  @  US	  ,  5@ 5$@ BD$@ Y;5Hr@ Y  t8 thX@ WU5@   Y=4@     hD@ WUh4@ 5 @ 5d@ St$ uh @    Y=4@     =D@   @ t>h@ WUh@ h  5@ SR  YD$tj P   YYt$p@ =4@  tB=@  t9h@ WUh@ h  5@ S  YtjVA   YYVp@ 3_^][   (@ tPq@ Yt$4q@ %4@  Y(@ USV5p@ W}h@ Whl@ Wh`@ WEhL@ WEh<@ WEh,@ WE395,@ u3J;tC9ut>9ut99ut49ut/;t+39uh`@ Uuu   U_^[P  ,@ SUV3Wt$3;t@A=<r@ PV  h  S5@ V  VUS5@ t$5,@    $h  cD$6D$D$ h@ PDr@ D$(P$t  tD$t$D$ 6h@ PDr@ D$,Pjj t$US5@ 6h  5@ Hr@ vuD$_^][P  Uh  VW=Dr@ h @ h@ PE  Pq@ 5p@ uuh5@ E5$@ h@ PEPPEPh  p@ t3,h@ P?  uP?  P_^QQSUV3WVV8q@ =q@ q@ x@ @l$PSUq@  PSUh @ $;uhL@ Y   t$W   YD$YWp@ q@ =q@ @Pq@ q@ @Pq@  Pq@  P9t$   h@ 3>  $@ Uq@ jV5q@ UUq@ j j UD$@D$@D8Pq@ (t7h@ V=  U>t$(jPq@ U$8 V5Vq@ $h@ Yt$q@ D$Y_^][YYUQQSV5p@ W}h@ Whl@ Wh`@ WEhL@ WEh|@ WE3;t;9Et69Et19Et,;t(h`@ UW    uUtU_^[USV5p@ W}h@ Wh@ Wh@ WEh@ WEh@ WEh@ WEh@ WE3E;   9u   9ut|9utw9utr9utm;tih@ Y;t?h@ WUh@ W@ U,@ p@ j VUP6WU@ |E@ E@ E@ 3jX_^[UV5r@ W3jWWEWPtEP r@ EP$r@ jWWEWP_^U  @ E@ =  tE@ VW3MWQWjWW@ WVPp@ ;t5ujWh@ q@ P0r@ 3  Whx@ Vq@ P0r@ @@ =q@ SVuhd@ Phx@ Pq@ $@ EPq@ q@ EPEPPh4@ h  Pq@ |q@ P5$@ h`@ h(@ 5$@ Huh@ 5$@ 5@ 5$@ Vh@ P EPEP3Ph  PPPPup@ tj h@ Pq@ P0r@ u p@ }uPh@ h@ 5$@ h@ 5@ 5$@ h@ PP9  @PPjj h@ u p@ tj h@ Pq@ P0r@ Ph@ Ph@ h@ 5$@ Vuht@ Php@ Pq@ Pj5@ E5d@ q@ @uq@ VuVuhD@ PP+9   @4@ PPjj Vu p@ tj h@ Pq@ P0r@ PVPh@ h@ 5$@ jX[_^U  8  }NV  }  K  }     W39=4@ )  @   =@    SHr@ h @ h  u}E@ }h @ P68  h@ P8  VP8  $@ ;tQh @ h@ P|q@ WW8q@ q@ 5q@ @x@ QWPEuPPh@ q@ P0r@ q@  PWuuPPh@ q@ P0r@ h  j r@ Pr@ Eh @ EYt<EPjPVy  uPq@ @h@ P|q@ Vp@ q@ h`@ @P|q@ YYq@ =q@ @Pq@ 5q@ @Pq@  Pq@  Ph@ uq@ EPh   jPq@ uuq@ 0= Ph  uh@ h  uur@   [jX_x8@ 3;tPVhr  h  u<r@ 954@ uP   Ph  uHr@ VVh   uLr@ jX'Ex8ujj hp  u@r@ PLr@ 3^ (@ u0@ U8SV5p@ W}h@ Wh@ WEhL@ WEh`@ WEh@ WEh@ Wh@ WEh@ WE39M  9M   9M   9M   ;   9M   ;   9M   u;   8   QVPq@ YYuq@ V@h\@ P|q@ j   hH@ h  5@ Hr@ UWuuUjE^PSuq@ u2}G$4  WVS@q@ ~V 
-` UYEUS<q@ EYjjXe_^[U  EVPq@ 5q@ EPEPPh@ h  Pq@ P5$@ |q@ $@ $^tPq@ YUtSVWjY3}3}up@ jY3}u   VE0   }EEu5(p@ PE@ Ek   EEP}El   E(@ EEP}Em   E"@ EEP}En   E.@ 3EVE4   EEEEEEPE    uuuE   ,p@ _^[   2  SUVW5(@ =`p@    D$U0@ PS4@ h,@ VD$jPPh@ 
-  D$5(@ UPSh$@ VD$UPh @    5(@ jPh@ Sh@ V5(@ -\p@ jh@ V5(@ D@ jh@ V5(@ @ j
-h@ Sh@ V5(@ jPh@@ Sh@ h@ 5(@ h  h@ Sh@ Vh@    P @ YY5d@ p@ (@ _^][tPXp@ 8@ tP4p@ 3   UEVWto}utfva\uNH@0|J3~ntru;@F3@F
-FOO'MjQPq@ <
-uFOEFOF@Ouu& _^]U(  1  SV3W=p@ VE   E$@ uuh   VEur@ h   ELp@ EEt@ Pu]r@ fuVhh@ hH@ 5 @ 0r@ uh<@ PDr@ VV=Xr@ PVVjPjPVVVPSVr@ jVr@ Vr@ _^[U`  SVWh  3PS|p@ Ph@ Pq@ h@ Pq@ 5|q@ h@ PE@ PWuPh@ uPWu@uq@ jDE^VSP~/  EuE   PEPh@ SVSSSPSf]xp@ tC5tp@ jujpp@ Ph   lp@ Php@ u5p@ udp@ u_^[UQQSVWu4q@ 5Xq@ j[PE   Cj]SYY   ' Gj
-W3Y;Yt  EPh  VS5@ p@ tVhx@ uq@ P0r@ 2Wup@ ;ttVh@ uq@ P0r@ u p@ uq@ Y_^[UQQSVWu4q@ 5Xq@ j[PE   Cj]SYY   ' Gj=W3Y;Ytr  EPh  VS5@ p@ tVhx@ uq@ P0r@ 2Wup@ ;ttVh@ uq@ P0r@ u p@ uq@ Y_^[Vj:t$Xq@ YYu^q@ F8~jPq@ YYq@ 	AuVXp@ ^Vj:t$Xq@ YYu^q@ F8~jPq@ YYq@ 	AuVp@ ^  ,  SV5Xq@ Wj[$(  3Y;Yt@j]PD$Y;Yu3y  # CSh @ \$,  YYY  UWWD$$@ |$(\$ 8q@ 5q@ q@ x@ @PWUuPPh@ q@ P0r@ q@  PWUuPPh@ q@ P0r@ t$p@ t5D$PjSV,=   uq@ h`@ @P|q@ YYVp@ q@ =q@ @Pq@ 5q@ @Pq@  Pq@  Ph@ Uq@ D$<Wh   jPq@ WUq@ dT 0|$$ ]tj D$$h@ Pq@ P0r@ t$h @ 4+  YYjX_^[  U  (+  SVW3}}}}}E
-   tWWh@ W<  uh@ v*  YYt	WWh@ h @ vq@ Y;YEu	WWh@ j(q@ Y;uh@ W  uh   Pq@    j(_P_*  Yq@ 8~5jPq@ YYq@ 5	AtN5 P4q@ YMA;MM|E
-(WSq@ YY   uh   Pq@ Uu3uq@ $Q@@ juSq@ j$h@ h@ W0r@ P  e } @   0@   5q@ j][E0WX)  YY_  E8PEPht@ W;uKh@ P)  YYu"@     h@ j YY  "     PEPhd@ W;u2WYtE   p@ ;      E   PEPhP@ W;tPEPh8@ W;uWYtEePEPh$@ W;uWBPEPh@ W;uW PEPh@ W;uWYEEE;EyuvXp@ t E/jj h@ q@ P0r@ jXrvEp@ PYY} t uuuhL@ PDr@ uuh(@ PDr@ j@h@ Pj 0r@ 3_^[D$0D$0$'  YYVW`@ h  Vj |p@ h @ V   Yd@ Yuh@ p@ P   h@ h(@ h@ 5 @ P   tj=(@  u"=Hq@ 8~Lq@ 00jYY?j\Vxq@ YYt@tjh@ PTq@ uhX@ h4@ j aYYjX_^ UQSV3WVh   jVjh   up@ t+EPWp@ VVVjVWEp@ W=p@ u3VVVjSp@ SEM_^[U  UESVLW}+A+A"43}9PK   >{V4th@ RYY   ;   N;t+V+0@ +FMh  +F+~q@ Y   Ph  p@ tmSj h@ Pp@ tT3PPPvPSj
-EtLvWPq@ u$  |W4q@ MuEp@ jXh@ p@ PYY3_^[T$3;t9B;t2HJJJHHH H$H0H4(  HdHHHD3D$W3;   81   |$8   Vt$;   9~ ~u
-F Y@ ~(9~$uF$ Z@ F(h  jPV ;u^_L$;F}xB0P}|VHx,^_PF(PV$~^__SUl$]VWC,3;u(K   M(jPQU ;C,u
-_^]   [9{ uK   {({$S }K +;r*u{,+K _^]C(    K$3[+K(;L$vL$S({,u+L$+t(u{,+_C(C ^C$]3[{(C ;{(uC(    S$;sS$_^]3[D$8S  X  H  8 uH  ;u   HS0Uk4V0WxL$(HL$ t$|$T$|$<L$,D$4      $ Y@ Cu     s'  O|$FT$t$rCtF  u>3UUU>!  CjL$4D$4D$5SQR!!  Cl$   /  C       %   3      D$tD$LT$@|@   KD$;vL$LT$A|@   3UUUt  T$XCB0D$	l$  T$L$LA|@ f  s)  O|$FT$t$rStL$LA|@    tD$L@||@   t!T$$jL$(T$)SQR  C3l$    s/  OF rCt3T$$L$%jL$(D$*T$+SQR`  C3l$   
-s(I   O|$Ft$rCt!T$$jL$(T$)SQR  C3l$   Ct\s#X  O|$Ft$rCS8t!T$$jL$(T$)SQR  C3l$   KtVC8;D$vD$t6tD$KPVQK  T$CD$(K8++|$t$K8C8     Ct`  3    0@L$0t;rK D$tCRVP  T$CD$(+D$0|$t$7     CtZ!  30@L$0t;rK D$tSQVRn  T$CD$(+D$0|$t$     CtTs,I   O|$FT$t$rK  ;tD$L@h|@   3l$j j j   L$XT$CA0      s'9  O|$F T$t$r   3d$L$L3CA0l$
-   C  j j j 5  T$XCB0T$   |$P  Ct+   T$)  s#~  O|$Ft$rMKws$tY@    T$  CDxr@ CL	   CHxz@ CP      T$     T$  D$L@T|@    T$j  + T$s*I   O|$F T$t$r%  ;tD$L@4|@   3C8l$   K8L$  ;vL$D$ ;vL$.  t$|$(D$t$L$|$ +t$t$(L$K8++|$ |$t$(t$K8u
-  s#
-  O|$Ft$r  KX@C\CX=  KTT$   {\   C`       K`;KTsYs'd$ ?
-  O|$Ft$rC`Ez@ 3T$fLChK`AK`;KTrK`   ;s3S`Uz@ fLShS`B;S`r(  KdCD  RCLPQ    jChPj H  T$(D$4t L$LA|@ 	  D$L@{@ 	  C`       KXC\9C`6  KL   KDH#;L$@v<,	  KLO   KDF|$H#;t$L$@wD$@f= sR;L$s&  L$OF;|$t$rfD$B+K`fDKhC`@T$C`H  uhA;L$s+  L$OFA;|$t$rC`+T$  LCfL$0   f= D$uL;s-d$   O|$D$F;t$rL$F;s)  O|$D$F;t$rL$+D$0    {\K`{X;T$w@tL$0{`fL{h{`GH{`u|$KXC\9C`"L$LA{@ T$L|$B{@    (  KdCD  RCLPQ 	   CXPKhQj  D$4tT$LB{@ T$f  CdKdCH  RSXCPPQK\    QDShPjI  T$(D$4tL$LA{@      re|$   r[D$LL$(HL$ H0xS0T$,RPk4}  D$TPH0xC0k4T$(L$(t$|$D$  KL   H#CD;D$@v<  KLO   KDF|$H#;t$D$@w      L$3D$0L$   L$H#L$@CDL$0D$@;L$vXN  3L$0OD$F|$   L$t$H#L$2KDL$D$@;wD$@++L$@T$K8u   m   t   ^  @tD$L@{@ D  C@   C@tE;s%  O|$C@F;t$rK@   K8H#K8K@+   KP   H#CH;D$@vC$      KPO   KHF|$H#;t$D$@w   L$3D$0L$   L$H#L$@CHL$0D$@;L$vX  3L$0OD$F|$   L$t$H#L$2KHL$D$@;wD$@++@T$tL$LAp{@   L$@K<C@   C@tI;s%  O|$C@F;t$rK@   K<H#K<K@+T$D$ K$+L$,9K<vD$L@P{@ "     D$ x  L$,+C<;v<+K(;D$v+K,K D$+K,+K(D$L$0K8;L$8vL$(+C8L$0D$8D$L$ ;vD$+L$ L$8+D$(K8L$0	L$0@AL$0L$uD$(C8n     c  D$   D$(K8@D$(L$    :  C    s,I   O|$F T$t$rD$,+D$ L$LAKD$,Kt8CSL$(D$,Pt+QR  	+QR  L$XT$CA0D$ D$,Cu%   3l$;CtD$L@8{@ `3l$   C   C    s'   O|$F T$t$r;StSL$LA {@    4_^][8D$LL$(HL$ x0_H^k4]S0   [83l$   D$4   D$4D$LL$(HL$ H0xC S0k4u;}5D$LT$,;Pt(L$LD$,Qt   _^][8t$LVNl$<|$,F+V+FVKCKt5t1CWtVC+RP  NS+QR
-  CF0C3@I   C4F,ut|$PuD$4_^][8D$4_^][8[8E@ 	G@ G@ H@ jH@ H@ 8I@ I@ J@ J@ J@ "K@ -K@ L@ zL@  M@ M@ tN@ \Q@ 7S@ S@ T@ SU@ V@ ;V@ W@ W@ W@ (X@ K@ K@ K@ K@ Vt$t8Ft1N$t*@,t
-PF(PNV(QRV$F    3^^D$D$Pq@ D$Pq@ Y<SUVWD$PH\$TJLhL$0p@+N0D$4E$L$DM D$HE,]4L$(M(D$,EHL$MDD$$L$ ML   MP}0HD$8   l$T$HD$<s BBBBT$L$8D$ #D$+tBuM@     L$TD$TL$H#L$ D$+uD$F  L$L$Tt6;sjBT$   L$TM#l$L$T+s BBBBT$L$<D$$#D$+u>@3     L$@D$@L$H#L$$D$+tL$;L$s(jBT$;sjBT$   +M#l$L$D+;l$  +;l$Hn  L$,D$Iu*D$(+D$T;   +D$Td$ AAFMus;sS+D$(+l$D$T;sc+D$T    AAFMuL$,D$l$TI;s<+l$TD$@AAFMu+D$T;s+D$TAAFMuD$+D$Tv7PEAAFQAFT$TAAFMT$TuT$D$Tt^AAF|$TvPIFH+$    H@FH@FH@FL$TL$TwtH@F|$Tv@Fl$;T$0sQ;t$4EL$PD$AP{@     ,L$PAp{@  t	E    D$P@{@ E        ++   L$PH#BFAD$0+AD$4+  A}0_^]4][<x3D$8D$<D$@D$DS$   D$LU$   D$TD$XD$\v$    CfDL@LL@@;r$   	   L$D$f|D@ uHs;D$vD$u	][xV   f|tD u:f|tF u"f|tH uf|tJ uf|tL uvF;st$       LDD+x/@vW$   ~'tD$H+t_^][x^][xfD$j     fThfTHfLJffTjfLlr3v3    f<C t!CLTh$   fJCfDThTTh@;r t;HtD$48~@ D$0x~@ T$,9}@ -  D$4}@ -  D$,   $   D$4D$,   D$0$   L$ L$   T$<33Pt$D$8D$(T$@u=  o  $   D$$$    L$t$$fT$,*L$;}D$ fD$-~T$0T$4fL$fD$D$`fD$  L$T$8+   L$ 4    |$++9uT$J   t
-d$ utH#3t$$fLTHf|TH t$$u;T$   $   AT$;T$	t$@D$<#;t$Du\$D$ L$8|$L$+T$    ;s tTH>+~|$AB;rt$DT$(   D$8$   T$(u=     $   D$DL$ +T$<fLG$   *D$@D$fD$  t]t$ d$ t L$@D$<#;tD$73D$D$L$J   tutH#uT$(    T$$   _^]3[x_^]   [xVt$W|$  u_   ^S\$   U  r  +       .nnnnnnnnn	n
-nnnnnJwtI FHu3    3][_^QSVt&I t33   ~@ 3ANu UW  3,@ @ 3D$,~@ Y3%   3@ 3,@ @ 3T$,~@ Y3   3@ 3,@ @ 3D$,~@ Y3%   3@ 3,@ @ 3T$,~@ Y   3,@ 33@ D$3@ ,~@ 3%   3@ 3,@ @ 3,~@ Y3T$   3@ 3,@ @ 3D$,~@ Y%   3,@ 33,@ @ 3,~@ T$   @ 33 OrH3,@ D$|$<@ 3,~@ %   33<@ Ju_]t"    33   ~@ 3ANu^[YL$u3T$D$%\q@ %`q@ %hq@ %lq@ %pq@ %tq@ =   s  PQL$   -   =   s+@Pjth@   3]S=p@ f8MZuH<9PE  uA=  t=  t]'   v39   ytv39   E]jq@ Y@@ D@ q@ @@ q@ <@ q@  <@   +  9 @ uhj@ q@ Y   h@ h@   hTj@ G  8@ EEP54@ EPEPEPq@  E;}j   Yh@ h @   YYp@ 0u< w]:t9]uT:t
-< wFu]|Pp@ EtEj
-XPVSSPu9]uVp@ p@ U<"u39]MPp@ YtFuFrE	MPQ(   YYeu} uVp@ p@ M$  %p@ % q@ =D@ u%$q@ h@@ hD@ t$  t$YHjh@    E@ }@ s"e E t3@eME   jh@ T   E @ } @ s"e E t3@eMEX   %q@ h   h   _   YY3h k@ d    PD$l$l$+SVWEePEEEEd    Md    Y_^[Q%Dq@ % q@ %(q@                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               N        r  `  ,  <        J  8      t                              "  6  J  ^  p                                t    |  f  V  D  8    &                            "  2  B  P  v                  b    r    h           
-      (  2  <  F  T  ^  j  t  |                              
-      (  2  >  N  V  `            V  D  6  &                      ~  r  f  T  D  2  $                        `   P   s   p  0  	 
-  `     	       @  	   X    	 ;  x  8  	   h  (  	      H  	   T    +  t  4  	   d  $  	      D  	   \    	 S  |  <  	   l  ,  	      L  	   R    #  r  2  	   b  "  	      B  	   Z    	 C  z  :  	   j  *  	  
-    J  	   V   @  3  v  6  	   f  &  	      F  	 	  ^    	 c  ~  >  	   n  .  	      N  	 `   Q      q  1  	 
-  a  !  	      A  	   Y    	 ;  y  9  	   i  )  	  	    I  	   U   +  u  5  	   e  %  	      E  	   ]    	 S  }  =  	   m  -  	      M  	   S    #  s  3  	   c  #  	      C  	   [    	 C  {  ;  	   k  +  	      K  	   W   @  3  w  7  	   g  '  	      G  	 	  _    	 c    ?  	   o  /  	      O  	 `   P   s   p  0  	 
-  `     	       @  	   X    	 ;  x  8  	   h  (  	      H  	   T    +  t  4  	   d  $  	      D  	   \    	 S  |  <  	   l  ,  	      L  	   R    #  r  2  	   b  "  	      B  	   Z    	 C  z  :  	   j  *  	  
-    J  	   V   @  3  v  6  	   f  &  	      F  	 	  ^    	 c  ~  >  	   n  .  	      N  	 `   Q      q  1  	 
-  a  !  	      A  	   Y    	 ;  y  9  	   i  )  	  	    I  	   U   +  u  5  	   e  %  	      E  	   ]    	 S  }  =  	   m  -  	      M  	   S    #  s  3  	   c  #  	      C  	   [    	 C  {  ;  	   k  +  	      K  	   W   @  3  w  7  	   g  '  	      G  	 	  _    	 c    ?  	   o  /  	      O  	    A @ !  	  @     a ` 1 0  @         	  
-             incorrect length check  incorrect data check    invalid distance too far back   invalid distance code   invalid literal/length code invalid distances set   invalid literal/lengths set invalid bit length repeat   too many length or distance symbols invalid code lengths set    invalid stored block lengths    invalid block type  header crc mismatch unknown header flags set    incorrect header check  invalid window size unknown compression method  x}@ l}@ k}@ `}@ P}@ D}@ 0}@  }@ }@ k}@ incompatible version    buffer error    insufficient memory data error  stream error    file error  stream end  need dictionary  inflate 1.2.1 Copyright 1995-2003 Mark Adler         	 
-         # + 3 ; C S c s                                        L B         	    ! 1 A a    0@`                                  @ @     0w,aQ	mjp5cd2y+L	|~-d jHqA}mQVlkdzbeO\lcc= n;^iLA`rqg<GKk
-5lB@l2u\EY=0&: QQa!#V(_$|o/LhXa=-fAvq *q3x4 	j-=mld\cQkkbal0eN bl{WeP|bI-|eLXaMQ:t 0AJ=mjiCn4Fg`s-D3_L
-|<qPA' %hWo 	fa^)"=Y.;\l t9Gw&sc;d>jmZjz	' 
-}Dhi]Wbgeq6lknv+ZzJgoC`~8ROggW?K6H+L
-J6`zA`Ugn1yiFafo%6hRwG"/&U;(Z+j\1,[d&cju
-m	?6grW Jz+{8|!Bhn[&wowGZpj;f\eibkaElx
-TN9a&g`MGiIwn>JjZf@;7SG00S$6)WTg#.zfJah]+o*7Z-    A1b62S-+ldEw}ZVAOIOM~-QJ#SpxAaU.7Y -6]]wll?AZ$ Faw$e]]FD(koipvk19Z* ,	m86F]qTp0ek*1u4y%8<ysHj}A<*XOyD~b-OT@#88L!
-	 \H1EbnSwT]l?P\brykT@OYX#p8$A#=keZ|%	Wd8N!3`*$?-l	$HS)F~hwey?/H$6t	5*SKHRpey1~`|=6xT9eK;
-"	O]_lF?mtCZ#AplAwG6- Aq[ZhwClZO-_~6-' > S1bSWk1**ykHpo].*F6fcTT"eMg0&):{kZ>	8$,52F*sw1pHkQ6Fzw]cNJ#pAF]#l8?1(BOgT~yUbL8^# TZ1ObbSyOIV~P-{b-R4~^eGnHl/Su6:	#jT$+e?yHf'*b#?&~?$pi;FBzw[keZ~7	Sv8H	3?r$    7jnYF	|OQ;Ud	S
--
-=G\p&Gw)`/ai5&LsZ<#0zMzFM8,9;:<D?>R:<eP=X^6o}7654W10k23k$%1'[-&LMb#{'"" $!(x*+F`)q
->(q-v,.7/pXqYs3r%w+OQvrtEux~OK}!b|tyBxz{.lD~m8onlk[wjR1h58ib?mcf+aQ`edd"fig HINSKyuJcO	NZLMFGN@E$DD2AsX@*IBCPhTg3U>uW	VS:R|P~Q9ZS [fYX4])\ZEo^m/_5qs\<k2gz8J& Va`/6\ilU,zBu\H &=WFA	+O`]xW79>q!K7kf-b3jp]$^'~*I@VW<M{tDCm-@wm.B+(>Td"~8y$owJ1}05_K^iBI#dXTcQ:r fn|xK)o%/3vUuA?)C:|s@;bIUeh"_HS1^Z4    eg	Wb27_k%8(O}doJj3wVcXWP0qB{gCru&op-?'Bs Gz>2[g;
- i8P/_Y=e:ZO?(3wwXR@hQ+H*0"ZOWoI}@mN5+#*'G| AH=XX?#1jv`p^Y<L~i/{kHwhs)aLoD~Pf7VM'(@g9x+n&;f?/X)T`D1M.FgTp'Hq/L0UEc?kh6ry7]P\@TN%s7@'>$!AxU\3;Y^U~PGl!;b	F2p(Q_V:1X:	n3m:@/)IJNv"2x+ Kx.HfAj^y9*O]#kM`~b_R	7zF h!1Vc0a"j6nS	Nr){t*F8#vufz`rs"WG9^EMvc&DAdQy/4A&SEbiLQ<6'5P..T&q]w4.6IE? v\[YI>U!lDa>7~8A]&nv|oY
-yKiw\9~$66nQfq>,o,I	{I.H>C-YngQztaf    w0a,	Qmpjc5d2y	L+~|-dj qHA}mQlVdkbze\Ocl=c;n Li^`Agqr<KG
-k5Bl@2lE\u=Y&0Q :Qa!V#(_$/o|XhLaf-=vAq *q3x 4	jm=-dlc\kkQlabe0b Nl{WeP|b-I|LeMaX:Q t0JA=mCij4ngF`D-s3
-L_|Pq<'A Wh% of	a^)"Y=.\;l tG9w&scd;mj>zjZ	
- '}DhibW]egl6qnkv+zZgJoC`~8ORgWg?H6K+
-L6JAz``gU1nFiyaf%oRh6wG"U&/;(+Z\j1,[dc&ujm
-	6?rg WJz{+8|!Bhn&[owGwZjpf;\ebiaklE
-xNT9g&a`IiGM>nwjJZ@f7;SG0S0$6TW)#gfz.aJ]h*o+7Z-    1A26b+-Sdl}wEVZOAIO~M-JQS#xpaA.U7Y -6w]]llA?Z$F wa$e]]DFok(vpi91k *Z	,8mF6]pTqke0*1u4%y<8syjHA}X*<yOb~DO-T@#88!L
-\ 	E1HnbwS]Tl?Prb\ky@TYOX#$8p=#Aek|ZW	%N8d3!*`$?-	lH$S~F)ewh/?y6$H	t*5KSRHyep`~1|=6Txe9;K"
-	_]OFlm?tZCA#lpwA6G- qAhZ[CwZl-O6~_'->  1SbSW1k**kypH]oF*.f6TTcMe"0g)&:{kZ	>8,$5*F21wsHpQkzF6c]wNJ#pA#]F8l1?(gOB~TUyLb8#^T O1ZbbySIOP~V{-b-4R^~GelHnuS/:6#	$Tj?e+yHf*'b#&??~p$iBF;[wzek~ZS	7H8v	?3$r    j7nFY	|OQ;U	dS
--
-\G=&pGw`)/ai5&sL<Z0#zzM8MF9,;:?D<><:R=Pe6^X7}o5641W02k3$k%'1&-[#bML"'{ "!$*x(+)`F(>
-q-q,v./7pqXsYr3w%vQO+truE~xKO}|b!ytxBz{l.m~Do8nkljw[h1Ri85bcm?a+f`Qeddf"giH IKSNJuyOcN	LZMFGE@ND$A2D@XsBI*CThPU3gWu>V	SR:P|Q~Z9[ SYfX]4\)^oEZ_/m5qs<\kg2z&J8 V`a/6i\lU,zB\u H=&FW	A+Ox]`7W>9q!7Kkf-b3pj$]^'*~@IWV<M{DtmC-@mw+B.(>dT"~8yo$w1J}50K_^iBI#dXTQc:r fnx|)Ko%3/uUv?A):C|s@;IbeU"hH_S1Z^4    ge	bW72%k_8(}OodJjw3XcVPW0Bq{gurCo&p-?'sB zG2>[
-;g /P8i_Y=e:OZw3(?RXw@Qh+HZ"0*WOIo@}m5N#+'*GA |HX=#?X1vj`^pYL<i~{/wHksha)LDofP~V7'M@(9g+xn;&f/?)XD`T1MF.Tg'pqHL/0cEUk?6hyr]7\PNT@%s7@>'!$UxA3\Y;U^GP~b;!lF	2p(QV_:X1:	3n:m@I)/NJ2"v+x xKH.jAf^O*9y]#Mk~`b_	Rz7h F!10cV"ajn6	SrN){t*8Fv#fu`zrsW"G9E^vMcD&dA/yQA4S&EbLi<Q'65..P&T]q4w6.I?E v[\IYU>l!>aD~7A8n&]|vYo
-Kyiw\~9$66Qnf>q,o,I	I{.C>HnY-Qgtzfa           F           F            Fi@ i@     =j@ Aj@     j@ j@                           f  (p              Xp            h  q              4p               p  (            dr              p                      N        r  `  ,  <        J  8      t                              "  6  J  ^  p                                t    |  f  V  D  8    &                            "  2  B  P  v                  b    r    h           
-      (  2  <  F  T  ^  j  t  |                              
-      (  2  >  N  V  `            V  D  6  &                      ~  r  f  T  D  2  $                    d PropertySheetA   CreatePropertySheetPageA  COMCTL32.dll  SetLastError  E CreateDirectoryA  VGetFileAttributesA  ^MapViewOfFile N CreateFileMappingA  . CloseHandle SetFileTime  DosDateTimeToFileTime iGetLastError  M CreateFileA cUnmapViewOfFile lstrlenA  GetProcAddress  HLoadLibraryA  kMultiByteToWideChar RLocalFree  FormatMessageA   FreeLibrary wGetModuleHandleA  | DeleteFileA GetPrivateProfileIntA GetPrivateProfileStringA  ResumeThread  $SetPriorityClass  :GetCurrentProcess =GetCurrentThread  6SetThreadPriority ` CreateProcessA  uGetModuleFileNameA  RemoveDirectoryA  [GetFileSize GetTempFileNameA  GetTempPathA  KERNEL32.dll  MessageBoxA GetFocus  ;SendMessageA   EndPaint  ]GetSystemMetrics   BeginPaint   DefWindowProcA  PostMessageA  SSetDlgItemTextA wsprintfA EGetParent 6SendDlgItemMessageA *ReleaseDC GetDC MoveWindow  tGetWindowRect GetDlgItem   DispatchMessageA  TranslateMessage  PeekMessageA  MSetCursor LoadCursorA UpdateWindow  ShowWindow  ` CreateWindowExA RegisterClassA  USER32.dll   DeleteObject  <SetTextColor  NTextOutA  SetBkMode SelectObject  9 CreateFontA 3 CreateDIBitmap  P CreateSolidBrush  GDI32.dll RegCloseKey RegOpenKeyExA RegQueryValueExA  RegEnumKeyExA RegQueryValueA  RegSetValueExA  RegCreateKeyExA RegDeleteKeyA RegDeleteValueA ADVAPI32.dll  h CoUninitialize   CoCreateInstance  : CoInitialize  ole32.dll strchr  memcpy  memset  strncat strcat  strlen  strcpy  strcmp  strrchr fprintf %_vsnprintf  malloc  _snprintf strncpy free  sscanf  _putenv remove  fread ftell fseek fopen fclose  fflush  C_iob  freopen fwrite  strftime  localtime time   sprintf _fstat  strtol  _pctype E_isctype  y __mb_cur_max  qsort realloc fgets strncmp { __p___argv  z __p___argc  MSVCR71.dll  _c_exit  _exit K _XcptFilter M_ismbblead   _cexit  exit   _acmdln  _amsg_exit  n __getmainargs ?_initterm  __setusermatherr   _adjust_fdiv   __p__commode   __p__fmode   __set_app_type   _except_handler3  k __dllonexit _onexit  _controlfp  GetStartupInfoA _strnicmp _strcmpi  _strdup _tempnam   _close  _read _open                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           CreateDirectory (%s)    MapViewOfFile (%s)  CreateFileMapping (%s)  CreateFile (%s) inflateEnd returns %d   inflate returns %d  inflateInit2 returns %d 1.2.1   \           @ 0@ @ 0@ @ 0@ @ @ @ 0@         @ l@ @ l@ @ 0@ @ @ @ 0@            T@    D@    4@    @    @    @    @    @    @    @ @ @        x@ 	@        h@  @        X@ @        D@ @        8@ @        Software\Microsoft\Windows\CurrentVersion\Uninstall Software\Microsoft\Windows\CurrentVersion\Uninstall message_box directory_created   file_created    get_root_hkey   get_special_folder_path create_shortcut CSIDL_FONTS CSIDL_PROGRAMS  CSIDL_COMMON_PROGRAMS   CSIDL_STARTUP   CSIDL_COMMON_STARTUP    CSIDL_DESKTOPDIRECTORY  CSIDL_COMMON_DESKTOPDIRECTORY   CSIDL_APPDATA   CSIDL_STARTMENU CSIDL_COMMON_STARTMENU  Lib\site-packages\  DATA    Scripts\    SCRIPTS HEADERS PLATLIB PURELIB s   no such folder (%s) unknown CSIDL (%s)  function not available  SHGetSpecialFolderPathA shell32.dll Failed to create shortcut '%s' - error 0x%x SetWorkingDirectory() error 0x%x    SetIconLocation() error 0x%x    SetArguments() error 0x%x   SetDescription() failed, error 0x%x SetPath() failed, error 0x%x    QueryInterface(IPersistFile) error 0x%x CoCreateInstance failed, error 0x%x sss|sssi    CoInitialize failed, error 0x%x i   ssi l   100 Made Dir: %s
-   .py 200 File Copy: %s
-  Error   200 File Overwrite: %s
- Runtime Error   Times Roman This Wizard will install %s on your computer. Click Next to continue or Cancel to exit the Setup Wizard.    Don't know Python's installation type   Strange python%d%d.dll  Python Version %d.%d    Cannot install  No Python installation found in the registry.   Python version %s required, which was not found in the registry.    Python %s is required for this package. Select installation to use: Software\Python\PythonCore\%s\InstallPath   Python Version %s (found in registry)   Software\Python\PythonCore  Compiling files to .pyo...  Loading python...   Compiling files to .pyc...  Failed to unzip installation files  Installing files... Running pre-installation script Ready to install    Click Next to begin the installation of %s. If you want to review or change any of your  installation settings, click Back. Click Cancel to exit the wizard.    Py_OptimizeFlag PySys_GetObject PyRun_SimpleString  Py_Finalize Py_SetProgramName   Py_Initialize   %s%c    import py_compile; py_compile.compile (r'%s')   SOFTWARE\Python\PythonCore\%d.%d\InstallPath    PYTHONHOME=%s   Out of memory!  rb  Running the pre-installation script failed
-    Can't load Python for pre-install script    a   PyErr_Print OSError ValueError  __builtin__ PyErr_Format    PyArg_ParseTuple    Py_BuildValue   PyCFunction_New PyObject_GetAttrString  PyObject_SetAttrString  PyImport_ImportModule   UninstallString "%s\Remove%s.exe" -u "%s\%s-wininst.log"    wb  %s\Remove%s.exe 040 Reg DB Value: [%s\%s]%s=%s
- Could not set key value DisplayName Python %d.%d %s 020 Reg DB Key: [%s]%s
- Could not create key    %s-py%d.%d  999 Root Key: %s
-   Source: %s
- *** Installation started %Y/%m/%d %H:%M ***
-    %s\%s-wininst.log   Could not open key  You do not seem to have sufficient access rights
-on this machine to install this software   HKEY_CURRENT_USER   HKEY_LOCAL_MACHINE  Postinstall script finished.
-Click the Finish button to exit the Setup wizard.  *** Could not load Python ***   *** run_installscript: internal error 0x%X ***
- freopen stdout  freopen stderr  300 Run Script: [%s]%s
- \Scripts\   -install    Please wait while running postinstall script... Installation failed.    Running Script...   Could not open postinstall-script %s
-   PySys_SetArgv   *** Installation finished %Y/%m/%d %H:%M ***
-   install_script  metadata    name    target_version  target_optimize target_compile  build_info  info    title   Setup   Setup %s    Could not register window class Setup.exe   SetupWindowClass    if exist "%s" goto Repeat
-  del "%s"
-   :Repeat
-    w   %s.bat  Could not delete key    Could not delete value  uninstall-script    -remove Uninstall Finished! %d files and %d directories removed %d files and %d directories removed
-%d files or directories could not be removed    You do not seem to have sufficient access rights
-on this machine to uninstall this software %d Run Script: %s   %d Reg DB Value: %s %d Reg DB Key: %s   %d File Overwrite: %s   %d File Copy: %s    %d Made Dir: %s %d Root Key: %s Are you sure you want to remove
-this package from your computer?    Please confirm  Out of memory   could not open logfile  r   2. arg is not -u    -u  Wrong number of args    Setup program invalid or damaged    This program is normally started by windows Remove  Could not open archive  Could not create temporary file ~du Invalid cfgdata magic number (see bdist_wininst.py)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            8                 n   h                 k     l     m     n                                          	                    	                    	                   	     0  
-          8                          Z          @            (   n   ,         	                        BBB 999 111 )))      c               R[RABZRYRZRAB[R[RAB[RAAB[  &    & &  &   & @JQ1AA1ZQ1111ZQ1AAZ@JQ1AAZQ1AAJ  eu eu  @ABZ@J@G@F@F@G@AABX@J@AABX@J@J             @AA1X@J@G@HRX@G@AAG@ZRX@AAG@JQJ ed%ed %ed  @AA1ZQ1AA1X@J@HQ1AA1X@1A1ZQ1AA1ZQ1A1J        & &        RAABZRABZR[R[RABZRYRBZRABZRBW@J  @J  & R[R[R[R[R[RABZR[R[R[  & & & & &   & & @J@J@J@J@HQ1AA1X@J@J  @J@J@J@J@G@J@G@JQJ   @ABZQ11Z@J@AAG@J@G@GQ1J         @AA1ZQ1YQ1[@J@AAG@J@G@1W@J &  @I@G@J@J@J@J@G@J@G@Z@J  @AA1X@J@HRABX@J@HQ1AA1X@J@J      &      %& &   & & RAABZR[RZRAAABZR[R[RABZR[R[                @ H     {     S e t u p       M S   S a n s   S e r i f              P} 
-      T h i s   W i z a r d   w i l l   i n s t a l l   % s   o n   y o u r   c o m p u t e r .   C l i c k   N e x t   t o   c o n t i n u e   o r   C a n c e l   t o   e x i t   t h e   S e t u p   W i z a r d .             P}                   P  h     n               P}                     @ H     {     S e t u p       M S   S a n s   S e r i f              P} 
-      S e l e c t   p y t h o n   i n s t a l l a t i o n   t o   u s e :             P                     P}  7   P y t h o n   D i r e c t o r y :               P}   j                P  h     n             P                     P}  B   I n s t a l l a t i o n   D i r e c t o r y :                 @B 2     F i n d   o t h e r   . . .                  @ H     {     S e t u p       M S   S a n s   S e r i f              P} 
-      C l i c k   N e x t   t o   b e g i n   t h e   i n s t a l l a t i o n .   I f   y o u   w a n t   t o   r e v i e w   o r   c h a n g e   a n y   o f   y o u r   i n s t a l l a t i o n   s e t t i n g s ,   c l i c k   B a c k .   C l i c k   C a n c e l   t o   e x i t   t h e   W i z a r d .                 P}      m s c t l s _ p r o g r e s s 3 2   P r o g r e s s 1                P}       I n s t a l l a t i o n   p r o g r e s s :             P  h     n                  @ H     {     S e t u p       M S   S a n s   S e r i f              P} 
-      C l i c k   t h e   F i n i s h   b u t t o n   t o   e x i t   t h e   S e t u p   w i z a r d .               P  h     n             P} (                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
\ No newline at end of file
diff -Naur Python-2.5-base/Lib/distutils/core.py Python-2.5/Lib/distutils/core.py
--- Python-2.5-base/Lib/distutils/core.py	2005-03-20 14:19:47.000000000 -0800
+++ Python-2.5/Lib/distutils/core.py	2009-03-17 15:50:58.000000000 -0700
@@ -8,7 +8,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: core.py 38672 2005-03-20 22:19:47Z fdrake $"
+__revision__ = "$Id: core.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/cygwinccompiler.py Python-2.5/Lib/distutils/cygwinccompiler.py
--- Python-2.5-base/Lib/distutils/cygwinccompiler.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/cygwinccompiler.py	2009-03-17 15:50:58.000000000 -0700
@@ -47,7 +47,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: cygwinccompiler.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: cygwinccompiler.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os,sys,copy
 from distutils.ccompiler import gen_preprocess_options, gen_lib_options
diff -Naur Python-2.5-base/Lib/distutils/debug.py Python-2.5/Lib/distutils/debug.py
--- Python-2.5-base/Lib/distutils/debug.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/debug.py	2009-03-17 15:50:58.000000000 -0700
@@ -2,7 +2,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: debug.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: debug.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 # If DISTUTILS_DEBUG is anything other than the empty string, we run in
 # debug mode.
diff -Naur Python-2.5-base/Lib/distutils/dep_util.py Python-2.5/Lib/distutils/dep_util.py
--- Python-2.5-base/Lib/distutils/dep_util.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/dep_util.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: dep_util.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: dep_util.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os
 from distutils.errors import DistutilsFileError
diff -Naur Python-2.5-base/Lib/distutils/dir_util.py Python-2.5/Lib/distutils/dir_util.py
--- Python-2.5-base/Lib/distutils/dir_util.py	2005-08-26 08:20:46.000000000 -0700
+++ Python-2.5/Lib/distutils/dir_util.py	2009-03-17 15:50:58.000000000 -0700
@@ -4,7 +4,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: dir_util.py 39416 2005-08-26 15:20:46Z tim_one $"
+__revision__ = "$Id: dir_util.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os, sys
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/dist.py Python-2.5/Lib/distutils/dist.py
--- Python-2.5-base/Lib/distutils/dist.py	2005-03-23 10:54:36.000000000 -0800
+++ Python-2.5/Lib/distutils/dist.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: dist.py 38697 2005-03-23 18:54:36Z loewis $"
+__revision__ = "$Id: dist.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string, re
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/emxccompiler.py Python-2.5/Lib/distutils/emxccompiler.py
--- Python-2.5-base/Lib/distutils/emxccompiler.py	2003-12-02 04:17:59.000000000 -0800
+++ Python-2.5/Lib/distutils/emxccompiler.py	2009-03-17 15:50:58.000000000 -0700
@@ -19,7 +19,7 @@
 #
 # * EMX gcc 2.81/EMX 0.9d fix03
 
-__revision__ = "$Id: emxccompiler.py 34786 2003-12-02 12:17:59Z aimacintyre $"
+__revision__ = "$Id: emxccompiler.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os,sys,copy
 from distutils.ccompiler import gen_preprocess_options, gen_lib_options
diff -Naur Python-2.5-base/Lib/distutils/errors.py Python-2.5/Lib/distutils/errors.py
--- Python-2.5-base/Lib/distutils/errors.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/errors.py	2009-03-17 15:50:58.000000000 -0700
@@ -10,7 +10,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: errors.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: errors.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 class DistutilsError (Exception):
     """The root of all Distutils evil."""
diff -Naur Python-2.5-base/Lib/distutils/extension.py Python-2.5/Lib/distutils/extension.py
--- Python-2.5-base/Lib/distutils/extension.py	2004-10-14 03:02:08.000000000 -0700
+++ Python-2.5/Lib/distutils/extension.py	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
 Provides the Extension class, used to describe C/C++ extension
 modules in setup scripts."""
 
-__revision__ = "$Id: extension.py 37623 2004-10-14 10:02:08Z anthonybaxter $"
+__revision__ = "$Id: extension.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os, string, sys
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/fancy_getopt.py Python-2.5/Lib/distutils/fancy_getopt.py
--- Python-2.5-base/Lib/distutils/fancy_getopt.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/fancy_getopt.py	2009-03-17 15:50:58.000000000 -0700
@@ -10,7 +10,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: fancy_getopt.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: fancy_getopt.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, string, re
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/file_util.py Python-2.5/Lib/distutils/file_util.py
--- Python-2.5-base/Lib/distutils/file_util.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/file_util.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: file_util.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: file_util.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os
 from distutils.errors import DistutilsFileError
diff -Naur Python-2.5-base/Lib/distutils/filelist.py Python-2.5/Lib/distutils/filelist.py
--- Python-2.5-base/Lib/distutils/filelist.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/filelist.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: filelist.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: filelist.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os, string, re
 import fnmatch
diff -Naur Python-2.5-base/Lib/distutils/msvccompiler.py Python-2.5/Lib/distutils/msvccompiler.py
--- Python-2.5-base/Lib/distutils/msvccompiler.py	2006-07-30 06:27:31.000000000 -0700
+++ Python-2.5/Lib/distutils/msvccompiler.py	2009-03-17 15:50:58.000000000 -0700
@@ -10,7 +10,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: msvccompiler.py 50979 2006-07-30 13:27:31Z martin.v.loewis $"
+__revision__ = "$Id: msvccompiler.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string
 from distutils.errors import \
diff -Naur Python-2.5-base/Lib/distutils/mwerkscompiler.py Python-2.5/Lib/distutils/mwerkscompiler.py
--- Python-2.5-base/Lib/distutils/mwerkscompiler.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/mwerkscompiler.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: mwerkscompiler.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: mwerkscompiler.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string
 from types import *
diff -Naur Python-2.5-base/Lib/distutils/spawn.py Python-2.5/Lib/distutils/spawn.py
--- Python-2.5-base/Lib/distutils/spawn.py	2004-11-10 14:23:15.000000000 -0800
+++ Python-2.5/Lib/distutils/spawn.py	2009-03-17 15:50:58.000000000 -0700
@@ -8,7 +8,7 @@
 
 # This module should be kept compatible with Python 2.1.
 
-__revision__ = "$Id: spawn.py 37828 2004-11-10 22:23:15Z loewis $"
+__revision__ = "$Id: spawn.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string
 from distutils.errors import *
diff -Naur Python-2.5-base/Lib/distutils/sysconfig.py Python-2.5/Lib/distutils/sysconfig.py
--- Python-2.5-base/Lib/distutils/sysconfig.py	2006-06-27 03:08:25.000000000 -0700
+++ Python-2.5/Lib/distutils/sysconfig.py	2009-03-17 15:50:58.000000000 -0700
@@ -9,7 +9,7 @@
 Email:        <fdrake@acm.org>
 """
 
-__revision__ = "$Id: sysconfig.py 47123 2006-06-27 10:08:25Z ronald.oussoren $"
+__revision__ = "$Id: sysconfig.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os
 import re
diff -Naur Python-2.5-base/Lib/distutils/text_file.py Python-2.5/Lib/distutils/text_file.py
--- Python-2.5-base/Lib/distutils/text_file.py	2002-11-13 18:25:42.000000000 -0800
+++ Python-2.5/Lib/distutils/text_file.py	2009-03-17 15:50:58.000000000 -0700
@@ -4,7 +4,7 @@
 that (optionally) takes care of stripping comments, ignoring blank
 lines, and joining lines with backslashes."""
 
-__revision__ = "$Id: text_file.py 29687 2002-11-14 02:25:42Z akuchling $"
+__revision__ = "$Id: text_file.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 from types import *
 import sys, os, string
diff -Naur Python-2.5-base/Lib/distutils/unixccompiler.py Python-2.5/Lib/distutils/unixccompiler.py
--- Python-2.5-base/Lib/distutils/unixccompiler.py	2006-06-27 03:08:25.000000000 -0700
+++ Python-2.5/Lib/distutils/unixccompiler.py	2009-03-17 15:50:58.000000000 -0700
@@ -13,7 +13,7 @@
   * link shared library handled by 'cc -shared'
 """
 
-__revision__ = "$Id: unixccompiler.py 47123 2006-06-27 10:08:25Z ronald.oussoren $"
+__revision__ = "$Id: unixccompiler.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import os, sys
 from types import StringType, NoneType
diff -Naur Python-2.5-base/Lib/distutils/util.py Python-2.5/Lib/distutils/util.py
--- Python-2.5-base/Lib/distutils/util.py	2006-05-23 14:54:23.000000000 -0700
+++ Python-2.5/Lib/distutils/util.py	2009-03-17 15:50:58.000000000 -0700
@@ -4,7 +4,7 @@
 one of the other *util.py modules.
 """
 
-__revision__ = "$Id: util.py 46157 2006-05-23 21:54:23Z tim.peters $"
+__revision__ = "$Id: util.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $"
 
 import sys, os, string, re
 from distutils.errors import DistutilsPlatformError
diff -Naur Python-2.5-base/Lib/distutils/version.py Python-2.5/Lib/distutils/version.py
--- Python-2.5-base/Lib/distutils/version.py	2002-11-13 18:25:42.000000000 -0800
+++ Python-2.5/Lib/distutils/version.py	2009-03-17 15:50:58.000000000 -0700
@@ -4,7 +4,7 @@
 # Implements multiple version numbering conventions for the
 # Python Module Distribution Utilities.
 #
-# $Id: version.py 29687 2002-11-14 02:25:42Z akuchling $
+# $Id: version.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 
 """Provides classes to represent module version numbers (one class for
diff -Naur Python-2.5-base/Lib/hashlib.py Python-2.5/Lib/hashlib.py
--- Python-2.5-base/Lib/hashlib.py	2005-08-26 08:20:46.000000000 -0700
+++ Python-2.5/Lib/hashlib.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,4 +1,4 @@
-# $Id: hashlib.py 39416 2005-08-26 15:20:46Z tim_one $
+# $Id: hashlib.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 #
 #  Copyright (C) 2005   Gregory P. Smith (greg@electricrain.com)
 #  Licensed to PSF under a Contributor Agreement.
diff -Naur Python-2.5-base/Lib/lib-tk/Tix.py Python-2.5/Lib/lib-tk/Tix.py
--- Python-2.5-base/Lib/lib-tk/Tix.py	2006-06-06 05:46:55.000000000 -0700
+++ Python-2.5/Lib/lib-tk/Tix.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # -*-mode: python; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
 #
-# $Id: Tix.py 46691 2006-06-06 12:46:55Z martin.blais $
+# $Id: Tix.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # Tix.py -- Tix widget wrappers.
 #
diff -Naur Python-2.5-base/Lib/lib-tk/Tkinter.py Python-2.5/Lib/lib-tk/Tkinter.py
--- Python-2.5-base/Lib/lib-tk/Tkinter.py	2006-07-18 10:46:31.000000000 -0700
+++ Python-2.5/Lib/lib-tk/Tkinter.py	2009-03-17 15:50:58.000000000 -0700
@@ -30,7 +30,7 @@
 tk.mainloop()
 """
 
-__version__ = "$Revision: 50704 $"
+__version__ = "$Revision: 1.1.1.1 $"
 
 import sys
 if sys.platform == "win32":
diff -Naur Python-2.5-base/Lib/lib-tk/tkFileDialog.py Python-2.5/Lib/lib-tk/tkFileDialog.py
--- Python-2.5-base/Lib/lib-tk/tkFileDialog.py	2004-07-17 23:16:08.000000000 -0700
+++ Python-2.5/Lib/lib-tk/tkFileDialog.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #
 # Instant Python
-# $Id: tkFileDialog.py 36560 2004-07-18 06:16:08Z tim_one $
+# $Id: tkFileDialog.py,v 1.1.1.1 2009/01/29 18:17:31 nagy Exp $
 #
 # tk common file dialogues
 #
diff -Naur Python-2.5-base/Lib/md5.py Python-2.5/Lib/md5.py
--- Python-2.5-base/Lib/md5.py	2005-08-21 11:45:59.000000000 -0700
+++ Python-2.5/Lib/md5.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,4 +1,4 @@
-# $Id: md5.py 39316 2005-08-21 18:45:59Z greg $
+# $Id: md5.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 #
 #  Copyright (C) 2005   Gregory P. Smith (greg@electricrain.com)
 #  Licensed to PSF under a Contributor Agreement.
diff -Naur Python-2.5-base/Lib/pickle.py Python-2.5/Lib/pickle.py
--- Python-2.5-base/Lib/pickle.py	2005-02-07 07:28:45.000000000 -0800
+++ Python-2.5/Lib/pickle.py	2009-03-17 15:50:58.000000000 -0700
@@ -24,7 +24,7 @@
 
 """
 
-__version__ = "$Revision: 38432 $"       # Code version
+__version__ = "$Revision: 1.1.1.1 $"       # Code version
 
 from types import *
 from copy_reg import dispatch_table
diff -Naur Python-2.5-base/Lib/pydoc.py Python-2.5/Lib/pydoc.py
--- Python-2.5-base/Lib/pydoc.py	2006-07-27 16:43:15.000000000 -0700
+++ Python-2.5/Lib/pydoc.py	2009-03-17 15:50:58.000000000 -0700
@@ -37,7 +37,7 @@
 __author__ = "Ka-Ping Yee <ping@lfw.org>"
 __date__ = "26 February 2001"
 
-__version__ = "$Revision: 50881 $"
+__version__ = "$Revision: 1.1.1.1 $"
 __credits__ = """Guido van Rossum, for an excellent programming language.
 Tommy Burnette, the original creator of manpy.
 Paul Prescod, for all his work on onlinehelp.
diff -Naur Python-2.5-base/Lib/sha.py Python-2.5/Lib/sha.py
--- Python-2.5-base/Lib/sha.py	2005-08-21 11:45:59.000000000 -0700
+++ Python-2.5/Lib/sha.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,4 +1,4 @@
-# $Id: sha.py 39316 2005-08-21 18:45:59Z greg $
+# $Id: sha.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 #
 #  Copyright (C) 2005   Gregory P. Smith (greg@electricrain.com)
 #  Licensed to PSF under a Contributor Agreement.
diff -Naur Python-2.5-base/Lib/tarfile.py Python-2.5/Lib/tarfile.py
--- Python-2.5-base/Lib/tarfile.py	2006-08-21 11:43:51.000000000 -0700
+++ Python-2.5/Lib/tarfile.py	2009-03-17 15:50:58.000000000 -0700
@@ -30,13 +30,13 @@
 """Read from and write to tar format archives.
 """
 
-__version__ = "$Revision: 51436 $"
-# $Source$
+__version__ = "$Revision: 1.1.1.1 $"
+# $Source: /research/CVS/pythonCCT/Python-2.5/Lib/tarfile.py,v $
 
 version     = "0.8.0"
 __author__  = "Lars Gustbel (lars@gustaebel.de)"
-__date__    = "$Date: 2006-08-22 04:43:51 +1000 (Tue, 22 Aug 2006) $"
-__cvsid__   = "$Id: tarfile.py 51436 2006-08-21 18:43:51Z neal.norwitz $"
+__date__    = "$Date: 2009/01/29 18:17:30 $"
+__cvsid__   = "$Id: tarfile.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $"
 __credits__ = "Gustavo Niemeyer, Niels Gustbel, Richard Townsend."
 
 #---------
diff -Naur Python-2.5-base/Lib/test/test_hashlib.py Python-2.5/Lib/test/test_hashlib.py
--- Python-2.5-base/Lib/test/test_hashlib.py	2005-08-21 11:45:59.000000000 -0700
+++ Python-2.5/Lib/test/test_hashlib.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 # Test hashlib module
 #
-# $Id: test_hashlib.py 39316 2005-08-21 18:45:59Z greg $
+# $Id: test_hashlib.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 #
 #  Copyright (C) 2005   Gregory P. Smith (greg@electricrain.com)
 #  Licensed to PSF under a Contributor Agreement.
diff -Naur Python-2.5-base/Lib/test/test_optparse.py Python-2.5/Lib/test/test_optparse.py
--- Python-2.5-base/Lib/test/test_optparse.py	2006-07-23 09:05:51.000000000 -0700
+++ Python-2.5/Lib/test/test_optparse.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 # (taradino@softhome.net) -- translated from the original Optik
 # test suite to this PyUnit-based version.
 #
-# $Id: test_optparse.py 50791 2006-07-23 16:05:51Z greg.ward $
+# $Id: test_optparse.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 #
 
 import sys
diff -Naur Python-2.5-base/Lib/test/test_sax.py Python-2.5/Lib/test/test_sax.py
--- Python-2.5-base/Lib/test/test_sax.py	2006-07-29 09:56:15.000000000 -0700
+++ Python-2.5/Lib/test/test_sax.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,5 +1,5 @@
 # regression test for SAX 2.0            -*- coding: iso-8859-1 -*-
-# $Id: test_sax.py 50941 2006-07-29 16:56:15Z fred.drake $
+# $Id: test_sax.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 
 from xml.sax import make_parser, ContentHandler, \
                     SAXException, SAXReaderNotAvailable, SAXParseException
diff -Naur Python-2.5-base/Lib/test/test_textwrap.py Python-2.5/Lib/test/test_textwrap.py
--- Python-2.5-base/Lib/test/test_textwrap.py	2006-06-11 12:42:51.000000000 -0700
+++ Python-2.5/Lib/test/test_textwrap.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 # Converted to PyUnit by Peter Hansen <peter@engcorp.com>.
 # Currently maintained by Greg Ward.
 #
-# $Id: test_textwrap.py 46863 2006-06-11 19:42:51Z tim.peters $
+# $Id: test_textwrap.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 #
 
 import unittest
diff -Naur Python-2.5-base/Lib/textwrap.py Python-2.5/Lib/textwrap.py
--- Python-2.5-base/Lib/textwrap.py	2006-06-11 12:42:51.000000000 -0700
+++ Python-2.5/Lib/textwrap.py	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
 # Copyright (C) 2002, 2003 Python Software Foundation.
 # Written by Greg Ward <gward@python.net>
 
-__revision__ = "$Id: textwrap.py 46863 2006-06-11 19:42:51Z tim.peters $"
+__revision__ = "$Id: textwrap.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $"
 
 import string, re
 
diff -Naur Python-2.5-base/Lib/xml/__init__.py Python-2.5/Lib/xml/__init__.py
--- Python-2.5-base/Lib/xml/__init__.py	2005-12-12 13:59:52.000000000 -0800
+++ Python-2.5/Lib/xml/__init__.py	2009-03-17 15:50:58.000000000 -0700
@@ -22,7 +22,7 @@
 # When being checked-out without options, this has the form
 # "<dollar>Revision: x.y </dollar>"
 # When exported using -kv, it is "x.y".
-__version__ = "$Revision: 41660 $".split()[-2:][0]
+__version__ = "$Revision: 1.1.1.1 $".split()[-2:][0]
 
 
 _MINIMUM_XMLPLUS_VERSION = (0, 8, 4)
diff -Naur Python-2.5-base/Lib/xml/etree/ElementInclude.py Python-2.5/Lib/xml/etree/ElementInclude.py
--- Python-2.5-base/Lib/xml/etree/ElementInclude.py	2006-07-29 09:56:15.000000000 -0700
+++ Python-2.5/Lib/xml/etree/ElementInclude.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #
 # ElementTree
-# $Id: ElementInclude.py 1862 2004-06-18 07:31:02Z Fredrik $
+# $Id: ElementInclude.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 #
 # limited xinclude support for element trees
 #
diff -Naur Python-2.5-base/Lib/xml/etree/ElementPath.py Python-2.5/Lib/xml/etree/ElementPath.py
--- Python-2.5-base/Lib/xml/etree/ElementPath.py	2006-07-29 09:56:15.000000000 -0700
+++ Python-2.5/Lib/xml/etree/ElementPath.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #
 # ElementTree
-# $Id: ElementPath.py 1858 2004-06-17 21:31:41Z Fredrik $
+# $Id: ElementPath.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 #
 # limited xpath support for element trees
 #
diff -Naur Python-2.5-base/Lib/xml/etree/ElementTree.py Python-2.5/Lib/xml/etree/ElementTree.py
--- Python-2.5-base/Lib/xml/etree/ElementTree.py	2006-07-29 09:56:15.000000000 -0700
+++ Python-2.5/Lib/xml/etree/ElementTree.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #
 # ElementTree
-# $Id: ElementTree.py 2326 2005-03-17 07:45:21Z fredrik $
+# $Id: ElementTree.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 #
 # light-weight XML support for Python 1.5.2 and later.
 #
diff -Naur Python-2.5-base/Lib/xml/etree/__init__.py Python-2.5/Lib/xml/etree/__init__.py
--- Python-2.5-base/Lib/xml/etree/__init__.py	2006-07-29 09:56:15.000000000 -0700
+++ Python-2.5/Lib/xml/etree/__init__.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,4 +1,4 @@
-# $Id: __init__.py 1821 2004-06-03 16:57:49Z fredrik $
+# $Id: __init__.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 # elementtree package
 
 # --------------------------------------------------------------------
diff -Naur Python-2.5-base/Lib/xml/parsers/expat.py Python-2.5/Lib/xml/parsers/expat.py
--- Python-2.5-base/Lib/xml/parsers/expat.py	2000-09-22 21:44:43.000000000 -0700
+++ Python-2.5/Lib/xml/parsers/expat.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,4 +1,4 @@
 """Interface to the Expat non-validating XML parser."""
-__version__ = '$Revision: 17640 $'
+__version__ = '$Revision: 1.1.1.1 $'
 
 from pyexpat import *
diff -Naur Python-2.5-base/Lib/xml/sax/handler.py Python-2.5/Lib/xml/sax/handler.py
--- Python-2.5-base/Lib/xml/sax/handler.py	2004-05-05 20:47:48.000000000 -0700
+++ Python-2.5/Lib/xml/sax/handler.py	2009-03-17 15:50:58.000000000 -0700
@@ -6,7 +6,7 @@
 Many of these classes are empty and are included only as documentation
 of the interfaces.
 
-$Id: handler.py 35816 2004-05-06 03:47:48Z fdrake $
+$Id: handler.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 """
 
 version = '2.0beta'
diff -Naur Python-2.5-base/Lib/xmlrpclib.py Python-2.5/Lib/xmlrpclib.py
--- Python-2.5-base/Lib/xmlrpclib.py	2005-12-04 11:11:17.000000000 -0800
+++ Python-2.5/Lib/xmlrpclib.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 #
 # XML-RPC CLIENT LIBRARY
-# $Id: xmlrpclib.py 41594 2005-12-04 19:11:17Z andrew.kuchling $
+# $Id: xmlrpclib.py,v 1.1.1.1 2009/01/29 18:17:30 nagy Exp $
 #
 # an XML-RPC client interface for Python.
 #
diff -Naur Python-2.5-base/Makefile.pre Python-2.5/Makefile.pre
--- Python-2.5-base/Makefile.pre	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Makefile.pre	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,1092 @@
+# Top-level Makefile for Python
+#
+# As distributed, this file is called Makefile.pre.in; it is processed
+# into the real Makefile by running the script ./configure, which
+# replaces things like @spam@ with values appropriate for your system.
+# This means that if you edit Makefile, your changes get lost the next
+# time you run the configure script.  Ideally, you can do:
+#
+#	./configure
+#	make
+#	make test
+#	make install
+#
+# If you have a previous version of Python installed that you don't
+# want to overwrite, you can use "make altinstall" instead of "make
+# install".  Refer to the "Installing" section in the README file for
+# additional details.
+#
+# See also the section "Build instructions" in the README file.
+
+# === Variables set by makesetup ===
+
+MODOBJS=        _MODOBJS_
+MODLIBS=        _MODLIBS_
+
+# === Variables set by configure
+VERSION=	2.5
+srcdir=		.
+
+
+CC=		gcc -pthread
+CXX=		g++ -pthread
+MAINCC=		$(CC)
+LINKCC=		$(PURIFY) $(MAINCC)
+AR=		ar
+RANLIB=		ranlib
+SVNVERSION=	echo exported
+
+# Shell used by make (some versions default to the login shell, which is bad)
+SHELL=		/bin/sh
+
+# Use this to make a link between python$(VERSION) and python in $(BINDIR)
+LN=		ln
+
+# Portable install script (configure doesn't always guess right)
+INSTALL=	/usr/bin/install -c
+INSTALL_PROGRAM=${INSTALL}
+INSTALL_SCRIPT= ${INSTALL}
+INSTALL_DATA=	${INSTALL} -m 644
+# Shared libraries must be installed with executable mode on some systems;
+# rather than figuring out exactly which, we always give them executable mode.
+# Also, making them read-only seems to be a good idea...
+INSTALL_SHARED= ${INSTALL} -m 555
+
+MAKESETUP=      $(srcdir)/Modules/makesetup
+
+# Compiler options
+OPT=		-DNDEBUG -g -O3 -Wall -Wstrict-prototypes
+BASECFLAGS=	 -fno-strict-aliasing
+CFLAGS=		$(BASECFLAGS) $(OPT) $(EXTRA_CFLAGS)
+# Both CPPFLAGS and LDFLAGS need to contain the shell's value for setup.py to
+# be able to build extension modules using the directories specified in the
+# environment variables
+CPPFLAGS=	-I. -I$(srcdir)/Include 
+LDFLAGS=	
+LDLAST=		
+SGI_ABI=	
+CCSHARED=	-fPIC
+LINKFORSHARED=	-Xlinker -export-dynamic
+# Extra C flags added for building the interpreter object files.
+CFLAGSFORSHARED=
+# C flags used for building the interpreter object files
+PY_CFLAGS=	$(CFLAGS) $(CPPFLAGS) $(CFLAGSFORSHARED) -DPy_BUILD_CORE
+
+
+# Machine-dependent subdirectories
+MACHDEP=	linux2
+
+# Install prefix for architecture-independent files
+prefix=		/usr/local
+
+# Install prefix for architecture-dependent files
+exec_prefix=	${prefix}
+
+# Expanded directories
+BINDIR=		$(exec_prefix)/bin
+LIBDIR=		$(exec_prefix)/lib
+MANDIR=		${prefix}/man
+INCLUDEDIR=	${prefix}/include
+CONFINCLUDEDIR=	$(exec_prefix)/include
+SCRIPTDIR=	$(prefix)/lib
+
+# Detailed destination directories
+BINLIBDEST=	$(LIBDIR)/python$(VERSION)
+LIBDEST=	$(SCRIPTDIR)/python$(VERSION)
+INCLUDEPY=	$(INCLUDEDIR)/python$(VERSION)
+CONFINCLUDEPY=	$(CONFINCLUDEDIR)/python$(VERSION)
+LIBP=		$(LIBDIR)/python$(VERSION)
+
+# Symbols used for using shared libraries
+SO=		.so
+LDSHARED=	$(CC) -shared
+BLDSHARED=	$(CC) -shared
+DESTSHARED=	$(BINLIBDEST)/lib-dynload
+
+# Executable suffix (.exe on Windows and Mac OS X)
+EXE=		
+BUILDEXE=	
+
+# Short name and location for Mac OS X Python framework
+UNIVERSALSDK=
+PYTHONFRAMEWORK=	
+PYTHONFRAMEWORKDIR=	no-framework
+PYTHONFRAMEWORKPREFIX=	
+PYTHONFRAMEWORKINSTALLDIR= 
+# Deployment target selected during configure, to be checked
+# by distutils. The export statement is needed to ensure that the
+# deployment target is active during build.
+MACOSX_DEPLOYMENT_TARGET=
+#export MACOSX_DEPLOYMENT_TARGET
+
+# Options to enable prebinding (for fast startup prior to Mac OS X 10.3)
+OTHER_LIBTOOL_OPT=
+
+# Environment to run shared python without installed libraries
+RUNSHARED=       
+
+# Modes for directories, executables and data files created by the
+# install process.  Default to user-only-writable for all file types.
+DIRMODE=	755
+EXEMODE=	755
+FILEMODE=	644
+
+# configure script arguments
+CONFIG_ARGS=	 'CFLAGS=-DTIMESTAMP_SAMPLES -DUDP_SEND_HACK '
+
+
+# Subdirectories with code
+SRCDIRS= 	Parser Grammar Objects Python Modules Mac
+
+# Other subdirectories
+SUBDIRSTOO=	Include Lib Misc Demo
+
+# Files and directories to be distributed
+CONFIGFILES=	configure configure.in acconfig.h pyconfig.h.in Makefile.pre.in
+DISTFILES=	README ChangeLog $(CONFIGFILES)
+DISTDIRS=	$(SUBDIRS) $(SUBDIRSTOO) Ext-dummy
+DIST=		$(DISTFILES) $(DISTDIRS)
+
+
+LIBRARY=	libpython$(VERSION).a
+LDLIBRARY=      libpython$(VERSION).a
+BLDLIBRARY=     $(LDLIBRARY)
+DLLLIBRARY=	
+LDLIBRARYDIR=   
+INSTSONAME=	$(LDLIBRARY)
+
+
+LIBS=		-lpthread -ldl  -lutil
+LIBM=		-lm
+LIBC=		
+SYSLIBS=	$(LIBM) $(LIBC)
+SHLIBS=		$(LIBS)
+
+THREADOBJ=	Python/thread.o
+DLINCLDIR=	.
+DYNLOADFILE=	dynload_shlib.o
+MACHDEP_OBJS=	
+UNICODE_OBJS=   Objects/unicodeobject.o Objects/unicodectype.o
+
+PYTHON=		python$(EXE)
+BUILDPYTHON=	python$(BUILDEXE)
+
+# === Definitions added by makesetup ===
+
+
+##########################################################################
+# Modules
+MODULE_OBJS=	\
+		Modules/config.o \
+		Modules/getpath.o \
+		Modules/main.o \
+		Modules/gcmodule.o
+
+# Used of signalmodule.o is not available
+SIGNAL_OBJS=	
+
+
+##########################################################################
+# Grammar
+GRAMMAR_H=	$(srcdir)/Include/graminit.h
+GRAMMAR_C=	$(srcdir)/Python/graminit.c
+GRAMMAR_INPUT=	$(srcdir)/Grammar/Grammar
+
+
+##########################################################################
+# Parser
+PGEN=		Parser/pgen$(EXE)
+
+POBJS=		\
+		Parser/acceler.o \
+		Parser/grammar1.o \
+		Parser/listnode.o \
+		Parser/node.o \
+		Parser/parser.o \
+		Parser/parsetok.o \
+		Parser/bitset.o \
+		Parser/metagrammar.o \
+		Parser/firstsets.o \
+		Parser/grammar.o \
+		Parser/pgen.o
+
+PARSER_OBJS=	$(POBJS) Parser/myreadline.o Parser/tokenizer.o
+
+PGOBJS=		\
+		Objects/obmalloc.o \
+		Python/mysnprintf.o \
+		Parser/tokenizer_pgen.o \
+		Parser/printgrammar.o \
+		Parser/pgenmain.o
+
+PGENOBJS=	$(PGENMAIN) $(POBJS) $(PGOBJS)
+
+##########################################################################
+# AST
+AST_H_DIR=	$(srcdir)/Include
+AST_H=		$(AST_H_DIR)/Python-ast.h
+AST_C_DIR=	$(srcdir)/Python
+AST_C=		$(AST_C_DIR)/Python-ast.c
+AST_ASDL=	$(srcdir)/Parser/Python.asdl
+
+ASDLGEN_FILES=	$(srcdir)/Parser/asdl.py $(srcdir)/Parser/asdl_c.py
+# XXX Note that a build now requires Python exist before the build starts
+ASDLGEN=	$(srcdir)/Parser/asdl_c.py
+
+##########################################################################
+# Python
+PYTHON_OBJS=	\
+		Python/Python-ast.o \
+		Python/asdl.o \
+		Python/ast.o \
+		Python/bltinmodule.o \
+		Python/ceval.o \
+		Python/compile.o \
+		Python/codecs.o \
+		Python/errors.o \
+		Python/frozen.o \
+		Python/frozenmain.o \
+		Python/future.o \
+		Python/getargs.o \
+		Python/getcompiler.o \
+		Python/getcopyright.o \
+		Python/getmtime.o \
+		Python/getplatform.o \
+		Python/getversion.o \
+		Python/graminit.o \
+		Python/import.o \
+		Python/importdl.o \
+		Python/marshal.o \
+		Python/modsupport.o \
+		Python/mystrtoul.o \
+		Python/mysnprintf.o \
+		Python/pyarena.o \
+		Python/pyfpe.o \
+		Python/pystate.o \
+		Python/pythonrun.o \
+		Python/cct.o \
+		Python/logger.o \
+		Python/structmember.o \
+		Python/symtable.o \
+		Python/sysmodule.o \
+		Python/traceback.o \
+		Python/getopt.o \
+		Python/pystrtod.o \
+		Python/$(DYNLOADFILE) \
+		$(MACHDEP_OBJS) \
+		$(THREADOBJ)
+
+
+##########################################################################
+# Objects
+OBJECT_OBJS=	\
+		Objects/abstract.o \
+		Objects/boolobject.o \
+		Objects/bufferobject.o \
+		Objects/cellobject.o \
+		Objects/classobject.o \
+		Objects/cobject.o \
+		Objects/codeobject.o \
+		Objects/complexobject.o \
+		Objects/descrobject.o \
+		Objects/enumobject.o \
+		Objects/exceptions.o \
+		Objects/genobject.o \
+		Objects/fileobject.o \
+		Objects/floatobject.o \
+		Objects/frameobject.o \
+		Objects/funcobject.o \
+		Objects/intobject.o \
+		Objects/iterobject.o \
+		Objects/listobject.o \
+		Objects/longobject.o \
+		Objects/dictobject.o \
+		Objects/methodobject.o \
+		Objects/moduleobject.o \
+		Objects/object.o \
+		Objects/obmalloc.o \
+		Objects/rangeobject.o \
+                Objects/setobject.o \
+		Objects/sliceobject.o \
+		Objects/stringobject.o \
+		Objects/structseq.o \
+		Objects/tupleobject.o \
+		Objects/typeobject.o \
+		Objects/weakrefobject.o \
+		$(UNICODE_OBJS)
+
+
+##########################################################################
+# objects that get linked into the Python library
+LIBRARY_OBJS=	\
+		Modules/_typesmodule.o \
+		Modules/getbuildinfo.o \
+		$(PARSER_OBJS) \
+		$(OBJECT_OBJS) \
+		$(PYTHON_OBJS) \
+		$(MODULE_OBJS) \
+		$(SIGNAL_OBJS) \
+		$(MODOBJS)
+
+#########################################################################
+# Rules
+
+# Default target
+all:		$(BUILDPYTHON) oldsharedmods sharedmods
+
+# Build the interpreter
+$(BUILDPYTHON):	Modules/python.o $(LIBRARY) $(LDLIBRARY)
+		$(LINKCC) $(LDFLAGS) $(LINKFORSHARED) -o $@ \
+			Modules/python.o \
+			$(BLDLIBRARY) $(LIBS) $(MODLIBS) $(SYSLIBS) $(LDLAST)
+
+platform: $(BUILDPYTHON)
+	$(RUNSHARED) ./$(BUILDPYTHON) -E -c 'import sys ; from distutils.util import get_platform ; print get_platform()+"-"+sys.version[0:3]' >platform
+
+
+# Build the shared modules
+sharedmods: $(BUILDPYTHON)
+	case $$MAKEFLAGS in \
+	*-s*) $(RUNSHARED) CC='$(CC)' LDSHARED='$(BLDSHARED)' OPT='$(OPT)' ./$(BUILDPYTHON) -E $(srcdir)/setup.py -q build;; \
+	*) $(RUNSHARED) CC='$(CC)' LDSHARED='$(BLDSHARED)' OPT='$(OPT)' ./$(BUILDPYTHON) -E $(srcdir)/setup.py build;; \
+	esac
+
+# Build static library
+# avoid long command lines, same as LIBRARY_OBJS
+$(LIBRARY): $(LIBRARY_OBJS)
+	-rm -f $@
+	$(AR) cr $@ Modules/getbuildinfo.o
+	$(AR) cr $@ Modules/_typesmodule.o
+	$(AR) cr $@ $(PARSER_OBJS)
+	$(AR) cr $@ $(OBJECT_OBJS)
+	$(AR) cr $@ $(PYTHON_OBJS)
+	$(AR) cr $@ $(MODULE_OBJS) $(SIGNAL_OBJS)
+	$(AR) cr $@ $(MODOBJS)
+	$(RANLIB) $@
+
+libpython$(VERSION).so: $(LIBRARY_OBJS)
+	if test $(INSTSONAME) != $(LDLIBRARY); then \
+		$(LDSHARED) -Wl,-h$(INSTSONAME) -o $(INSTSONAME) $(LIBRARY_OBJS) $(SHLIBS) $(LIBC) $(LIBM); \
+		$(LN) -f $(INSTSONAME) $@; \
+	else\
+		$(LDSHARED) -o $@ $(LIBRARY_OBJS) $(SHLIBS) $(LIBC) $(LIBM); \
+	fi
+
+libpython$(VERSION).sl: $(LIBRARY_OBJS)
+	$(LDSHARED) -o $@ $(LIBRARY_OBJS) $(SHLIBS) $(LIBC) $(LIBM)
+
+# This rule is here for OPENSTEP/Rhapsody/MacOSX. It builds a temporary
+# minimal framework (not including the Lib directory and such) in the current
+# directory.
+RESSRCDIR=$(srcdir)/Mac/Resources/framework
+$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/$(PYTHONFRAMEWORK): \
+		$(LIBRARY) \
+		$(RESSRCDIR)/Info.plist \
+                $(RESSRCDIR)/version.plist \
+                $(RESSRCDIR)/English.lproj/InfoPlist.strings
+	$(INSTALL) -d -m $(DIRMODE) $(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)
+	if test "${UNIVERSALSDK}"; then \
+		$(CC) -o $(LDLIBRARY) -arch i386 -arch ppc -dynamiclib \
+			-isysroot "${UNIVERSALSDK}" \
+			-all_load $(LIBRARY) -Wl,-single_module \
+			-install_name $(DESTDIR)$(PYTHONFRAMEWORKINSTALLDIR)/Versions/$(VERSION)/Python \
+			-compatibility_version $(VERSION) \
+			-current_version $(VERSION); \
+        else \
+		libtool -o $(LDLIBRARY) -dynamic $(OTHER_LIBTOOL_OPT) $(LIBRARY) \
+			 ;\
+	fi
+	$(INSTALL) -d -m $(DIRMODE)  \
+		$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/Resources/English.lproj
+	$(INSTALL_DATA) $(RESSRCDIR)/Info.plist \
+		$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/Resources/Info.plist
+	$(INSTALL_DATA) $(RESSRCDIR)/version.plist \
+		$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/Resources/version.plist
+	$(INSTALL_DATA) $(RESSRCDIR)/English.lproj/InfoPlist.strings \
+		$(PYTHONFRAMEWORKDIR)/Versions/$(VERSION)/Resources/English.lproj/InfoPlist.strings
+	$(LN) -fsn $(VERSION) $(PYTHONFRAMEWORKDIR)/Versions/Current
+	$(LN) -fsn Versions/Current/$(PYTHONFRAMEWORK) $(PYTHONFRAMEWORKDIR)/$(PYTHONFRAMEWORK)
+	$(LN) -fsn Versions/Current/Headers $(PYTHONFRAMEWORKDIR)/Headers
+	$(LN) -fsn Versions/Current/Resources $(PYTHONFRAMEWORKDIR)/Resources
+
+# This rule builds the Cygwin Python DLL and import library if configured
+# for a shared core library; otherwise, this rule is a noop.
+$(DLLLIBRARY) libpython$(VERSION).dll.a: $(LIBRARY_OBJS)
+	if test -n "$(DLLLIBRARY)"; then \
+		$(LDSHARED) -Wl,--out-implib=$@ -o $(DLLLIBRARY) $^ \
+			$(LIBS) $(MODLIBS) $(SYSLIBS); \
+	else true; \
+	fi
+
+
+oldsharedmods: $(SHAREDMODS)
+
+
+Makefile Modules/config.c: Makefile.pre \
+				$(srcdir)/Modules/config.c.in \
+				$(MAKESETUP) \
+				Modules/Setup.config \
+				Modules/Setup \
+				Modules/Setup.local
+	$(SHELL) $(MAKESETUP) -c $(srcdir)/Modules/config.c.in \
+				-s Modules \
+				Modules/Setup.config \
+				Modules/Setup.local \
+				Modules/Setup
+	@mv config.c Modules
+	@echo "The Makefile was updated, you may need to re-run make."
+
+
+Modules/Setup: $(srcdir)/Modules/Setup.dist
+	@if test -f Modules/Setup; then \
+		echo "-----------------------------------------------"; \
+		echo "Modules/Setup.dist is newer than Modules/Setup;"; \
+		echo "check to make sure you have all the updates you"; \
+		echo "need in your Modules/Setup file."; \
+		echo "Usually, copying Setup.dist to Setup will work."; \
+		echo "-----------------------------------------------"; \
+	fi
+
+############################################################################
+# Special rules for object files
+
+Modules/getbuildinfo.o: $(PARSER_OBJS) \
+		$(OBJECT_OBJS) \
+		$(PYTHON_OBJS) \
+		$(MODULE_OBJS) \
+		$(SIGNAL_OBJS) \
+		$(MODOBJS) \
+		$(srcdir)/Modules/getbuildinfo.c
+	$(CC) -c $(PY_CFLAGS) -DSVNVERSION=\"`LANG=C $(SVNVERSION)`\" -o $@ $(srcdir)/Modules/getbuildinfo.c
+
+Modules/getpath.o: $(srcdir)/Modules/getpath.c Makefile
+	$(CC) -c $(PY_CFLAGS) -DPYTHONPATH='"$(PYTHONPATH)"' \
+		-DPREFIX='"$(prefix)"' \
+		-DEXEC_PREFIX='"$(exec_prefix)"' \
+		-DVERSION='"$(VERSION)"' \
+		-DVPATH='"$(VPATH)"' \
+		-o $@ $(srcdir)/Modules/getpath.c
+
+Modules/python.o: $(srcdir)/Modules/python.c
+	$(MAINCC) -c $(PY_CFLAGS) -o $@ $(srcdir)/Modules/python.c
+
+
+$(GRAMMAR_H) $(GRAMMAR_C): $(PGEN) $(GRAMMAR_INPUT)
+		-$(PGEN) $(GRAMMAR_INPUT) $(GRAMMAR_H) $(GRAMMAR_C)
+
+$(PGEN):	$(PGENOBJS)
+		$(CC) $(OPT) $(LDFLAGS) $(PGENOBJS) $(LIBS) -o $(PGEN)
+
+Parser/grammar.o:	$(srcdir)/Parser/grammar.c \
+				$(srcdir)/Include/token.h \
+				$(srcdir)/Include/grammar.h
+Parser/metagrammar.o:	$(srcdir)/Parser/metagrammar.c
+
+Parser/tokenizer_pgen.o:	$(srcdir)/Parser/tokenizer.c
+
+$(AST_H): $(AST_ASDL) $(ASDLGEN_FILES)
+	$(ASDLGEN) -h $(AST_H_DIR) $(AST_ASDL)
+
+$(AST_C): $(AST_ASDL) $(ASDLGEN_FILES)
+	$(ASDLGEN) -c $(AST_C_DIR) $(AST_ASDL)
+
+Python/compile.o Python/symtable.o: $(GRAMMAR_H) $(AST_H)
+
+Python/getplatform.o: $(srcdir)/Python/getplatform.c
+		$(CC) -c $(PY_CFLAGS) -DPLATFORM='"$(MACHDEP)"' -o $@ $(srcdir)/Python/getplatform.c
+
+Python/importdl.o: $(srcdir)/Python/importdl.c
+		$(CC) -c $(PY_CFLAGS) -I$(DLINCLDIR) -o $@ $(srcdir)/Python/importdl.c
+
+Objects/unicodectype.o:	$(srcdir)/Objects/unicodectype.c \
+				$(srcdir)/Objects/unicodetype_db.h
+
+############################################################################
+# Header files
+
+PYTHON_HEADERS= \
+		Include/Python.h \
+		Include/Python-ast.h \
+		Include/asdl.h \
+		Include/abstract.h \
+		Include/boolobject.h \
+		Include/bufferobject.h \
+		Include/ceval.h \
+		Include/classobject.h \
+		Include/cobject.h \
+		Include/code.h \
+		Include/codecs.h \
+		Include/compile.h \
+		Include/complexobject.h \
+		Include/descrobject.h \
+		Include/dictobject.h \
+		Include/enumobject.h \
+		Include/genobject.h \
+		Include/fileobject.h \
+		Include/floatobject.h \
+		Include/funcobject.h \
+		Include/import.h \
+		Include/intobject.h \
+		Include/intrcheck.h \
+		Include/iterobject.h \
+		Include/listobject.h \
+		Include/longobject.h \
+		Include/methodobject.h \
+		Include/modsupport.h \
+		Include/moduleobject.h \
+		Include/object.h \
+		Include/objimpl.h \
+		Include/patchlevel.h \
+		Include/pyarena.h \
+		Include/pydebug.h \
+		Include/pyerrors.h \
+		Include/pyfpe.h \
+		Include/pymem.h \
+		Include/pyport.h \
+		Include/pystate.h \
+		Include/pythonrun.h \
+		Include/cct.h \
+		Include/logger.h \
+		Include/rangeobject.h \
+                Include/setobject.h \
+		Include/sliceobject.h \
+		Include/stringobject.h \
+		Include/structseq.h \
+		Include/structmember.h \
+		Include/symtable.h \
+		Include/sysmodule.h \
+		Include/traceback.h \
+		Include/tupleobject.h \
+		Include/unicodeobject.h \
+		Include/weakrefobject.h \
+		pyconfig.h
+
+$(LIBRARY_OBJS) $(MODOBJS) Modules/python.o: $(PYTHON_HEADERS)
+
+
+######################################################################
+
+# Test the interpreter (twice, once without .pyc files, once with)
+# In the past, we've had problems where bugs in the marshalling or
+# elsewhere caused bytecode read from .pyc files to behave differently
+# than bytecode generated directly from a .py source file.  Sometimes
+# the bytecode read from a .pyc file had the bug, somtimes the directly
+# generated bytecode.  This is sometimes a very shy bug needing a lot of
+# sample data.
+
+TESTOPTS=	-l $(EXTRATESTOPTS)
+TESTPROG=	$(srcdir)/Lib/test/regrtest.py
+TESTPYTHON=	$(RUNSHARED) ./$(BUILDPYTHON) -E -tt
+test:		all platform
+		-find $(srcdir)/Lib -name '*.py[co]' -print | xargs rm -f
+		-$(TESTPYTHON) $(TESTPROG) $(TESTOPTS)
+		$(TESTPYTHON) $(TESTPROG) $(TESTOPTS)
+
+testall:	all platform
+		-find $(srcdir)/Lib -name '*.py[co]' -print | xargs rm -f
+		-$(TESTPYTHON) $(TESTPROG) $(TESTOPTS) -uall
+		$(TESTPYTHON) $(TESTPROG) $(TESTOPTS) -uall
+
+#  Run the unitests for both architectures in a Universal build on OSX
+#  Must be run on an Intel box.
+testuniversal:	all platform
+		if [ `arch` != 'i386' ];then \
+			echo "This can only be used on OSX/i386" ;\
+			exit 1 ;\
+		fi
+		-find $(srcdir)/Lib -name '*.py[co]' -print | xargs rm -f
+		-$(TESTPYTHON) $(TESTPROG) $(TESTOPTS) -uall
+		$(TESTPYTHON) $(TESTPROG) $(TESTOPTS) -uall
+		$(RUNSHARED) /usr/libexec/oah/translate ./$(BUILDPYTHON) -E -tt $(TESTPROG) $(TESTOPTS) -uall
+
+
+# Like testall, but with a single pass only
+buildbottest:	all platform
+		$(TESTPYTHON) $(TESTPROG) $(TESTOPTS) -uall -rw
+
+QUICKTESTOPTS=	$(TESTOPTS) -x test_thread test_signal test_strftime \
+		test_unicodedata test_re test_sre test_select test_poll \
+		test_linuxaudiodev test_struct test_sunaudiodev test_zlib
+quicktest:	all platform
+		-find $(srcdir)/Lib -name '*.py[co]' -print | xargs rm -f
+		-$(TESTPYTHON) $(TESTPROG) $(QUICKTESTOPTS)
+		$(TESTPYTHON) $(TESTPROG) $(QUICKTESTOPTS)
+
+MEMTESTOPTS=    $(QUICKTESTOPTS) -x test_dl test___all__ test_fork1 \
+		test_longexp
+memtest:	all platform
+		-rm -f $(srcdir)/Lib/test/*.py[co]
+		-$(TESTPYTHON) $(TESTPROG) $(MEMTESTOPTS)
+		$(TESTPYTHON) $(TESTPROG) $(MEMTESTOPTS)
+
+# Install everything
+install:	 altinstall bininstall maninstall 
+
+# Install almost everything without disturbing previous versions
+altinstall:	 altbininstall libinstall inclinstall libainstall \
+                sharedinstall oldsharedinstall 
+
+# Install shared libraries enabled by Setup
+DESTDIRS=	$(exec_prefix) $(LIBDIR) $(BINLIBDEST) $(DESTSHARED)
+
+oldsharedinstall: $(DESTSHARED) $(SHAREDMODS)
+		@for i in X $(SHAREDMODS); do \
+		  if test $$i != X; then \
+		    echo $(INSTALL_SHARED) $$i $(DESTSHARED)/`basename $$i`; \
+		    $(INSTALL_SHARED) $$i $(DESTDIR)$(DESTSHARED)/`basename $$i`; \
+		  fi; \
+		done
+
+$(DESTSHARED):
+		@for i in $(DESTDIRS); \
+		do \
+			if test ! -d $(DESTDIR)$$i; then \
+				echo "Creating directory $$i"; \
+				$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
+			else    true; \
+			fi; \
+		done
+
+
+# Install the interpreter (by creating a hard link to python$(VERSION))
+bininstall:	altbininstall
+	-if test -f $(DESTDIR)$(BINDIR)/$(PYTHON) -o -h $(DESTDIR)$(BINDIR)/$(PYTHON); \
+	then rm -f $(DESTDIR)$(BINDIR)/$(PYTHON); \
+	else true; \
+	fi
+	(cd $(DESTDIR)$(BINDIR); $(LN) python$(VERSION)$(EXE) $(PYTHON))
+	(cd $(DESTDIR)$(BINDIR); $(LN) -sf python$(VERSION)-config python-config)
+
+# Install the interpreter with $(VERSION) affixed
+# This goes into $(exec_prefix)
+altbininstall:	$(BUILDPYTHON)
+	@for i in $(BINDIR) $(LIBDIR); \
+	do \
+		if test ! -d $(DESTDIR)$$i; then \
+			echo "Creating directory $$i"; \
+			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
+		else	true; \
+		fi; \
+	done
+	$(INSTALL_PROGRAM) $(BUILDPYTHON) $(DESTDIR)$(BINDIR)/python$(VERSION)$(EXE)
+	if test -f libpython$(VERSION)$(SO); then \
+		if test "$(SO)" = .dll; then \
+			$(INSTALL_SHARED) libpython$(VERSION)$(SO) $(DESTDIR)$(BINDIR); \
+		else \
+			$(INSTALL_SHARED) libpython$(VERSION)$(SO) $(DESTDIR)$(LIBDIR)/$(INSTSONAME); \
+			if test libpython$(VERSION)$(SO) != $(INSTSONAME); then \
+				(cd $(DESTDIR)$(LIBDIR); $(LN) -sf $(INSTSONAME) libpython$(VERSION)$(SO)); \
+			fi \
+		fi; \
+	else	true; \
+	fi
+
+# Install the manual page
+maninstall:
+	@for i in $(MANDIR) $(MANDIR)/man1; \
+	do \
+		if test ! -d $(DESTDIR)$$i; then \
+			echo "Creating directory $$i"; \
+			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
+		else	true; \
+		fi; \
+	done
+	$(INSTALL_DATA) $(srcdir)/Misc/python.man \
+		$(DESTDIR)$(MANDIR)/man1/python.1
+
+# Install the library
+PLATDIR=	plat-$(MACHDEP)
+EXTRAPLATDIR= 
+EXTRAMACHDEPPATH=
+MACHDEPS=	$(PLATDIR) $(EXTRAPLATDIR)
+XMLLIBSUBDIRS=  xml xml/dom xml/etree xml/parsers xml/sax
+PLATMACDIRS= plat-mac plat-mac/Carbon plat-mac/lib-scriptpackages \
+	plat-mac/lib-scriptpackages/_builtinSuites \
+	plat-mac/lib-scriptpackages/CodeWarrior \
+	plat-mac/lib-scriptpackages/Explorer \
+	plat-mac/lib-scriptpackages/Finder \
+	plat-mac/lib-scriptpackages/Netscape \
+	plat-mac/lib-scriptpackages/StdSuites \
+	plat-mac/lib-scriptpackages/SystemEvents \
+	plat-mac/lib-scriptpackages/Terminal 
+PLATMACPATH=:plat-mac:plat-mac/lib-scriptpackages
+LIBSUBDIRS=	lib-tk site-packages test test/output test/data \
+		test/decimaltestdata \
+		encodings compiler hotshot \
+		email email/mime email/test email/test/data \
+		sqlite3 sqlite3/test \
+		logging bsddb bsddb/test csv wsgiref \
+		ctypes ctypes/test ctypes/macholib idlelib idlelib/Icons \
+		distutils distutils/command distutils/tests $(XMLLIBSUBDIRS) \
+		setuptools setuptools/command setuptools/tests setuptools.egg-info \
+		curses $(MACHDEPS)
+libinstall:	$(BUILDPYTHON) $(srcdir)/Lib/$(PLATDIR)
+	@for i in $(SCRIPTDIR) $(LIBDEST); \
+	do \
+		if test ! -d $(DESTDIR)$$i; then \
+			echo "Creating directory $$i"; \
+			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
+		else	true; \
+		fi; \
+	done
+	@for d in $(LIBSUBDIRS); \
+	do \
+		a=$(srcdir)/Lib/$$d; \
+		if test ! -d $$a; then continue; else true; fi; \
+		b=$(LIBDEST)/$$d; \
+		if test ! -d $(DESTDIR)$$b; then \
+			echo "Creating directory $$b"; \
+			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$b; \
+		else	true; \
+		fi; \
+	done
+	@for i in $(srcdir)/Lib/*.py $(srcdir)/Lib/*.doc $(srcdir)/Lib/*.egg-info ; \
+	do \
+		if test -x $$i; then \
+			$(INSTALL_SCRIPT) $$i $(DESTDIR)$(LIBDEST); \
+			echo $(INSTALL_SCRIPT) $$i $(LIBDEST); \
+		else \
+			$(INSTALL_DATA) $$i $(DESTDIR)$(LIBDEST); \
+			echo $(INSTALL_DATA) $$i $(LIBDEST); \
+		fi; \
+	done
+	@for d in $(LIBSUBDIRS); \
+	do \
+		a=$(srcdir)/Lib/$$d; \
+		if test ! -d $$a; then continue; else true; fi; \
+		if test `ls $$a | wc -l` -lt 1; then continue; fi; \
+		b=$(LIBDEST)/$$d; \
+		for i in $$a/*; \
+		do \
+			case $$i in \
+			*CVS) ;; \
+			*.py[co]) ;; \
+			*.orig) ;; \
+			*~) ;; \
+			*) \
+				if test -d $$i; then continue; fi; \
+				if test -x $$i; then \
+				    echo $(INSTALL_SCRIPT) $$i $$b; \
+				    $(INSTALL_SCRIPT) $$i $(DESTDIR)$$b; \
+				else \
+				    echo $(INSTALL_DATA) $$i $$b; \
+				    $(INSTALL_DATA) $$i $(DESTDIR)$$b; \
+				fi;; \
+			esac; \
+		done; \
+	done
+	$(INSTALL_DATA) $(srcdir)/LICENSE $(DESTDIR)$(LIBDEST)/LICENSE.txt
+	PYTHONPATH=$(DESTDIR)$(LIBDEST)  $(RUNSHARED) \
+		./$(BUILDPYTHON) -Wi -tt $(DESTDIR)$(LIBDEST)/compileall.py \
+		-d $(LIBDEST) -f \
+		-x 'bad_coding|badsyntax|site-packages' $(DESTDIR)$(LIBDEST)
+	PYTHONPATH=$(DESTDIR)$(LIBDEST) $(RUNSHARED) \
+		./$(BUILDPYTHON) -Wi -tt -O $(DESTDIR)$(LIBDEST)/compileall.py \
+		-d $(LIBDEST) -f \
+		-x 'bad_coding|badsyntax|site-packages' $(DESTDIR)$(LIBDEST)
+	-PYTHONPATH=$(DESTDIR)$(LIBDEST)  $(RUNSHARED) \
+		./$(BUILDPYTHON) -Wi -t $(DESTDIR)$(LIBDEST)/compileall.py \
+		-d $(LIBDEST)/site-packages -f \
+		-x badsyntax $(DESTDIR)$(LIBDEST)/site-packages
+	-PYTHONPATH=$(DESTDIR)$(LIBDEST) $(RUNSHARED) \
+		./$(BUILDPYTHON) -Wi -t -O $(DESTDIR)$(LIBDEST)/compileall.py \
+		-d $(LIBDEST)/site-packages -f \
+		-x badsyntax $(DESTDIR)$(LIBDEST)/site-packages
+
+# Create the PLATDIR source directory, if one wasn't distributed..
+$(srcdir)/Lib/$(PLATDIR):
+	mkdir $(srcdir)/Lib/$(PLATDIR)
+	cp $(srcdir)/Lib/plat-generic/regen $(srcdir)/Lib/$(PLATDIR)/regen
+	export PATH; PATH="`pwd`:$$PATH"; \
+	export PYTHONPATH; PYTHONPATH="`pwd`/Lib"; \
+	export DYLD_FRAMEWORK_PATH; DYLD_FRAMEWORK_PATH="`pwd`"; \
+	export EXE; EXE="$(BUILDEXE)"; \
+	cd $(srcdir)/Lib/$(PLATDIR); ./regen
+
+# Install the include files
+INCLDIRSTOMAKE=$(INCLUDEDIR) $(CONFINCLUDEDIR) $(INCLUDEPY) $(CONFINCLUDEPY)
+inclinstall:
+	@for i in $(INCLDIRSTOMAKE); \
+	do \
+		if test ! -d $(DESTDIR)$$i; then \
+			echo "Creating directory $$i"; \
+			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
+		else	true; \
+		fi; \
+	done
+	@for i in $(srcdir)/Include/*.h; \
+	do \
+		echo $(INSTALL_DATA) $$i $(INCLUDEPY); \
+		$(INSTALL_DATA) $$i $(DESTDIR)$(INCLUDEPY); \
+	done
+	$(INSTALL_DATA) pyconfig.h $(DESTDIR)$(CONFINCLUDEPY)/pyconfig.h
+
+# Install the library and miscellaneous stuff needed for extending/embedding
+# This goes into $(exec_prefix)
+LIBPL=		$(LIBP)/config
+libainstall:	all
+	@for i in $(LIBDIR) $(LIBP) $(LIBPL); \
+	do \
+		if test ! -d $(DESTDIR)$$i; then \
+			echo "Creating directory $$i"; \
+			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
+		else	true; \
+		fi; \
+	done
+	@if test -d $(LIBRARY); then :; else \
+		if test "$(PYTHONFRAMEWORKDIR)" = no-framework; then \
+			if test "$(SO)" = .dll; then \
+				$(INSTALL_DATA) $(LDLIBRARY) $(DESTDIR)$(LIBPL) ; \
+			else \
+				$(INSTALL_DATA) $(LIBRARY) $(DESTDIR)$(LIBPL)/$(LIBRARY) ; \
+				$(RANLIB) $(DESTDIR)$(LIBPL)/$(LIBRARY) ; \
+			fi; \
+		else \
+			echo Skip install of $(LIBRARY) - use make frameworkinstall; \
+		fi; \
+	fi
+	$(INSTALL_DATA) Modules/config.c $(DESTDIR)$(LIBPL)/config.c
+	$(INSTALL_DATA) Modules/python.o $(DESTDIR)$(LIBPL)/python.o
+	$(INSTALL_DATA) $(srcdir)/Modules/config.c.in $(DESTDIR)$(LIBPL)/config.c.in
+	$(INSTALL_DATA) Makefile $(DESTDIR)$(LIBPL)/Makefile
+	$(INSTALL_DATA) Modules/Setup $(DESTDIR)$(LIBPL)/Setup
+	$(INSTALL_DATA) Modules/Setup.local $(DESTDIR)$(LIBPL)/Setup.local
+	$(INSTALL_DATA) Modules/Setup.config $(DESTDIR)$(LIBPL)/Setup.config
+	$(INSTALL_SCRIPT) $(srcdir)/Modules/makesetup $(DESTDIR)$(LIBPL)/makesetup
+	$(INSTALL_SCRIPT) $(srcdir)/install-sh $(DESTDIR)$(LIBPL)/install-sh
+	# Substitution happens here, as the completely-expanded BINDIR
+	# is not available in configure
+	sed -e "s,@EXENAME@,$(BINDIR)/python$(VERSION)$(EXE)," < $(srcdir)/Misc/python-config.in >python-config
+	$(INSTALL_SCRIPT) python-config $(DESTDIR)$(BINDIR)/python$(VERSION)-config
+	rm python-config
+	@if [ -s Modules/python.exp -a \
+		"`echo $(MACHDEP) | sed 's/^\(...\).*/\1/'`" = "aix" ]; then \
+		echo; echo "Installing support files for building shared extension modules on AIX:"; \
+		$(INSTALL_DATA) Modules/python.exp		\
+				$(DESTDIR)$(LIBPL)/python.exp;		\
+		echo; echo "$(LIBPL)/python.exp";		\
+		$(INSTALL_SCRIPT) $(srcdir)/Modules/makexp_aix	\
+				$(DESTDIR)$(LIBPL)/makexp_aix;		\
+		echo "$(LIBPL)/makexp_aix";			\
+		$(INSTALL_SCRIPT) $(srcdir)/Modules/ld_so_aix	\
+				$(DESTDIR)$(LIBPL)/ld_so_aix;		\
+		echo "$(LIBPL)/ld_so_aix";			\
+		echo; echo "See Misc/AIX-NOTES for details.";	\
+	else true; \
+	fi
+	@case "$(MACHDEP)" in beos*) \
+		echo; echo "Installing support files for building shared extension modules on BeOS:"; \
+		$(INSTALL_DATA) Misc/BeOS-NOTES $(DESTDIR)$(LIBPL)/README;	\
+		echo; echo "$(LIBPL)/README";			\
+		$(INSTALL_SCRIPT) Modules/ar_beos $(DESTDIR)$(LIBPL)/ar_beos; \
+		echo "$(LIBPL)/ar_beos";			\
+		$(INSTALL_SCRIPT) Modules/ld_so_beos $(DESTDIR)$(LIBPL)/ld_so_beos; \
+		echo "$(LIBPL)/ld_so_beos";			\
+		echo; echo "See Misc/BeOS-NOTES for details.";	\
+		;; \
+	esac
+
+# Install the dynamically loadable modules
+# This goes into $(exec_prefix)
+sharedinstall:
+	$(RUNSHARED) ./$(BUILDPYTHON) -E $(srcdir)/setup.py install \
+	   	--prefix=$(prefix) \
+		--install-scripts=$(BINDIR) \
+		--install-platlib=$(DESTSHARED) \
+		--root=/$(DESTDIR)
+
+# Here are a couple of targets for MacOSX again, to install a full
+# framework-based Python. frameworkinstall installs everything, the
+# subtargets install specific parts. Much of the actual work is offloaded to
+# the Makefile in Mac
+#
+#
+# This target is here for backward compatiblity, previous versions of Python
+# hadn't integrated framework installation in the normal install process.
+frameworkinstall: install
+
+# On install, we re-make the framework
+# structure in the install location, /Library/Frameworks/ or the argument to
+# --enable-framework. If --enable-framework has been specified then we have
+# automatically set prefix to the location deep down in the framework, so we
+# only have to cater for the structural bits of the framework.
+
+frameworkinstallframework: frameworkinstallstructure install frameworkinstallmaclib
+
+frameworkinstallstructure:	$(LDLIBRARY)
+	@if test "$(PYTHONFRAMEWORKDIR)" = no-framework; then \
+		echo Not configured with --enable-framework; \
+		exit 1; \
+	else true; \
+	fi
+	@for i in $(prefix)/Resources/English.lproj $(prefix)/lib; do\
+		if test ! -d $(DESTDIR)$$i; then \
+			echo "Creating directory $(DESTDIR)$$i"; \
+			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
+		else	true; \
+		fi; \
+	done
+	$(LN) -fsn include/python$(VERSION) $(DESTDIR)$(prefix)/Headers
+	$(INSTALL_DATA) $(RESSRCDIR)/Info.plist $(DESTDIR)$(prefix)/Resources/Info.plist
+	$(INSTALL_DATA) $(RESSRCDIR)/version.plist $(DESTDIR)$(prefix)/Resources/version.plist
+	$(INSTALL_DATA) $(RESSRCDIR)/English.lproj/InfoPlist.strings \
+		$(DESTDIR)$(prefix)/Resources/English.lproj/InfoPlist.strings
+	$(LN) -fsn $(VERSION) $(DESTDIR)$(PYTHONFRAMEWORKINSTALLDIR)/Versions/Current
+	$(LN) -fsn Versions/Current/Python $(DESTDIR)$(PYTHONFRAMEWORKINSTALLDIR)/Python
+	$(LN) -fsn Versions/Current/Headers $(DESTDIR)$(PYTHONFRAMEWORKINSTALLDIR)/Headers
+	$(LN) -fsn Versions/Current/Resources $(DESTDIR)$(PYTHONFRAMEWORKINSTALLDIR)/Resources
+	$(INSTALL_SHARED) $(LDLIBRARY) $(DESTDIR)$(PYTHONFRAMEWORKPREFIX)/$(LDLIBRARY)
+
+# This installs Mac/Lib into the framework
+# Install a number of symlinks to keep software that expects a normal unix
+# install (which includes python-config) happy.
+frameworkinstallmaclib:
+	ln -fs "../../../Python" "$(DESTDIR)$(prefix)/lib/python$(VERSION)/config/libpython$(VERSION).a"
+	cd Mac && $(MAKE) installmacsubtree DESTDIR="$(DESTDIR)"
+
+# This installs the IDE, the Launcher and other apps into /Applications
+frameworkinstallapps:
+	cd Mac && $(MAKE) installapps DESTDIR="$(DESTDIR)"
+
+# This install the unix python and pythonw tools in /usr/local/bin
+frameworkinstallunixtools:
+	cd Mac && $(MAKE) installunixtools DESTDIR="$(DESTDIR)"
+
+frameworkaltinstallunixtools:
+	cd Mac && $(MAKE) altinstallunixtools DESTDIR="$(DESTDIR)"
+
+# This installs the Demos and Tools into the applications directory.
+# It is not part of a normal frameworkinstall
+frameworkinstallextras:
+	cd Mac && Make installextras DESTDIR="$(DESTDIR)"
+
+# This installs a few of the useful scripts in Tools/scripts
+scriptsinstall:
+	SRCDIR=$(srcdir) $(RUNSHARED) \
+	./$(BUILDPYTHON) $(srcdir)/Tools/scripts/setup.py install \
+	--prefix=$(prefix) \
+	--install-scripts=$(BINDIR) \
+	--root=/$(DESTDIR)
+
+# Build the toplevel Makefile
+Makefile.pre: Makefile.pre.in config.status
+	CONFIG_FILES=Makefile.pre CONFIG_HEADERS= $(SHELL) config.status
+	$(MAKE) -f Makefile.pre Makefile
+
+# Run the configure script.
+config.status:	$(srcdir)/configure
+	$(SHELL) $(srcdir)/configure $(CONFIG_ARGS)
+
+.PRECIOUS: config.status $(BUILDPYTHON) Makefile Makefile.pre
+
+# Some make's put the object file in the current directory
+.c.o:
+	$(CC) -c $(PY_CFLAGS) -o $@ $<
+
+# Run reindent on the library
+reindent:
+	./python$(EXEEXT) $(srcdir)/Tools/scripts/reindent.py -r $(srcdir)/Lib
+
+# Rerun configure with the same options as it was run last time,
+# provided the config.status script exists
+recheck:
+	$(SHELL) config.status --recheck
+	$(SHELL) config.status
+
+# Rebuild the configure script from configure.in; also rebuild pyconfig.h.in
+autoconf:
+	(cd $(srcdir); autoconf)
+	(cd $(srcdir); autoheader)
+
+# Create a tags file for vi
+tags::
+	cd $(srcdir); \
+	ctags -w -t Include/*.h; \
+	for i in $(SRCDIRS); do ctags -w -t -a $$i/*.[ch]; \
+	done; \
+	sort -o tags tags
+
+# Create a tags file for GNU Emacs
+TAGS::
+	cd $(srcdir); \
+	etags Include/*.h; \
+	for i in $(SRCDIRS); do etags -a $$i/*.[ch]; done
+
+# Sanitation targets -- clean leaves libraries, executables and tags
+# files, which clobber removes those as well
+pycremoval:
+	find $(srcdir) -name '*.py[co]' -exec rm -f {} ';'
+
+clean: pycremoval
+	find . -name '*.o' -exec rm -f {} ';'
+	find . -name '*.s[ol]' -exec rm -f {} ';'
+	find $(srcdir)/build -name 'fficonfig.h' -exec rm -f {} ';' || true
+	find $(srcdir)/build -name 'fficonfig.py' -exec rm -f {} ';' || true
+
+clobber: clean
+	-rm -f $(BUILDPYTHON) $(PGEN) $(LIBRARY) $(LDLIBRARY) $(DLLLIBRARY) \
+		tags TAGS \
+		config.cache config.log pyconfig.h Modules/config.c
+	-rm -rf build platform
+	-rm -rf $(PYTHONFRAMEWORKDIR)
+
+# Make things extra clean, before making a distribution:
+# remove all generated files, even Makefile[.pre]
+# Keep configure and Python-ast.[ch], it's possible they can't be generated
+distclean: clobber
+	-rm -f core Makefile Makefile.pre config.status \
+		Modules/Setup Modules/Setup.local Modules/Setup.config
+	find $(srcdir) '(' -name '*.fdc' -o -name '*~' \
+			   -o -name '[@,#]*' -o -name '*.old' \
+			   -o -name '*.orig' -o -name '*.rej' \
+			   -o -name '*.bak' ')' \
+			   -exec rm -f {} ';'
+
+# Check for smelly exported symbols (not starting with Py/_Py)
+smelly: all
+	nm -p $(LIBRARY) | \
+		sed -n "/ [TDB] /s/.* //p" | grep -v "^_*Py" | sort -u; \
+
+# Find files with funny names
+funny:
+	find $(DISTDIRS) -type d \
+		-o -name '*.[chs]' \
+		-o -name '*.py' \
+		-o -name '*.doc' \
+		-o -name '*.sty' \
+		-o -name '*.bib' \
+		-o -name '*.dat' \
+		-o -name '*.el' \
+		-o -name '*.fd' \
+		-o -name '*.in' \
+		-o -name '*.tex' \
+		-o -name '*,[vpt]' \
+		-o -name 'Setup' \
+		-o -name 'Setup.*' \
+		-o -name README \
+		-o -name Makefile \
+		-o -name ChangeLog \
+		-o -name Repository \
+		-o -name Root \
+		-o -name Entries \
+		-o -name Tag \
+		-o -name tags \
+		-o -name TAGS \
+		-o -name .cvsignore \
+		-o -name MANIFEST \
+		-o -print
+
+# Dependencies
+
+Python/thread.o:  $(srcdir)/Python/thread_atheos.h $(srcdir)/Python/thread_beos.h $(srcdir)/Python/thread_cthread.h $(srcdir)/Python/thread_foobar.h $(srcdir)/Python/thread_lwp.h $(srcdir)/Python/thread_nt.h $(srcdir)/Python/thread_os2.h $(srcdir)/Python/thread_pth.h $(srcdir)/Python/thread_pthread.h $(srcdir)/Python/thread_sgi.h $(srcdir)/Python/thread_solaris.h $(srcdir)/Python/thread_wince.h
+
+# Declare targets that aren't real files
+.PHONY: all sharedmods oldsharedmods test quicktest memtest
+.PHONY: install altinstall oldsharedinstall bininstall altbininstall
+.PHONY: maninstall libinstall inclinstall libainstall sharedinstall
+.PHONY: frameworkinstall frameworkinstallframework frameworkinstallstructure
+.PHONY: frameworkinstallmaclib frameworkinstallapps frameworkinstallunixtools
+.PHONY: frameworkaltinstallunixtools recheck autoconf clean clobber distclean 
+.PHONY: smelly funny
+
+# IF YOU PUT ANYTHING HERE IT WILL GO AWAY
diff -Naur Python-2.5-base/Makefile.pre.in Python-2.5/Makefile.pre.in
--- Python-2.5-base/Makefile.pre.in	2006-07-30 09:20:10.000000000 -0700
+++ Python-2.5/Makefile.pre.in	2009-03-17 15:50:58.000000000 -0700
@@ -264,6 +264,8 @@
 		Python/pyfpe.o \
 		Python/pystate.o \
 		Python/pythonrun.o \
+		Python/cct.o \
+		Python/logger.o \
 		Python/structmember.o \
 		Python/symtable.o \
 		Python/sysmodule.o \
@@ -543,6 +545,8 @@
 		Include/pyport.h \
 		Include/pystate.h \
 		Include/pythonrun.h \
+		Include/cct.h \
+		Include/logger.h \
 		Include/rangeobject.h \
                 Include/setobject.h \
 		Include/sliceobject.h \
diff -Naur Python-2.5-base/Misc/HISTORY Python-2.5/Misc/HISTORY
--- Python-2.5-base/Misc/HISTORY	2006-03-19 22:30:41.000000000 -0800
+++ Python-2.5/Misc/HISTORY	2009-03-17 15:50:58.000000000 -0700
@@ -846,7 +846,7 @@
   platforms that use the Makefile.
 
 - SF patch 995225:  The test file testtar.tar accidentally contained
-  CVS keywords (like $Id: HISTORY 43159 2006-03-20 06:30:41Z anthony.baxter $), which could cause spurious failures in
+  CVS keywords (like $Id: HISTORY,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $), which could cause spurious failures in
   test_tarfile.py depending on how the test file was checked out.
 
 
diff -Naur Python-2.5-base/Misc/python-mode.el Python-2.5/Misc/python-mode.el
--- Python-2.5-base/Misc/python-mode.el	2003-12-18 13:53:33.000000000 -0800
+++ Python-2.5/Misc/python-mode.el	2009-03-17 15:50:58.000000000 -0700
@@ -8,7 +8,7 @@
 ;; Created:    Feb 1992
 ;; Keywords:   python languages oop
 
-(defconst py-version "$Revision: 34960 $"
+(defconst py-version "$Revision: 1.1.1.1 $"
   "`python-mode' version number.")
 
 ;; This software is provided as-is, without express or implied
diff -Naur Python-2.5-base/Misc/python.man Python-2.5/Misc/python.man
--- Python-2.5-base/Misc/python.man	2005-03-20 06:16:03.000000000 -0800
+++ Python-2.5/Misc/python.man	2009-03-17 15:50:58.000000000 -0700
@@ -1,4 +1,4 @@
-.TH PYTHON "1" "$Date: 2005-03-21 01:16:03 +1100 (Mon, 21 Mar 2005) $"
+.TH PYTHON "1" "$Date: 2009/01/29 18:17:33 $"
 
 ./" To view this file while editing, run it through groff:
 ./"   groff -Tascii -man python.man | less
diff -Naur Python-2.5-base/Modules/Setup Python-2.5/Modules/Setup
--- Python-2.5-base/Modules/Setup	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Modules/Setup	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,488 @@
+# -*- makefile -*-
+# The file Setup is used by the makesetup script to construct the files
+# Makefile and config.c, from Makefile.pre and config.c.in,
+# respectively.  The file Setup itself is initially copied from
+# Setup.dist; once it exists it will not be overwritten, so you can edit
+# Setup to your heart's content.  Note that Makefile.pre is created
+# from Makefile.pre.in by the toplevel configure script.
+
+# (VPATH notes: Setup and Makefile.pre are in the build directory, as
+# are Makefile and config.c; the *.in and *.dist files are in the source
+# directory.)
+
+# Each line in this file describes one or more optional modules.
+# Modules enabled here will not be compiled by the setup.py script,
+# so the file can be used to override setup.py's behavior.
+
+# Lines have the following structure:
+#
+# <module> ... [<sourcefile> ...] [<cpparg> ...] [<library> ...]
+#
+# <sourcefile> is anything ending in .c (.C, .cc, .c++ are C++ files)
+# <cpparg> is anything starting with -I, -D, -U or -C
+# <library> is anything ending in .a or beginning with -l or -L
+# <module> is anything else but should be a valid Python
+# identifier (letters, digits, underscores, beginning with non-digit)
+#
+# (As the makesetup script changes, it may recognize some other
+# arguments as well, e.g. *.so and *.sl as libraries.  See the big
+# case statement in the makesetup script.)
+#
+# Lines can also have the form
+#
+# <name> = <value>
+#
+# which defines a Make variable definition inserted into Makefile.in
+#
+# Finally, if a line contains just the word "*shared*" (without the
+# quotes but with the stars), then the following modules will not be
+# built statically.  The build process works like this:
+#
+# 1. Build all modules that are declared as static in Modules/Setup,
+#    combine them into libpythonxy.a, combine that into python.
+# 2. Build all modules that are listed as shared in Modules/Setup.
+# 3. Invoke setup.py. That builds all modules that
+#    a) are not builtin, and
+#    b) are not listed in Modules/Setup, and
+#    c) can be build on the target
+#
+# Therefore, modules declared to be shared will not be
+# included in the config.c file, nor in the list of objects to be
+# added to the library archive, and their linker options won't be
+# added to the linker options. Rules to create their .o files and
+# their shared libraries will still be added to the Makefile, and
+# their names will be collected in the Make variable SHAREDMODS.  This
+# is used to build modules as shared libraries.  (They can be
+# installed using "make sharedinstall", which is implied by the
+# toplevel "make install" target.)  (For compatibility,
+# *noconfig* has the same effect as *shared*.)
+#
+# In addition, *static* explicitly declares the following modules to
+# be static.  Lines containing "*static*" and "*shared*" may thus
+# alternate throughout this file.
+
+# NOTE: As a standard policy, as many modules as can be supported by a
+# platform should be present.  The distribution comes with all modules
+# enabled that are supported by most platforms and don't require you
+# to ftp sources from elsewhere.
+
+
+# Some special rules to define PYTHONPATH.
+# Edit the definitions below to indicate which options you are using.
+# Don't add any whitespace or comments!
+
+# Directories where library files get installed.
+# DESTLIB is for Python modules; MACHDESTLIB for shared libraries.
+DESTLIB=$(LIBDEST)
+MACHDESTLIB=$(BINLIBDEST)
+
+# NOTE: all the paths are now relative to the prefix that is computed
+# at run time!
+
+# Standard path -- don't edit.
+# No leading colon since this is the first entry.
+# Empty since this is now just the runtime prefix.
+DESTPATH=
+
+# Site specific path components -- should begin with : if non-empty
+SITEPATH=
+
+# Standard path components for test modules
+TESTPATH=
+
+# Path components for machine- or system-dependent modules and shared libraries
+MACHDEPPATH=:plat-$(MACHDEP)
+EXTRAMACHDEPPATH=
+
+# Path component for the Tkinter-related modules
+# The TKPATH variable is always enabled, to save you the effort.
+TKPATH=:lib-tk
+
+COREPYTHONPATH=$(DESTPATH)$(SITEPATH)$(TESTPATH)$(MACHDEPPATH)$(EXTRAMACHDEPPATH)$(TKPATH)
+PYTHONPATH=$(COREPYTHONPATH)
+
+
+# The modules listed here can't be built as shared libraries for
+# various reasons; therefore they are listed here instead of in the
+# normal order.
+
+# This only contains the minimal set of modules required to run the 
+# setup.py script in the root of the Python source tree.
+
+posix posixmodule.c		# posix (UNIX) system calls
+errno errnomodule.c		# posix (UNIX) errno values
+pwd pwdmodule.c			# this is needed to find out the user's home dir
+				# if $HOME is not set
+_sre _sre.c			# Fredrik Lundh's new regular expressions
+_codecs _codecsmodule.c		# access to the builtin codecs and codec registry
+
+# The zipimport module is always imported at startup. Having it as a
+# builtin module avoids some bootstrapping problems and reduces overhead.
+zipimport zipimport.c
+
+# The rest of the modules listed in this file are all commented out by
+# default.  Usually they can be detected and built as dynamically
+# loaded modules by the new setup.py script added in Python 2.1.  If
+# you're on a platform that doesn't support dynamic loading, want to 
+# compile modules statically into the Python binary, or need to 
+# specify some odd set of compiler switches, you can uncomment the 
+# appropriate lines below.
+
+# ======================================================================
+
+# The Python symtable module depends on .h files that setup.py doesn't track
+_symtable symtablemodule.c
+
+# The SGI specific GL module:
+
+GLHACK=-Dclear=__GLclear
+#gl glmodule.c cgensupport.c -I$(srcdir) $(GLHACK) -lgl -lX11
+
+# Pure module.  Cannot be linked dynamically.
+# -DWITH_QUANTIFY, -DWITH_PURIFY, or -DWITH_ALL_PURE
+#WHICH_PURE_PRODUCTS=-DWITH_ALL_PURE
+#PURE_INCLS=-I/usr/local/include
+#PURE_STUBLIBS=-L/usr/local/lib -lpurify_stubs -lquantify_stubs
+#pure puremodule.c $(WHICH_PURE_PRODUCTS) $(PURE_INCLS) $(PURE_STUBLIBS)
+
+# Uncommenting the following line tells makesetup that all following
+# modules are to be built as shared libraries (see above for more
+# detail; also note that *static* reverses this effect):
+
+#*shared*
+
+# GNU readline.  Unlike previous Python incarnations, GNU readline is
+# now incorporated in an optional module, configured in the Setup file
+# instead of by a configure script switch.  You may have to insert a
+# -L option pointing to the directory where libreadline.* lives,
+# and you may have to change -ltermcap to -ltermlib or perhaps remove
+# it, depending on your system -- see the GNU readline instructions.
+# It's okay for this to be a shared library, too.
+
+#readline readline.c -lreadline -ltermcap
+
+
+# Modules that should always be present (non UNIX dependent):
+
+#array arraymodule.c	# array objects
+#cmath cmathmodule.c # -lm # complex math library functions
+#math mathmodule.c # -lm # math library functions, e.g. sin()
+#_struct _struct.c	# binary structure packing/unpacking
+#time timemodule.c # -lm # time operations and variables
+#operator operator.c	# operator.add() and similar goodies
+#_weakref _weakref.c	# basic weak reference support
+#_testcapi _testcapimodule.c    # Python C API test module
+#_random _randommodule.c	# Random number generator
+#collections collectionsmodule.c # Container types
+#itertools itertoolsmodule.c	# Functions creating iterators for efficient looping 
+#strop stropmodule.c		# String manipulations
+
+#unicodedata unicodedata.c    # static Unicode character database
+
+# access to ISO C locale support
+#_locale _localemodule.c  # -lintl
+
+
+# Modules with some UNIX dependencies -- on by default:
+# (If you have a really backward UNIX, select and socket may not be
+# supported...)
+
+#fcntl fcntlmodule.c	# fcntl(2) and ioctl(2)
+#spwd spwdmodule.c		# spwd(3) 
+#grp grpmodule.c		# grp(3)
+#select selectmodule.c	# select(2); not on ancient System V
+
+# Memory-mapped files (also works on Win32).
+#mmap mmapmodule.c
+
+# CSV file helper
+#_csv _csv.c
+
+# Socket module helper for socket(2)
+#_socket socketmodule.c
+
+# Socket module helper for SSL support; you must comment out the other
+# socket line above, and possibly edit the SSL variable:
+#SSL=/usr/local/ssl
+SSL=/usr
+_ssl _ssl.c \
+	-DUSE_SSL -I$(SSL)/include -I$(SSL)/include/openssl \
+	-L$(SSL)/lib -lssl -lcrypto
+
+# The crypt module is now disabled by default because it breaks builds
+# on many systems (where -lcrypt is needed), e.g. Linux (I believe).
+#
+# First, look at Setup.config; configure may have set this for you.
+
+#crypt cryptmodule.c # -lcrypt	# crypt(3); needs -lcrypt on some systems
+
+
+# Some more UNIX dependent modules -- off by default, since these
+# are not supported by all UNIX systems:
+
+#nis nismodule.c -lnsl	# Sun yellow pages -- not everywhere
+#termios termios.c	# Steen Lumholt's termios module
+#resource resource.c	# Jeremy Hylton's rlimit interface
+
+
+# Multimedia modules -- off by default.
+# These don't work for 64-bit platforms!!!
+# #993173 says audioop works on 64-bit platforms, though.
+# These represent audio samples or images as strings:
+
+#audioop audioop.c	# Operations on audio samples
+#imageop imageop.c	# Operations on images
+#rgbimg rgbimgmodule.c	# Read SGI RGB image files (but coded portably)
+
+
+# Note that the _md5 and _sha modules are normally only built if the
+# system does not have the OpenSSL libs containing an optimized version.
+
+# The _md5 module implements the RSA Data Security, Inc. MD5
+# Message-Digest Algorithm, described in RFC 1321.  The necessary files
+# md5.c and md5.h are included here.
+
+#_md5 md5module.c md5.c
+
+
+# The _sha module implements the SHA checksum algorithm.
+# (NIST's Secure Hash Algorithm.)
+#_sha shamodule.c
+
+
+# SGI IRIX specific modules -- off by default.
+
+# These module work on any SGI machine:
+
+# *** gl must be enabled higher up in this file ***
+#fm fmmodule.c $(GLHACK) -lfm -lgl		# Font Manager
+#sgi sgimodule.c			# sgi.nap() and a few more
+
+# This module requires the header file
+# /usr/people/4Dgifts/iristools/include/izoom.h:
+#imgfile imgfile.c -limage -lgutil -lgl -lm	# Image Processing Utilities
+
+
+# These modules require the Multimedia Development Option (I think):
+
+#al almodule.c -laudio			# Audio Library
+#cd cdmodule.c -lcdaudio -lds -lmediad	# CD Audio Library
+#cl clmodule.c -lcl -lawareaudio	# Compression Library
+#sv svmodule.c yuvconvert.c -lsvideo -lXext -lX11	# Starter Video
+
+
+# The FORMS library, by Mark Overmars, implements user interface
+# components such as dialogs and buttons using SGI's GL and FM
+# libraries.  You must ftp the FORMS library separately from
+# ftp://ftp.cs.ruu.nl/pub/SGI/FORMS.  It was tested with FORMS 2.2a.
+# NOTE: if you want to be able to use FORMS and curses simultaneously
+# (or both link them statically into the same binary), you must
+# compile all of FORMS with the cc option "-Dclear=__GLclear".
+
+# The FORMS variable must point to the FORMS subdirectory of the forms
+# toplevel directory:
+
+#FORMS=/ufs/guido/src/forms/FORMS
+#fl flmodule.c -I$(FORMS) $(GLHACK) $(FORMS)/libforms.a -lfm -lgl
+
+
+# SunOS specific modules -- off by default:
+
+#sunaudiodev sunaudiodev.c
+
+
+# A Linux specific module -- off by default; this may also work on 
+# some *BSDs.
+
+#linuxaudiodev linuxaudiodev.c
+
+
+# George Neville-Neil's timing module:
+
+#timing timingmodule.c
+
+
+# The _tkinter module.
+#
+# The command for _tkinter is long and site specific.  Please
+# uncomment and/or edit those parts as indicated.  If you don't have a
+# specific extension (e.g. Tix or BLT), leave the corresponding line
+# commented out.  (Leave the trailing backslashes in!  If you
+# experience strange errors, you may want to join all uncommented
+# lines and remove the backslashes -- the backslash interpretation is
+# done by the shell's "read" command and it may not be implemented on
+# every system.
+
+# *** Always uncomment this (leave the leading underscore in!):
+# _tkinter _tkinter.c tkappinit.c -DWITH_APPINIT \
+# *** Uncomment and edit to reflect where your Tcl/Tk libraries are:
+#	-L/usr/local/lib \
+# *** Uncomment and edit to reflect where your Tcl/Tk headers are:
+#	-I/usr/local/include \
+# *** Uncomment and edit to reflect where your X11 header files are:
+#	-I/usr/X11R6/include \
+# *** Or uncomment this for Solaris:
+#	-I/usr/openwin/include \
+# *** Uncomment and edit for Tix extension only:
+#	-DWITH_TIX -ltix8.1.8.2 \
+# *** Uncomment and edit for BLT extension only:
+#	-DWITH_BLT -I/usr/local/blt/blt8.0-unoff/include -lBLT8.0 \
+# *** Uncomment and edit for PIL (TkImaging) extension only:
+#     (See http://www.pythonware.com/products/pil/ for more info)
+#	-DWITH_PIL -I../Extensions/Imaging/libImaging  tkImaging.c \
+# *** Uncomment and edit for TOGL extension only:
+#	-DWITH_TOGL togl.c \
+# *** Uncomment and edit to reflect your Tcl/Tk versions:
+#	-ltk8.2 -ltcl8.2 \
+# *** Uncomment and edit to reflect where your X11 libraries are:
+#	-L/usr/X11R6/lib \
+# *** Or uncomment this for Solaris:
+#	-L/usr/openwin/lib \
+# *** Uncomment these for TOGL extension only:
+#	-lGL -lGLU -lXext -lXmu \
+# *** Uncomment for AIX:
+#	-lld \
+# *** Always uncomment this; X11 libraries to link with:
+#	-lX11
+
+# Lance Ellinghaus's syslog module
+#syslog syslogmodule.c		# syslog daemon interface
+
+
+# Curses support, requring the System V version of curses, often
+# provided by the ncurses library.  e.g. on Linux, link with -lncurses
+# instead of -lcurses).
+#
+# First, look at Setup.config; configure may have set this for you.
+
+#_curses _cursesmodule.c -lcurses -ltermcap
+# Wrapper for the panel library that's part of ncurses and SYSV curses.
+#_curses_panel _curses_panel.c -lpanel -lncurses 
+
+
+# Generic (SunOS / SVR4) dynamic loading module.
+# This is not needed for dynamic loading of Python modules --
+# it is a highly experimental and dangerous device for calling
+# *arbitrary* C functions in *arbitrary* shared libraries:
+
+#dl dlmodule.c
+
+
+# Modules that provide persistent dictionary-like semantics.  You will
+# probably want to arrange for at least one of them to be available on
+# your machine, though none are defined by default because of library
+# dependencies.  The Python module anydbm.py provides an
+# implementation independent wrapper for these; dumbdbm.py provides
+# similar functionality (but slower of course) implemented in Python.
+
+# The standard Unix dbm module has been moved to Setup.config so that
+# it will be compiled as a shared library by default.  Compiling it as
+# a built-in module causes conflicts with the pybsddb3 module since it
+# creates a static dependency on an out-of-date version of db.so.
+#
+# First, look at Setup.config; configure may have set this for you.
+
+#dbm dbmmodule.c 	# dbm(3) may require -lndbm or similar
+
+# Anthony Baxter's gdbm module.  GNU dbm(3) will require -lgdbm:
+#
+# First, look at Setup.config; configure may have set this for you.
+
+#gdbm gdbmmodule.c -I/usr/local/include -L/usr/local/lib -lgdbm
+
+
+# Sleepycat Berkeley DB interface.
+#
+# This requires the Sleepycat DB code, see http://www.sleepycat.com/
+# The earliest supported version of that library is 3.0, the latest
+# supported version is 4.0 (4.1 is specifically not supported, as that
+# changes the semantics of transactional databases). A list of available
+# releases can be found at
+#
+# http://www.sleepycat.com/update/index.html
+#
+# Edit the variables DB and DBLIBVERto point to the db top directory
+# and the subdirectory of PORT where you built it.
+#DB=/usr/local/BerkeleyDB.4.0
+#DBLIBVER=4.0
+#DBINC=$(DB)/include
+#DBLIB=$(DB)/lib
+#_bsddb _bsddb.c -I$(DBINC) -L$(DBLIB) -ldb-$(DBLIBVER)
+
+# Historical Berkeley DB 1.85
+#
+# This module is deprecated; the 1.85 version of the Berkeley DB library has
+# bugs that can cause data corruption. If you can, use later versions of the
+# library instead, available from <http://www.sleepycat.com/>.
+
+#DB=/depot/sundry/src/berkeley-db/db.1.85
+#DBPORT=$(DB)/PORT/irix.5.3
+#bsddb185 bsddbmodule.c -I$(DBPORT)/include -I$(DBPORT) $(DBPORT)/libdb.a
+
+
+
+# Helper module for various ascii-encoders
+#binascii binascii.c
+
+# Fred Drake's interface to the Python parser
+#parser parsermodule.c
+
+# cStringIO and cPickle
+#cStringIO cStringIO.c
+#cPickle cPickle.c
+
+
+# Lee Busby's SIGFPE modules.
+# The library to link fpectl with is platform specific.
+# Choose *one* of the options below for fpectl:
+
+# For SGI IRIX (tested on 5.3):
+#fpectl fpectlmodule.c -lfpe
+
+# For Solaris with SunPro compiler (tested on Solaris 2.5 with SunPro C 4.2):
+# (Without the compiler you don't have -lsunmath.)
+#fpectl fpectlmodule.c -R/opt/SUNWspro/lib -lsunmath -lm
+
+# For other systems: see instructions in fpectlmodule.c.
+#fpectl fpectlmodule.c ...
+
+# Test module for fpectl.  No extra libraries needed.
+#fpetest fpetestmodule.c
+
+# Andrew Kuchling's zlib module.
+# This require zlib 1.1.3 (or later).
+# See http://www.gzip.org/zlib/
+#zlib zlibmodule.c -I$(prefix)/include -L$(exec_prefix)/lib -lz
+
+# Interface to the Expat XML parser
+#
+# Expat was written by James Clark and is now maintained by a group of
+# developers on SourceForge; see www.libexpat.org for more
+# information.  The pyexpat module was written by Paul Prescod after a
+# prototype by Jack Jansen.  Source of Expat 1.95.2 is included in
+# Modules/expat/.  Usage of a system shared libexpat.so/expat.dll is
+# not advised.
+#
+# More information on Expat can be found at www.libexpat.org.
+#
+#EXPAT_DIR=/usr/local/src/expat-1.95.2
+#pyexpat pyexpat.c -DHAVE_EXPAT_H -I$(EXPAT_DIR)/lib -L$(EXPAT_DIR) -lexpat
+
+
+# Hye-Shik Chang's CJKCodecs
+
+# multibytecodec is required for all the other CJK codec modules
+#_multibytecodec cjkcodecs/multibytecodec.c
+
+#_codecs_cn cjkcodecs/_codecs_cn.c
+#_codecs_hk cjkcodecs/_codecs_hk.c
+#_codecs_iso2022 cjkcodecs/_codecs_iso2022.c
+#_codecs_jp cjkcodecs/_codecs_jp.c
+#_codecs_kr cjkcodecs/_codecs_kr.c
+#_codecs_tw cjkcodecs/_codecs_tw.c
+
+# Example -- included for reference only:
+# xx xxmodule.c
+
+# Another example -- the 'xxsubtype' module shows C-level subtyping in action
+xxsubtype xxsubtype.c
diff -Naur Python-2.5-base/Modules/Setup.config Python-2.5/Modules/Setup.config
--- Python-2.5-base/Modules/Setup.config	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Modules/Setup.config	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,13 @@
+# This file is transmogrified into Setup.config by config.status.
+
+# The purpose of this file is to conditionally enable certain modules
+# based on configure-time options.
+
+# Threading
+thread threadmodule.c
+
+# The signal module
+signal signalmodule.c
+
+# The rest of the modules previously listed in this file are built
+# by the setup.py script in Python 2.1 and later.
diff -Naur Python-2.5-base/Modules/Setup.dist Python-2.5/Modules/Setup.dist
--- Python-2.5-base/Modules/Setup.dist	2006-08-06 00:26:21.000000000 -0700
+++ Python-2.5/Modules/Setup.dist	2009-03-17 15:50:58.000000000 -0700
@@ -199,14 +199,15 @@
 #_csv _csv.c
 
 # Socket module helper for socket(2)
-#_socket socketmodule.c
+_socket socketmodule.c
 
 # Socket module helper for SSL support; you must comment out the other
 # socket line above, and possibly edit the SSL variable:
 #SSL=/usr/local/ssl
-#_ssl _ssl.c \
-#	-DUSE_SSL -I$(SSL)/include -I$(SSL)/include/openssl \
-#	-L$(SSL)/lib -lssl -lcrypto
+SSL=/usr
+_ssl _ssl.c \
+	-DUSE_SSL -I$(SSL)/include -I$(SSL)/include/openssl \
+	-L$(SSL)/lib -lssl -lcrypto
 
 # The crypt module is now disabled by default because it breaks builds
 # on many systems (where -lcrypt is needed), e.g. Linux (I believe).
diff -Naur Python-2.5-base/Modules/Setup.local Python-2.5/Modules/Setup.local
--- Python-2.5-base/Modules/Setup.local	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Modules/Setup.local	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1 @@
+# Edit this file for local setup changes
diff -Naur Python-2.5-base/Modules/_bsddb.c Python-2.5/Modules/_bsddb.c
--- Python-2.5-base/Modules/_bsddb.c	2006-08-13 11:11:43.000000000 -0700
+++ Python-2.5/Modules/_bsddb.c	2009-03-17 15:50:58.000000000 -0700
@@ -99,7 +99,7 @@
 #endif
 
 #define PY_BSDDB_VERSION "4.4.5"
-static char *rcs_id = "$Id: _bsddb.c 51251 2006-08-13 18:11:43Z neal.norwitz $";
+static char *rcs_id = "$Id: _bsddb.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $";
 
 
 #if (PY_VERSION_HEX < 0x02050000)
diff -Naur Python-2.5-base/Modules/_ctypes/libffi/src/alpha/osf.S Python-2.5/Modules/_ctypes/libffi/src/alpha/osf.S
--- Python-2.5-base/Modules/_ctypes/libffi/src/alpha/osf.S	2006-03-08 17:35:32.000000000 -0800
+++ Python-2.5/Modules/_ctypes/libffi/src/alpha/osf.S	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
    
    Alpha/OSF Foreign Function Interface 
 
-   $Id: osf.S,v 1.2 2006/03/03 20:24:26 theller Exp $
+   $Id: osf.S,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $
 
    Permission is hereby granted, free of charge, to any person obtaining
    a copy of this software and associated documentation files (the
diff -Naur Python-2.5-base/Modules/_ctypes/libffi/src/frv/eabi.S Python-2.5/Modules/_ctypes/libffi/src/frv/eabi.S
--- Python-2.5-base/Modules/_ctypes/libffi/src/frv/eabi.S	2006-03-08 17:35:32.000000000 -0800
+++ Python-2.5/Modules/_ctypes/libffi/src/frv/eabi.S	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
    
    FR-V Assembly glue.
 
-   $Id: eabi.S,v 1.2 2006/03/03 20:24:46 theller Exp $
+   $Id: eabi.S,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $
 
    Permission is hereby granted, free of charge, to any person obtaining
    a copy of this software and associated documentation files (the
diff -Naur Python-2.5-base/Modules/_cursesmodule.c Python-2.5/Modules/_cursesmodule.c
--- Python-2.5-base/Modules/_cursesmodule.c	2006-09-04 19:33:44.000000000 -0700
+++ Python-2.5/Modules/_cursesmodule.c	2009-03-17 15:50:58.000000000 -0700
@@ -31,7 +31,7 @@
  *   PERFORMANCE OF THIS SOFTWARE.
  */
 
-/* CVS: $Id: _cursesmodule.c 51723 2006-09-05 02:33:44Z neal.norwitz $ */
+/* CVS: $Id: _cursesmodule.c,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $ */
 
 /*
 
diff -Naur Python-2.5-base/Modules/_elementtree.c Python-2.5/Modules/_elementtree.c
--- Python-2.5-base/Modules/_elementtree.c	2006-08-16 09:47:07.000000000 -0700
+++ Python-2.5/Modules/_elementtree.c	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 /*
  * ElementTree
- * $Id: _elementtree.c 2657 2006-03-12 20:50:32Z fredrik $
+ * $Id: _elementtree.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $
  *
  * elementtree accelerator
  *
diff -Naur Python-2.5-base/Modules/_hotshot.c Python-2.5/Modules/_hotshot.c
--- Python-2.5-base/Modules/_hotshot.c	2006-08-11 18:43:40.000000000 -0700
+++ Python-2.5/Modules/_hotshot.c	2009-03-17 15:50:58.000000000 -0700
@@ -1403,7 +1403,7 @@
 static char *
 get_version_string(void)
 {
-    static char *rcsid = "$Revision: 51218 $";
+    static char *rcsid = "$Revision: 1.1.1.1 $";
     char *rev = rcsid;
     char *buffer;
     int i = 0;
diff -Naur Python-2.5-base/Modules/config.c Python-2.5/Modules/config.c
--- Python-2.5-base/Modules/config.c	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Modules/config.c	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,91 @@
+/* Generated automatically from ./Modules/config.c.in by makesetup. */
+/* -*- C -*- ***********************************************
+Copyright (c) 2000, BeOpen.com.
+Copyright (c) 1995-2000, Corporation for National Research Initiatives.
+Copyright (c) 1990-1995, Stichting Mathematisch Centrum.
+All rights reserved.
+
+See the file "Misc/COPYRIGHT" for information on usage and
+redistribution of this file, and for a DISCLAIMER OF ALL WARRANTIES.
+******************************************************************/
+
+/* Module configuration */
+
+/* !!! !!! !!! This file is edited by the makesetup script !!! !!! !!! */
+
+/* This file contains the table of built-in modules.
+   See init_builtin() in import.c. */
+
+#include "Python.h"
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+
+extern void initthread(void);
+extern void initsignal(void);
+extern void initposix(void);
+extern void initerrno(void);
+extern void initpwd(void);
+extern void init_sre(void);
+extern void init_codecs(void);
+extern void initzipimport(void);
+extern void init_symtable(void);
+extern void init_ssl(void);
+extern void initxxsubtype(void);
+
+/* -- ADDMODULE MARKER 1 -- */
+
+extern void PyMarshal_Init(void);
+extern void initimp(void);
+extern void initgc(void);
+extern void init_ast(void);
+extern void init_types(void);
+
+struct _inittab _PyImport_Inittab[] = {
+
+	{"thread", initthread},
+	{"signal", initsignal},
+	{"posix", initposix},
+	{"errno", initerrno},
+	{"pwd", initpwd},
+	{"_sre", init_sre},
+	{"_codecs", init_codecs},
+	{"zipimport", initzipimport},
+	{"_symtable", init_symtable},
+	{"_ssl", init_ssl},
+	{"xxsubtype", initxxsubtype},
+
+/* -- ADDMODULE MARKER 2 -- */
+
+	/* This module lives in marshal.c */
+	{"marshal", PyMarshal_Init},
+
+	/* This lives in import.c */
+	{"imp", initimp},
+
+	/* This lives in Python/Python-ast.c */
+	{"_ast", init_ast},
+
+	/* This lives in Python/_types.c */
+	{"_types", init_types},
+
+	/* These entries are here for sys.builtin_module_names */
+	{"__main__", NULL},
+	{"__builtin__", NULL},
+	{"sys", NULL},
+	{"exceptions", NULL},
+
+	/* This lives in gcmodule.c */
+	{"gc", initgc},
+
+	/* Sentinel */
+	{0, 0}
+};
+
+
+#ifdef __cplusplus
+}
+#endif
+
diff -Naur Python-2.5-base/Modules/main.c Python-2.5/Modules/main.c
--- Python-2.5-base/Modules/main.c	2006-07-12 08:31:17.000000000 -0700
+++ Python-2.5/Modules/main.c	2009-03-17 15:50:58.000000000 -0700
@@ -26,6 +26,14 @@
 #endif
 
 #include "pygetopt.h"
+extern int Py_CCT;			/* CCT collection on */
+extern int Py_txtCCT;		/* text dump of CCT */
+extern int Py_logCalls;	/* generate a binary call trace */
+extern int Py_txtLogCalls; /* dump a text call trace to stdout */
+extern int Py_cntCalls;		/* count method calls */
+extern int Py_sampleLogs;
+extern int Py_maxLogRate;
+extern int Py_logInt;
 
 #define COPYRIGHT \
     "Type \"help\", \"copyright\", \"credits\" or \"license\" " \
@@ -60,11 +68,15 @@
 static char *usage_1 = "\
 Options and arguments (and corresponding environment variables):\n\
 -c cmd : program passed in as string (terminates option list)\n\
+-cct   : CCT profiling on\n\
 -d     : debug output from parser (also PYTHONDEBUG=x)\n\
 -E     : ignore environment variables (such as PYTHONPATH)\n\
 -h     : print this help message and exit (also --help)\n\
 -i     : inspect interactively after running script, (also PYTHONINSPECT=x)\n\
          and force prompts, even if stdin does not appear to be a terminal\n\
+-logcalls    : generates a binary time-stamped call trace in call.trace\n\
+-lograte [rate]: max. rate for random call-logging sampling. Omit for exhaustive logging\n\
+-logint [int]:	  fixed logging burst interval, default = 1\n\
 ";
 static char *usage_2 = "\
 -m mod : run library module as a script (terminates option list)\n\
@@ -73,6 +85,8 @@
 -Q arg : division options: -Qold (default), -Qwarn, -Qwarnall, -Qnew\n\
 -S     : don't imply 'import site' on initialization\n\
 -t     : issue warnings about inconsistent tab usage (-tt: issue errors)\n\
+-txtcct: dump CCTs as text files\n\
+-txtlogcalls : generates a text call trace to stdout \n\
 -u     : unbuffered binary stdout and stderr (also PYTHONUNBUFFERED=x)\n\
 ";
 static char *usage_3 = "\
@@ -208,6 +222,11 @@
 #endif
 
 	PySys_ResetWarnOptions();
+	
+	// Nagy: reset options
+	Py_CCT = Py_txtCCT = Py_logCalls = Py_txtLogCalls = Py_cntCalls = 0;
+	Py_sampleLogs = 0;
+	Py_logInt = 1; // default burst length	
 
 	while ((c = _PyOS_GetOpt(argc, argv, PROGRAM_OPTS)) != EOF) {
 		if (c == 'c') {
@@ -323,6 +342,41 @@
 		case 'W':
 			PySys_AddWarnOption(_PyOS_optarg);
 			break;
+			
+			// Nagy
+		case 'C':
+			Py_CCT = 1;
+			break;
+
+		case 'T':
+			Py_txtCCT = 1;
+			break;
+		
+		case 'N':
+			Py_cntCalls = 1;
+			break;
+		
+		case 'L':
+			Py_logCalls = 1;
+			break;
+		
+		
+		case 'A':
+			Py_txtLogCalls = 1;
+			break;
+			
+		case 'R':
+			Py_sampleLogs = 1;
+			Py_maxLogRate = atoi(argv[_PyOS_optind]);
+			fprintf(stderr, "** Logging sample enabled with max. rate %d\n", Py_maxLogRate);
+			
+			_PyOS_optind ++;
+			break;
+		case 'I':
+			Py_logInt = atoi(argv[_PyOS_optind]);
+			fprintf(stderr, "** Burst Interval set to %d\n", Py_logInt);
+			_PyOS_optind ++;
+			break; 
 
 		/* This space reserved for other options */
 
diff -Naur Python-2.5-base/Modules/md5.c Python-2.5/Modules/md5.c
--- Python-2.5-base/Modules/md5.c	2006-04-16 15:11:28.000000000 -0700
+++ Python-2.5/Modules/md5.c	2009-03-17 15:50:58.000000000 -0700
@@ -21,7 +21,7 @@
   ghost@aladdin.com
 
  */
-/* $Id: md5.c,v 1.6 2002/04/13 19:20:28 lpd Exp $ */
+/* $Id: md5.c,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $ */
 /*
   Independent implementation of MD5 (RFC 1321).
 
diff -Naur Python-2.5-base/Modules/md5.h Python-2.5/Modules/md5.h
--- Python-2.5-base/Modules/md5.h	2006-04-03 09:27:50.000000000 -0700
+++ Python-2.5/Modules/md5.h	2009-03-17 15:50:58.000000000 -0700
@@ -21,7 +21,7 @@
   ghost@aladdin.com
 
  */
-/* $Id: md5.h 43594 2006-04-03 16:27:50Z matthias.klose $ */
+/* $Id: md5.h,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 /*
   Independent implementation of MD5 (RFC 1321).
 
diff -Naur Python-2.5-base/Modules/mmapmodule.c Python-2.5/Modules/mmapmodule.c
--- Python-2.5-base/Modules/mmapmodule.c	2006-08-22 06:57:07.000000000 -0700
+++ Python-2.5/Modules/mmapmodule.c	2009-03-17 15:50:58.000000000 -0700
@@ -1,7 +1,7 @@
 /*
  /  Author: Sam Rushing <rushing@nightmare.com>
  /  Hacked for Unix by AMK
- /  $Id: mmapmodule.c 51474 2006-08-22 13:57:07Z neal.norwitz $
+ /  $Id: mmapmodule.c,v 1.1.1.1 2009/01/29 18:17:32 nagy Exp $
 
  / mmapmodule.cpp -- map a view of a file into memory
  /
diff -Naur Python-2.5-base/Modules/ossaudiodev.c Python-2.5/Modules/ossaudiodev.c
--- Python-2.5-base/Modules/ossaudiodev.c	2006-05-29 14:04:52.000000000 -0700
+++ Python-2.5/Modules/ossaudiodev.c	2009-03-17 15:50:58.000000000 -0700
@@ -16,7 +16,7 @@
  *
  * XXX need a license statement
  *
- * $Id: ossaudiodev.c 46533 2006-05-29 21:04:52Z georg.brandl $
+ * $Id: ossaudiodev.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $
  */
 
 #include "Python.h"
diff -Naur Python-2.5-base/Modules/pyexpat.c Python-2.5/Modules/pyexpat.c
--- Python-2.5-base/Modules/pyexpat.c	2006-07-05 22:13:22.000000000 -0700
+++ Python-2.5/Modules/pyexpat.c	2009-03-17 15:50:58.000000000 -0700
@@ -1810,7 +1810,7 @@
 static PyObject *
 get_version_string(void)
 {
-    static char *rcsid = "$Revision: 47253 $";
+    static char *rcsid = "$Revision: 1.1.1.1 $";
     char *rev = rcsid;
     int i = 0;
 
diff -Naur Python-2.5-base/Modules/zlib/ChangeLog Python-2.5/Modules/zlib/ChangeLog
--- Python-2.5-base/Modules/zlib/ChangeLog	2006-01-02 22:42:59.000000000 -0800
+++ Python-2.5/Modules/zlib/ChangeLog	2009-03-17 15:50:58.000000000 -0700
@@ -599,7 +599,7 @@
 - use _fdopen instead of fdopen for MSC >= 6.0 (Thomas Fanslau)
 - added makelcc.bat for lcc-win32 (Tom St Denis)
 - in Makefile.dj2, use copy and del instead of install and rm (Frank Donahoe)
-- Avoid expanded $Id$. Use "rcs -kb" or "cvs admin -kb" to avoid Id expansion.
+- Avoid expanded $Id: ChangeLog,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $. Use "rcs -kb" or "cvs admin -kb" to avoid Id expansion.
 - check for unistd.h in configure (for off_t)
 - remove useless check parameter in inflate_blocks_free
 - avoid useless assignment of s->check to itself in inflate_blocks_new
diff -Naur Python-2.5-base/Modules/zlib/adler32.c Python-2.5/Modules/zlib/adler32.c
--- Python-2.5-base/Modules/zlib/adler32.c	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/adler32.c	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: adler32.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #define ZLIB_INTERNAL
 #include "zlib.h"
diff -Naur Python-2.5-base/Modules/zlib/compress.c Python-2.5/Modules/zlib/compress.c
--- Python-2.5-base/Modules/zlib/compress.c	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/compress.c	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: compress.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #define ZLIB_INTERNAL
 #include "zlib.h"
diff -Naur Python-2.5-base/Modules/zlib/crc32.c Python-2.5/Modules/zlib/crc32.c
--- Python-2.5-base/Modules/zlib/crc32.c	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/crc32.c	2009-03-17 15:50:58.000000000 -0700
@@ -9,7 +9,7 @@
  * factor of two increase in speed on a Power PC G4 (PPC7455) using gcc -O3.
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: crc32.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 /*
   Note on the use of DYNAMIC_CRC_TABLE: there is no mutex or semaphore
diff -Naur Python-2.5-base/Modules/zlib/deflate.c Python-2.5/Modules/zlib/deflate.c
--- Python-2.5-base/Modules/zlib/deflate.c	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/deflate.c	2009-03-17 15:50:58.000000000 -0700
@@ -47,7 +47,7 @@
  *
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: deflate.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #include "deflate.h"
 
diff -Naur Python-2.5-base/Modules/zlib/deflate.h Python-2.5/Modules/zlib/deflate.h
--- Python-2.5-base/Modules/zlib/deflate.h	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/deflate.h	2009-03-17 15:50:58.000000000 -0700
@@ -8,7 +8,7 @@
    subject to change. Applications should only use zlib.h.
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: deflate.h,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #ifndef DEFLATE_H
 #define DEFLATE_H
diff -Naur Python-2.5-base/Modules/zlib/example.c Python-2.5/Modules/zlib/example.c
--- Python-2.5-base/Modules/zlib/example.c	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/example.c	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: example.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #include <stdio.h>
 #include "zlib.h"
diff -Naur Python-2.5-base/Modules/zlib/gzio.c Python-2.5/Modules/zlib/gzio.c
--- Python-2.5-base/Modules/zlib/gzio.c	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/gzio.c	2009-03-17 15:50:58.000000000 -0700
@@ -5,7 +5,7 @@
  * Compile this file with -DNO_GZCOMPRESS to avoid the compression code.
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: gzio.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #include <stdio.h>
 
diff -Naur Python-2.5-base/Modules/zlib/minigzip.c Python-2.5/Modules/zlib/minigzip.c
--- Python-2.5-base/Modules/zlib/minigzip.c	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/minigzip.c	2009-03-17 15:50:58.000000000 -0700
@@ -13,7 +13,7 @@
  * or in pipe mode.
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: minigzip.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #include <stdio.h>
 #include "zlib.h"
diff -Naur Python-2.5-base/Modules/zlib/trees.c Python-2.5/Modules/zlib/trees.c
--- Python-2.5-base/Modules/zlib/trees.c	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/trees.c	2009-03-17 15:50:58.000000000 -0700
@@ -29,7 +29,7 @@
  *          Addison-Wesley, 1983. ISBN 0-201-06672-6.
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: trees.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 /* #define GEN_TREES_H */
 
diff -Naur Python-2.5-base/Modules/zlib/uncompr.c Python-2.5/Modules/zlib/uncompr.c
--- Python-2.5-base/Modules/zlib/uncompr.c	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/uncompr.c	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: uncompr.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #define ZLIB_INTERNAL
 #include "zlib.h"
diff -Naur Python-2.5-base/Modules/zlib/zconf.h Python-2.5/Modules/zlib/zconf.h
--- Python-2.5-base/Modules/zlib/zconf.h	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/zconf.h	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: zconf.h,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #ifndef ZCONF_H
 #define ZCONF_H
diff -Naur Python-2.5-base/Modules/zlib/zconf.in.h Python-2.5/Modules/zlib/zconf.in.h
--- Python-2.5-base/Modules/zlib/zconf.in.h	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/zconf.in.h	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: zconf.in.h,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #ifndef ZCONF_H
 #define ZCONF_H
diff -Naur Python-2.5-base/Modules/zlib/zutil.c Python-2.5/Modules/zlib/zutil.c
--- Python-2.5-base/Modules/zlib/zutil.c	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/zutil.c	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
  * For conditions of distribution and use, see copyright notice in zlib.h
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: zutil.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #include "zutil.h"
 
diff -Naur Python-2.5-base/Modules/zlib/zutil.h Python-2.5/Modules/zlib/zutil.h
--- Python-2.5-base/Modules/zlib/zutil.h	2006-03-08 17:59:27.000000000 -0800
+++ Python-2.5/Modules/zlib/zutil.h	2009-03-17 15:50:58.000000000 -0700
@@ -8,7 +8,7 @@
    subject to change. Applications should only use zlib.h.
  */
 
-/* @(#) $Id$ */
+/* @(#) $Id: zutil.h,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $ */
 
 #ifndef ZUTIL_H
 #define ZUTIL_H
diff -Naur Python-2.5-base/PC/bdist_wininst/install.c Python-2.5/PC/bdist_wininst/install.c
--- Python-2.5-base/PC/bdist_wininst/install.c	2005-02-03 12:35:10.000000000 -0800
+++ Python-2.5/PC/bdist_wininst/install.c	2009-03-17 15:50:58.000000000 -0700
@@ -10,7 +10,7 @@
 /*
  * Written by Thomas Heller, May 2000
  *
- * $Id: install.c 38414 2005-02-03 20:35:10Z theller $
+ * $Id: install.c,v 1.1.1.1 2009/01/29 18:17:33 nagy Exp $
  */
 
 /*
diff -Naur Python-2.5-base/Parser/Python.asdl Python-2.5/Parser/Python.asdl
--- Python-2.5-base/Parser/Python.asdl	2006-04-03 21:00:23.000000000 -0700
+++ Python-2.5/Parser/Python.asdl	2009-03-17 15:50:58.000000000 -0700
@@ -1,6 +1,6 @@
 -- ASDL's five builtin types are identifier, int, string, object, bool
 
-module Python version "$Revision: 43614 $"
+module Python version "$Revision: 1.1.1.1 $"
 {
 	mod = Module(stmt* body)
 	    | Interactive(stmt* body)
diff -Naur Python-2.5-base/Parser/asdl_c.py Python-2.5/Parser/asdl_c.py
--- Python-2.5-base/Parser/asdl_c.py	2006-04-14 08:02:32.000000000 -0700
+++ Python-2.5/Parser/asdl_c.py	2009-03-17 15:50:58.000000000 -0700
@@ -534,7 +534,7 @@
         self.emit('if (PyDict_SetItemString(d, "AST", (PyObject*)AST_type) < 0) return;', 1)
         self.emit('if (PyModule_AddIntConstant(m, "PyCF_ONLY_AST", PyCF_ONLY_AST) < 0)', 1)
         self.emit("return;", 2)
-        # Value of version: "$Revision: 45390 $"
+        # Value of version: "$Revision: 1.1.1.1 $"
         self.emit('if (PyModule_AddStringConstant(m, "__version__", "%s") < 0)' % mod.version.value[12:-3], 1)
         self.emit("return;", 2)
         for dfn in mod.dfns:
diff -Naur Python-2.5-base/Python/cct.c Python-2.5/Python/cct.c
--- Python-2.5-base/Python/cct.c	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Python/cct.c	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,651 @@
+/*
+Software License Agreement (BSD License)
+
+Copyright (c) 2008, Regents of the University of California
+All rights reserved.
+
+Redistribution and use of this software in source and binary forms, with or
+without modification, are permitted provided that the following conditions
+are met:
+
+* Redistributions of source code must retain the above
+  copyright notice, this list of conditions and the
+  following disclaimer.
+
+* Redistributions in binary form must reproduce the above
+  copyright notice, this list of conditions and the
+  following disclaimer in the documentation and/or other
+  materials provided with the distribution.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
+LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGE.  USERS OF THIS SOFTWARE ACKNOWLEDGE THE POSSIBLE
+ PRESENCE OF OTHER OPEN SOURCE LICENSED MATERIAL, COPYRIGHTED MATERIAL OR
+PATENTED MATERIAL IN THIS SOFTWARE, AND IF ANY SUCH MATERIAL IS DISCOVERED THE PARTY
+DISCOVERING IT MAY INFORM DR. RICH WOLSKI AT THE UNIVERSITY OF CALIFORNIA, 
+SANTA BARBARA WHO WILL THEN ASCERTAIN THE MOST APPROPRIATE REMEDY, WHICH
+IN THE REGENTS. DISCRETION MAY INCLUDE, WITHOUT LIMITATION, REPLACEMENT
+OF THE CODE SO IDENTIFIED, LICENSING OF THE CODE SO IDENTIFIED, OR WITHDRAWAL
+OF THE CODE CAPABILITY TO THE EXTENT NEEDED TO COMPLY WITH ANY SUCH LICENSES
+OR RIGHTS.
+*/
+#include "cct.h"
+#include <stdlib.h>
+#include <string.h>
+#include <math.h>
+#include "rdtsc.h"
+
+
+// no call-site information
+//#define CALL_SITE
+
+static CCTNode* createCCTNode(UL id, const char* name, UL mid, int bci, ULL t);
+static CCTNode* addChild(CCTNode* cctn, UL id, const char* name, UL mid, int bci, ULL t);
+static CCTNode* getChildByMID(CCTNode* cctn, UL mid, int bci);
+static CCTNode* getChildByName(CCTNode* cctn, char* name, UL mid, int bci);
+static CCTNode* getInterpolatedChild(CCTNode* cctn, UL mid);
+static void dump_CCTNode_as_bin(CCTNode* cctn, FILE* fp);
+static void dump_CCTNode_as_text(CCTNode* cctn, FILE* fp);
+static CCT* createCCT(UL tid, char* tname);
+static void dump_CCT_as_bin(CCT* cct, FILE* fp);
+static void dump_CCT_as_text(CCT* cct, FILE* fp);
+static void dump_node_text(CCTNode* node, FILE* fp);
+static void dump_node_bin(CCTNode* node, FILE* fp);
+// Implementation of CCTManager --------------------------------------------------------------------
+
+CCT** ccts;
+int free_thread_slot;
+int tm_size;
+
+void initCCTManager(){
+	int i;
+	tm_size = 50;	// initial thread table size
+	ccts = (CCT**) malloc(tm_size * sizeof(CCT*));
+	
+	for (i = 0; i < tm_size; i ++)
+		ccts[i] = NULL;
+	free_thread_slot = 0;
+	printf("%d, %d\n", free_thread_slot, tm_size);
+}
+
+void destroyCCTManager(){
+	/* not really needed now since the TM is alive throughout execution */
+}
+
+CCT* getTree(UL tid){
+	int i;
+	for (i = 0; i < free_thread_slot; i ++)
+		// TODO: change this to use thread id (?)
+		if (ccts[i]->tid == tid)
+			return ccts[i];
+	
+	return NULL;
+}	
+
+CCT* addTree(UL tid, char* tname){
+	
+	if (free_thread_slot == tm_size){
+		fprintf(stderr, "***CCTManager_Event: Thread count exceeded space.\n");
+		fprintf(stderr, "***Resizing\n");
+		CCT** temp = (CCT**) malloc(2 * tm_size * sizeof(CCT*));
+		memcpy(temp, ccts, tm_size * sizeof(CCT*));
+		free(ccts);
+		ccts = temp;
+		tm_size *= 2;
+	}
+	
+	ccts[free_thread_slot] = createCCT(tid, tname);
+	free_thread_slot++;
+	
+	return ccts[free_thread_slot-1]; 
+}
+
+/*
+dump a specific CCT
+*/
+void dump_as_bin(UL tid){
+	int i;
+	CCT* cct;
+	char* file_name;
+	FILE* fp;
+	char* temp;
+	
+	fprintf(stderr, "Nagy: Dumping CCTs to binary files.\n");
+	fprintf(stderr, "***************************************\n");
+	fprintf(stderr, "Sizes of data types used (in bytes):\n");
+	fprintf(stderr, "Size of int:%d\n", (int)sizeof(int));
+	fprintf(stderr, "Size of long:%d\n", (int)sizeof(long));
+	fprintf(stderr, "Size of unsigned long long:%d\n", (int)sizeof(ULL));
+	fprintf(stderr, "Size of char:%d\n", (int)sizeof(char));
+	fprintf(stderr, "Size of double:%d\n", (int) sizeof(double));
+	fprintf(stderr, "***************************************\n");
+	fprintf(stderr, "File Format:\n");
+	fprintf(stderr, "____________\n");
+	fprintf(stderr, "<node_id(long)><bci(int)><name><interpolated(char)><inv_count><avg_time(ull)><std_dev_time(ull)><min_time(ull)><max_time(unsigned)><# of children(int)><	parent_id>\n");
+	fprintf(stderr, "***************************************\n");
+
+	// dumping each CCT	
+	for (i = 0 ; i < free_thread_slot; i ++){
+		
+		cct = ccts[i];
+		if (cct->tid == tid) {
+			
+			
+			file_name = (char*) malloc(10);
+			temp = (char*) malloc(10);
+			sprintf(temp, "%lu", cct->tid);
+		
+			strcpy(file_name,"CCT_");
+			strcat(file_name, temp);
+			strcat(file_name,".dat");
+			fprintf(stderr, "Dumping CCT %lu, %s to %s\n", cct->tid, cct->tname, file_name);
+
+			fp = fopen(file_name, "wb");
+			// FIX ME			
+			dump_CCT_as_bin(cct, fp);
+			
+			fclose(fp);
+			free(file_name);
+			free(temp);
+			return;
+		}
+	} 
+}
+
+// used only for debugging 
+void dump_as_text(UL tid){
+	int i;
+	CCT* cct;
+	
+	for (i = 0 ; i < free_thread_slot; i ++){
+		cct = ccts[i];
+		if (cct->tid == tid){
+			char* file_name;
+			FILE* fp;
+			char* temp;
+		
+			file_name = (char*) malloc(10);
+			temp = (char*) malloc(10);
+			sprintf(temp, "%lu", cct->tid);
+		
+			strcpy(file_name,"CCT_");
+			strcat(file_name, temp);
+			strcat(file_name,".txt");
+			fprintf(stderr, "Dumping CCT %lu, %s to %s\n", cct->tid, cct->tname, file_name);
+
+			fp = fopen(file_name, "w");
+			dump_CCT_as_text(cct, fp);
+			
+			fclose(fp);
+			free(file_name);
+			free(temp);
+		}
+	} 
+}
+
+
+/*
+	Will dump each thread CCT into a seperate file.
+		
+*/
+
+
+void dump_all_as_bin(){
+	int i;
+	CCT* cct;
+	char* file_name;
+	FILE* fp;
+	char* temp;
+	
+	fprintf(stderr, "Nagy: Dumping CCTs to binary files.\n");
+	
+	fprintf(stderr, "***************************************\n");
+	fprintf(stderr, "Sizes of data types used (in bytes):\n");
+	fprintf(stderr, "Size of char:%d\n", (int)sizeof(char));
+	fprintf(stderr, "Size of char:%d\n", (int)sizeof(char));
+	fprintf(stderr, "Size of int:%d\n", (int)sizeof(int));
+	fprintf(stderr, "Size of long:%d\n", (int)sizeof(long));
+	fprintf(stderr, "Size of unsigneud long long:%d\n", (int)sizeof(ULL));
+	fprintf(stderr, "Size of char:%d\n", (int)sizeof(char));
+	fprintf(stderr, "Size of double:%d\n", (int)sizeof(double));
+	fprintf(stderr, "***************************************\n");
+	fprintf(stderr, "File Format:\n");
+	fprintf(stderr, "____________\n");
+	fprintf(stderr, "<node_id(long)><bci(int)><name><interpolated(char)><inv_count><avg_time(ull)><std_dev_time(ull)><min_time(ull)><max_time(unsigned)><# of children(int)><parent_id>\n");
+	fprintf(stderr, "***************************************\n");
+
+	// dumping each CCT	
+	for (i = 0 ; i < free_thread_slot; i ++){
+		cct = ccts[i];
+		file_name = (char*) malloc(50);
+		temp = (char*) malloc(50);
+		sprintf(temp, "%lu", cct->tid);
+	
+		strcpy(file_name,"CCT_");
+		strcat(file_name, temp);
+		strcat(file_name,".dat");
+		fprintf(stderr, "Dumping CCT %lu, %s to %s\n", cct->tid, cct->tname, file_name);
+		fp = fopen(file_name, "wb");
+		
+		update_with_return_all(cct);
+		
+		dump_CCT_as_bin(cct, fp);
+		
+		fclose(fp);
+		free(file_name);
+		free(temp);
+	}
+ 
+}
+
+// used only for debugging 
+void dump_all_as_text(){
+	int i;
+	CCT* cct;
+	char* file_name;
+	FILE* fp;
+	char* temp;
+	
+	for (i = 0 ; i < free_thread_slot; i ++){
+		cct = ccts[i];
+		file_name = (char*) malloc(50);
+		temp = (char*) malloc(50);
+		sprintf(temp, "%lu", cct->tid);
+		strcpy(file_name,"CCT_");
+		strcat(file_name, temp);
+		strcat(file_name,".txt");
+		printf("Dumping CCT %lu, %s to %s\n", cct->tid, cct->tname, file_name);
+		fp = fopen(file_name, "w");
+		
+		update_with_return_all(cct);
+		dump_CCT_as_text(cct, fp);
+		
+		fclose(fp);
+		free(file_name);
+		free(temp);
+	} 
+}
+
+// Implementation of CCTNode ---------------------------------------------------------------------
+
+static CCTNode* createCCTNode(UL id,  const char* name, UL mid, int bci, ULL t){
+	CCTNode* cctn;
+	cctn = (CCTNode*) malloc(sizeof(CCTNode)); 
+	//cctn->cct = cct;
+	cctn->name = (char*) malloc(strlen(name) + 1);
+	strcpy(cctn->name, name);
+		
+	cctn->id = id;
+		
+	cctn->mid = mid;
+	cctn->bci = bci;
+	
+	cctn->start_time = t;
+	cctn->sum = cctn->sq_sum = 0;
+	cctn->max_time = 0;
+	cctn->min_time = -1; // unsigned infinity
+	cctn->parent = NULL;
+	cctn->avg_time = 0;
+	cctn->var_time = 0;
+	
+	// children
+	cctn->children = (CCTNode**) malloc(INIT_CH_SIZE * sizeof(CCTNode*));
+	cctn->free_child_slot = 0;
+	cctn->children_size = INIT_CH_SIZE;
+	cctn->interpolated = 0; // default
+	cctn->inv_count = 0;
+	return cctn;
+}
+
+inline static CCTNode* addChild(CCTNode* cctn, UL id, const char* name, UL mid, int bci, ULL t){
+		
+	if (cctn->free_child_slot == cctn->children_size){
+		CCTNode** temp = (CCTNode**) malloc(2 * (cctn->children_size) * sizeof(CCTNode*));
+		memcpy(temp, cctn->children, (cctn->children_size) * sizeof(CCTNode*));
+		free(cctn->children);
+		cctn->children = temp;
+		cctn->children_size = 2*(cctn->children_size);
+	}
+	cctn->children[cctn->free_child_slot] = createCCTNode(id, name, mid, bci, t); 
+	cctn->children[cctn->free_child_slot]->parent = cctn;
+	cctn->free_child_slot++;
+	
+	return cctn->children[(cctn->free_child_slot) - 1];
+}
+
+inline static CCTNode* getChildByMID(CCTNode* cctn, UL mid, int bci){
+	int i;
+
+	for (i = 0; i < cctn->free_child_slot; i ++){
+		#ifdef CALL_SITE
+		if (cctn->children[i]->mid == mid && cctn->children[i]->bci == bci)
+			return cctn->children[i];
+		#else
+		if (cctn->children[i]->mid == mid )
+			return cctn->children[i];
+		#endif
+	}
+	return NULL;
+}
+
+inline static CCTNode* getChildByName(CCTNode* cctn, char* name, UL mid, int bci){
+	int i;
+	for (i = 0; i < cctn->free_child_slot; i ++){
+			//#ifdef LOG_CALLS_DEBUG
+			// extra check: IDs should be equal if methods 	signatures are
+			if (!strcmp(cctn->children[i]->name, name) && cctn->children[i]->mid != mid)
+				fprintf(stderr, "WARNING: Method IDs are not unique\n");
+			
+			#ifdef CALL_SITE
+			if (cctn->children[i]->mid == mid && cctn->children[i]->bci == bci)
+				return cctn->children[i];
+			#else
+			if (cctn->children[i]->mid == mid)
+				return cctn->children[i];
+			#endif
+			
+	}
+	return NULL;
+}
+
+// not used
+
+inline static CCTNode* getInterpolatedChild(CCTNode* cctn, UL mid){
+	int i;
+	// find interpolated node (if any)
+	for (i = 0; i < cctn->free_child_slot; i ++){
+		// UNCOMMENT THIS
+		if (cctn->children[i]->interpolated && cctn->children[i]->mid == mid )
+				return cctn->children[i];
+	}				
+	return NULL;
+}
+
+/*
+inline char CCTNode::operator==(const CCTNode &other) const {
+	// UNCOMMENT THIS
+    return ((this->mid == other.mid) && (this->bci == other.bci));
+	
+}
+
+char CCTNode::operator!=(const CCTNode &other) const {
+    return !((*this) == other);
+}
+*/
+
+
+inline static void update_stats(CCTNode* cctn, ULL t){
+	ULL interval = t - cctn->start_time;
+
+	cctn->inv_count++;
+	cctn->sum += interval;
+	cctn->sq_sum += ((double)interval) * ((double)interval);
+	if (interval > cctn->max_time) cctn->max_time = interval;
+	if (interval < cctn->min_time) cctn->min_time = interval;
+	cctn->avg_time = ((double) cctn->sum) / cctn->inv_count;
+	cctn->var_time = ( cctn->sq_sum - (((double)(cctn->sum)*(cctn->sum)) / cctn->inv_count)) / cctn->inv_count;
+	
+}
+	
+	
+/*
+	The file formate is as follows for each node
+	<node_id><bci><name><interpolated?><avg_time><std_dev_time><min_time><max_time><# of children><parent_id>	
+*/ 
+static void dump_CCTNode_as_bin(CCTNode* cctn, FILE* fp){
+	int str_len = strlen(cctn->name) + 1;
+	ULL avg_time_ull, std_dev_time_ull;
+	
+	fwrite(&(cctn->id),sizeof(long),1,fp);
+	fwrite(&(cctn->bci), sizeof(int), 1, fp);
+	
+	fwrite(cctn->name, sizeof(char), str_len, fp); // null-terminated string
+	fwrite(&(cctn->interpolated), sizeof(char), 1, fp);
+	fwrite(&(cctn->inv_count), sizeof(int), 1, fp);
+	
+	
+	avg_time_ull = (ULL) cctn->avg_time;
+	std_dev_time_ull = (ULL) sqrt(cctn->var_time);
+	
+	/*if (!strcmp(name, "<root>")){
+		fprintf(stderr, ">>%d\n", inv_count);
+		fprintf(stderr, ">>%llu\n", var_time);
+		fprintf(stderr, ">>%llu\n", std_dev_time_ull);
+	}*/
+	
+	
+	fwrite(&avg_time_ull, sizeof(ULL), 1, fp);
+	fwrite(&std_dev_time_ull, sizeof(ULL), 1, fp);
+	fwrite(&(cctn->min_time), sizeof(ULL), 1, fp);
+	fwrite(&(cctn->max_time), sizeof(ULL), 1, fp);
+	fwrite(&(cctn->free_child_slot), sizeof(int), 1, fp);
+	if (cctn->parent != NULL)	
+		fwrite(&(cctn->parent->id), sizeof(long), 1, fp);
+	else
+		fwrite(&(cctn->parent), sizeof(long), 1, fp); // write zero for parent id 
+}
+
+static void dump_CCTNode_as_text(CCTNode* cctn, FILE* fp){
+
+	fprintf(fp, "%lu,", cctn->id);
+	fprintf(fp, "%d,", cctn->bci);
+	fprintf(fp, "%s,", cctn->name);
+	fprintf(fp, "%d,", cctn->interpolated);
+	fprintf(fp, "%d,", cctn->inv_count);
+	fprintf(fp, "%llu,", (ULL)cctn->avg_time);
+	fprintf(fp, "%llu,", (ULL)sqrt(cctn->var_time));
+	fprintf(fp, "%llu,", cctn->min_time);
+	fprintf(fp, "%llu,", cctn->max_time);
+	fprintf(fp, "%d,", cctn->free_child_slot);
+	if (cctn->parent != NULL)	
+		fprintf(fp, "%ld\n", cctn->parent->id);
+	else
+		fprintf(fp, "%ld\n", (UL)0); // write zero for parent id
+	
+}
+// Implementation of CCT --------------------------------------------------------------------------
+static CCT* createCCT(UL tid, char* tname){
+	CCT* cct = (CCT*) malloc(sizeof(CCT));
+	cct->tid = tid;
+	
+	cct->tname = (char*) malloc(strlen(tname)+1);
+	strcpy(cct->tname, tname);
+	cct->	no_of_nodes = 0;
+	cct->node_id = 1;
+	
+	cct->root = createCCTNode(cct->node_id/*, cct*/, "<root>", 0, 0, rdtsc());
+	cct->node_id++;
+	cct->no_of_nodes++;
+	cct->current = cct->root;
+	return cct;
+}
+
+//stack is a list of method names, and mids is a list of method IDs
+void load(CCT* cct, char** stack, UL* mids, int depth){
+	CCTNode* p;
+	int i;
+	ULL t = rdtsc();
+	
+	p = cct->root;
+
+	p->start_time = t;
+	
+	for (i = depth - 1; i >= 0; i --){
+		fprintf(stderr, "CCT:%s\n",stack[i]);
+		p = addChild(p, cct->node_id, stack[i], mids[i], 0, t);
+		cct->node_id++;
+		cct->no_of_nodes++;
+	}
+	cct->current = p;
+}
+
+void update_with_call(CCT* cct, const char* caller, UL caller_id, const char* callee, UL callee_id, int bci){
+	CCTNode* child;
+	
+	/*if (caller_id == 0){
+		if (cct->current != cct->root) 
+			printf("Warning: 		inconsistency-1\n");
+
+		printf("updating 2\n");	
+		child = getChildByMID(cct->root, callee_id, bci);
+		
+		if (child){
+			cct->current = child;
+			cct->current->start_time = rdtsc();
+			#ifdef LOG_CALLS_DEBUG
+			printf("child found\n");
+			#endif
+			return;
+		}
+		
+		cct->current = addChild(cct->root, cct->node_id, callee, callee_id, bci, rdtsc());
+		cct->node_id++;
+		cct->no_of_nodes++;
+		
+
+		#ifdef LOG_CALLS_DEBUG
+		printf("adding child\n");
+		#endif
+	} else*/
+	
+	
+	if (callee == NULL)
+		printf("CALLEE IS NULL\n");
+		 
+	if (caller_id != cct->current->mid){
+		#ifdef DEBUGCCT
+		printf("Warning: Inconsistency-2: current: %s, caller: %s\n", cct->current->name, caller);
+		#endif
+		child = getInterpolatedChild(cct->current, caller_id);		
+			
+		if (child){
+			cct->current = child;
+			cct->current->start_time = rdtsc();
+		} else {
+			cct->current = addChild(cct->current, cct->node_id, caller, caller_id, 0, rdtsc());
+			cct->no_of_nodes++;
+			cct->node_id ++;
+			
+			cct->current->interpolated = 1;
+			#ifdef LOG_CALLS_DEBUG
+			printf("adding child\n");
+			#endif
+		}	
+		// add another call (the one received) (TODO: avoid recursion (slow))
+		update_with_call(cct, caller, caller_id, callee, callee_id, bci);
+	} else {
+	
+		child = getChildByMID(cct->current, callee_id, bci);
+
+		if (child){
+			cct->current = child;
+			cct->current->start_time = rdtsc();
+		} else {
+			cct->current = addChild(cct->current, cct->node_id, callee, callee_id, bci, rdtsc());
+			cct->node_id++;
+			cct->no_of_nodes++;
+			#ifdef LOG_CALLS_DEBUG
+			printf("adding child\n");
+			#endif
+		}
+
+	}
+}
+
+// callee is the method we are returning from 
+void update_with_return(CCT* cct, const char* callee, UL callee_id){
+	int adjCount;
+	// shouldn't happen
+	if (callee == NULL){
+		fprintf(stderr, "ERROR ON RETURN: callee is NULL, callee_id=%lu\n", callee_id);
+		return;
+	}
+
+	if (cct->current->mid != callee_id){
+		#ifdef DEBUGCCT
+		printf("Warning: inconsistency-3: current: %s, callee: %s\nAdjusting ...", cct->current->name, callee);
+		#endif
+		
+		adjCount = 0;
+		while (cct->current-> mid != callee_id && cct->current != NULL){
+			update_stats(cct->current, rdtsc());
+			cct->current = cct->current->parent;
+			adjCount ++;
+		} 
+		
+		#ifdef DEBUGCCT
+		if (cct->current == NULL)
+			printf("FATAL: cannot adjust\n");
+		else
+			printf("Adjusted: %d\n", adjCount);
+		#endif
+	}
+		
+	update_stats(cct->current, rdtsc());	
+	cct->current = cct->current->parent;
+	// perform additional return from interpolated nodes since they have no return (assumed)
+	if (cct->current->interpolated){
+		update_stats(cct->current, rdtsc());
+		cct->current = cct->current->parent;
+	}
+}
+
+// return from all methods (including root)
+// used to update_stats if thread dies without returning to <root>
+void update_with_return_all(CCT* cct){
+	 
+	while(cct->current){
+		update_stats(cct->current, rdtsc());
+		cct->current = cct->current->parent;
+	}
+}
+
+
+void dump_CCT_as_bin(CCT* cct, FILE* fp){
+	int str_len;
+	
+	fprintf(stderr, "Number of Nodes:%d\n", cct->no_of_nodes);
+	
+	// dump thread name and number of nodes in binary file
+	str_len = strlen(cct->tname) + 1;
+	fwrite(&(cct->tid), sizeof(long), 1, fp);
+	fwrite(cct->tname, sizeof(char), str_len, fp);
+	fwrite(&(cct->no_of_nodes), sizeof(int), 1, fp);
+	
+	// start dumping nodes
+	dump_node_bin(cct->root, fp);
+}
+
+void dump_CCT_as_text(CCT* cct, FILE* fp){
+	fprintf(stderr, "#Number of Nodes:%d\n", cct->no_of_nodes);
+	fprintf(fp, "#Number of Nodes:%d\n", cct->no_of_nodes);
+	fprintf(fp, "#Fields: node_id, call_site, method_name, interpolated?,invoc_count, avg_time, std_dev_time, \
+min_time, max_time, no_of_children, parent_id\n");
+	
+	dump_node_text(cct->root, fp);
+}
+
+void dump_node_bin(CCTNode* node, FILE* fp){
+	int i;
+	
+	dump_CCTNode_as_bin(node, fp);
+	for (i = 0; i < node->free_child_slot; i ++){
+		dump_node_bin(node->children[i], fp);
+	}
+}
+
+void dump_node_text(CCTNode* node, FILE* fp){
+	int i;
+	dump_CCTNode_as_text(node, fp);
+	for (i = 0; i < node->free_child_slot; i ++){
+		dump_node_text(node->children[i], fp);
+	}
+}
diff -Naur Python-2.5-base/Python/ceval.c Python-2.5/Python/ceval.c
--- Python-2.5-base/Python/ceval.c	2006-08-13 11:10:10.000000000 -0700
+++ Python-2.5/Python/ceval.c	2009-03-17 15:50:58.000000000 -0700
@@ -1,3 +1,42 @@
+/*
+Software License Agreement (BSD License)
+
+Copyright (c) 2008, Regents of the University of California
+All rights reserved.
+
+Redistribution and use of this software in source and binary forms, with or
+without modification, are permitted provided that the following conditions
+are met:
+
+* Redistributions of source code must retain the above
+  copyright notice, this list of conditions and the
+  following disclaimer.
+
+* Redistributions in binary form must reproduce the above
+  copyright notice, this list of conditions and the
+  following disclaimer in the documentation and/or other
+  materials provided with the distribution.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
+LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGE.  USERS OF THIS SOFTWARE ACKNOWLEDGE THE POSSIBLE
+ PRESENCE OF OTHER OPEN SOURCE LICENSED MATERIAL, COPYRIGHTED MATERIAL OR
+PATENTED MATERIAL IN THIS SOFTWARE, AND IF ANY SUCH MATERIAL IS DISCOVERED THE PARTY
+DISCOVERING IT MAY INFORM DR. RICH WOLSKI AT THE UNIVERSITY OF CALIFORNIA, 
+SANTA BARBARA WHO WILL THEN ASCERTAIN THE MOST APPROPRIATE REMEDY, WHICH
+IN THE REGENTS. DISCRETION MAY INCLUDE, WITHOUT LIMITATION, REPLACEMENT
+OF THE CODE SO IDENTIFIED, LICENSING OF THE CODE SO IDENTIFIED, OR WITHDRAWAL
+OF THE CODE CAPABILITY TO THE EXTENT NEEDED TO COMPLY WITH ANY SUCH LICENSES
+OR RIGHTS.
+*/
 
 /* Execute compiled code */
 
@@ -18,6 +57,21 @@
 #include "structmember.h"
 
 #include <ctype.h>
+// Nagy
+#include "cct.h"
+//#include "pycct.h"
+#include "rdtsc.h"
+#include "logger.h"
+
+// Nagy
+// CCT/Logging flags
+extern int Py_CCT;			
+extern int Py_txtCCT;
+extern int Py_logCalls;
+extern int Py_txtLogCalls;
+extern int Py_cntCalls;
+extern int Py_sampleLogs;
+extern int Py_maxLogRate;
 
 #ifndef WITH_TSC
 
@@ -3582,11 +3636,132 @@
 			n++;
 		} else
 			Py_INCREF(func);
+			
 		READ_TIMESTAMP(*pintr0);
+				//-----------------------------------------------------------
+		// Nagy		
+		PyThreadState* tstate = PyThreadState_GET();
+	
+		// I found out that tstate address and thread_id are ONLY unique among running threads
+		// not globally. I am using address of the CCT tree instead as thread id both for trace generation
+		// and CCT update.
+		PyFrameObject* current_frame = PyEval_GetFrame();
+		// Method ID: Using the address of PyFunctionObject representing the callee function is not always unique
+		// One case is calling methods for class definition.
+				
+		const char* calleeName;
+		char* fullCalleeName;
+		const char* callerName;
+		UL callerId, calleeId;
+		char* fileName, *fileName2; /*caller, callee source files. DO NOT free those. They point to internal strings.*/
+		
+		callerId = (UL)current_frame->f_code;
+		calleeId = (UL)((PyFunctionObject*)func)->func_code;
+		static char* logMsg;
+		int logEnabled;
+		ULL timestamp;
+		
+		
+		fileName="null"; fileName2="null";
+		calleeName="null"; fullCalleeName="null";
+		timestamp = 0;
+		if (Py_cntCalls){
+			if (PyCFunction_Check(func) || PyFunction_Check(func))
+			incTotalCallCount();
+		}
+			
+		if (Py_txtLogCalls || Py_logCalls){
+			if (Py_sampleLogs){
+				logEnabled = decSampleCounter();
+			}else
+				logEnabled = 1;
+		}else
+			logEnabled = 0;
+
+		// if any of the profiling options
+		if (Py_CCT || Py_txtCCT || logEnabled){
+			calleeName = PyEval_GetFuncName(func);
+			fullCalleeName = (char*) malloc(200);
+					
+			if (current_frame != NULL){
+				callerName = PyString_AsString(current_frame->f_code->co_name);
+				fileName = PyString_AsString(current_frame->f_code->co_filename);
+			}
+			
+			
+			// handle python calls only for now
+			if (PyCFunction_Check(func) || PyFunction_Check(func)){
+				if (Py_logCalls || Py_txtLogCalls){
+					if (PyFunction_Check(func)){		
+						if (((PyFunctionObject*)func)->func_code == NULL){
+							fileName2 = "null";
+						}else{
+							// getting target file name
+							if (((PyCodeObject*)((PyFunctionObject*)func)->func_code)->co_filename != NULL)
+								fileName2 = PyString_AsString(((PyCodeObject*)((PyFunctionObject*)func)->func_code)->co_filename);
+						}
+					} else if(PyCFunction_Check(func)){
+						if (((PyCFunctionObject*)func)->m_module != NULL){
+							fileName2 = PyString_AsString(  ((PyCFunctionObject*)func)->m_module);
+						}
+						else
+							fileName2 = "null";
+					}
+				}
+	
+				timestamp = rdtsc();
+				sprintf(fullCalleeName, "%s:%s", fileName2, calleeName);
+				// logging calls as text
+				if (Py_txtLogCalls){	
+					// allocate log message once
+					if (logMsg == NULL)
+						logMsg = (char*) malloc(200);	
+					
+					sprintf(logMsg, "+%llu,%lu,%s\n", timestamp, (UL)tstate, fullCalleeName);
+					logMessage(logMsg);
+
+				}
+				
+				if (Py_logCalls)
+					logBinMessage(0, timestamp, (UL)tstate, fullCalleeName);
+					
+				
+
+				// Todo: get call-site (optional)
+				if (Py_CCT || Py_txtCCT)
+					update_with_call(tstate->cct, callerName, callerId, calleeName, calleeId, 0);
+			}
+		}
+		//-----------------------------------------------------------	
 		if (PyFunction_Check(func))
 			x = fast_function(func, pp_stack, n, na, nk);
 		else
 			x = do_call(func, pp_stack, na, nk);
+		//-----------------------------------------------------------	
+		//Nagy	
+		timestamp = rdtsc();	
+		if (Py_CCT || Py_txtCCT || logEnabled){
+			if (PyCFunction_Check(func) || PyFunction_Check(func)){
+				if (Py_txtLogCalls){
+					// logging return
+					
+					
+					sprintf(logMsg, "-%llu,%lu,%s\n", timestamp, (UL)tstate, fullCalleeName);
+					
+					
+					logMessage(logMsg);
+					
+				}
+				if (Py_logCalls)
+					logBinMessage(1, timestamp, (UL)tstate, fullCalleeName);
+					
+					
+				if (Py_CCT || Py_txtCCT)
+					update_with_return(tstate->cct, calleeName, calleeId);
+			}
+			free(fullCalleeName);
+		}
+		//-----------------------------------------------------------			
 		READ_TIMESTAMP(*pintr1);
 		Py_DECREF(func);
 	}
diff -Naur Python-2.5-base/Python/ceval.c~ Python-2.5/Python/ceval.c~
--- Python-2.5-base/Python/ceval.c~	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Python/ceval.c~	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,4479 @@
+
+/* Execute compiled code */
+
+/* XXX TO DO:
+   XXX speed up searching for keywords by using a dictionary
+   XXX document it!
+   */
+
+/* enable more aggressive intra-module optimizations, where available */
+#define PY_LOCAL_AGGRESSIVE
+
+#include "Python.h"
+
+#include "code.h"
+#include "frameobject.h"
+#include "eval.h"
+#include "opcode.h"
+#include "structmember.h"
+
+#include <ctype.h>
+// Nagy
+#include "cct.h"
+//#include "pycct.h"
+#include "rdtsc.h"
+#include "logger.h"
+
+// Nagy
+// CCT/Logging flags
+extern int Py_CCT;			
+extern int Py_txtCCT;
+extern int Py_logCalls;
+extern int Py_txtLogCalls;
+extern int Py_cntCalls;
+extern int Py_sampleLogs;
+extern int Py_maxLogRate;
+
+#ifndef WITH_TSC
+
+#define READ_TIMESTAMP(var)
+
+#else
+
+typedef unsigned long long uint64;
+
+#if defined(__ppc__) /* <- Don't know if this is the correct symbol; this
+			   section should work for GCC on any PowerPC platform,
+			   irrespective of OS.  POWER?  Who knows :-) */
+
+#define READ_TIMESTAMP(var) ppc_getcounter(&var)
+
+static void
+ppc_getcounter(uint64 *v)
+{
+	register unsigned long tbu, tb, tbu2;
+
+  loop:
+	asm volatile ("mftbu %0" : "=r" (tbu) );
+	asm volatile ("mftb  %0" : "=r" (tb)  );
+	asm volatile ("mftbu %0" : "=r" (tbu2));
+	if (__builtin_expect(tbu != tbu2, 0)) goto loop;
+
+	/* The slightly peculiar way of writing the next lines is
+	   compiled better by GCC than any other way I tried. */
+	((long*)(v))[0] = tbu;
+	((long*)(v))[1] = tb;
+}
+
+#else /* this is for linux/x86 (and probably any other GCC/x86 combo) */
+
+#define READ_TIMESTAMP(val) \
+     __asm__ __volatile__("rdtsc" : "=A" (val))
+
+#endif
+
+void dump_tsc(int opcode, int ticked, uint64 inst0, uint64 inst1,
+	      uint64 loop0, uint64 loop1, uint64 intr0, uint64 intr1)
+{
+	uint64 intr, inst, loop;
+	PyThreadState *tstate = PyThreadState_Get();
+	if (!tstate->interp->tscdump)
+		return;
+	intr = intr1 - intr0;
+	inst = inst1 - inst0 - intr;
+	loop = loop1 - loop0 - intr;
+	fprintf(stderr, "opcode=%03d t=%d inst=%06lld loop=%06lld\n",
+		opcode, ticked, inst, loop);
+}
+
+#endif
+
+/* Turn this on if your compiler chokes on the big switch: */
+/* #define CASE_TOO_BIG 1 */
+
+#ifdef Py_DEBUG
+/* For debugging the interpreter: */
+#define LLTRACE  1	/* Low-level trace feature */
+#define CHECKEXC 1	/* Double-check exception checking */
+#endif
+
+typedef PyObject *(*callproc)(PyObject *, PyObject *, PyObject *);
+
+/* Forward declarations */
+#ifdef WITH_TSC
+static PyObject * call_function(PyObject ***, int, uint64*, uint64*);
+#else
+static PyObject * call_function(PyObject ***, int);
+#endif
+static PyObject * fast_function(PyObject *, PyObject ***, int, int, int);
+static PyObject * do_call(PyObject *, PyObject ***, int, int);
+static PyObject * ext_do_call(PyObject *, PyObject ***, int, int, int);
+static PyObject * update_keyword_args(PyObject *, int, PyObject ***,PyObject *);
+static PyObject * update_star_args(int, int, PyObject *, PyObject ***);
+static PyObject * load_args(PyObject ***, int);
+#define CALL_FLAG_VAR 1
+#define CALL_FLAG_KW 2
+
+#ifdef LLTRACE
+static int lltrace;
+static int prtrace(PyObject *, char *);
+#endif
+static int call_trace(Py_tracefunc, PyObject *, PyFrameObject *,
+		      int, PyObject *);
+static void call_trace_protected(Py_tracefunc, PyObject *,
+				 PyFrameObject *, int, PyObject *);
+static void call_exc_trace(Py_tracefunc, PyObject *, PyFrameObject *);
+static int maybe_call_line_trace(Py_tracefunc, PyObject *,
+				  PyFrameObject *, int *, int *, int *);
+
+static PyObject * apply_slice(PyObject *, PyObject *, PyObject *);
+static int assign_slice(PyObject *, PyObject *,
+			PyObject *, PyObject *);
+static PyObject * cmp_outcome(int, PyObject *, PyObject *);
+static PyObject * import_from(PyObject *, PyObject *);
+static int import_all_from(PyObject *, PyObject *);
+static PyObject * build_class(PyObject *, PyObject *, PyObject *);
+static int exec_statement(PyFrameObject *,
+			  PyObject *, PyObject *, PyObject *);
+static void set_exc_info(PyThreadState *, PyObject *, PyObject *, PyObject *);
+static void reset_exc_info(PyThreadState *);
+static void format_exc_check_arg(PyObject *, char *, PyObject *);
+static PyObject * string_concatenate(PyObject *, PyObject *,
+				    PyFrameObject *, unsigned char *);
+
+#define NAME_ERROR_MSG \
+	"name '%.200s' is not defined"
+#define GLOBAL_NAME_ERROR_MSG \
+	"global name '%.200s' is not defined"
+#define UNBOUNDLOCAL_ERROR_MSG \
+	"local variable '%.200s' referenced before assignment"
+#define UNBOUNDFREE_ERROR_MSG \
+	"free variable '%.200s' referenced before assignment" \
+        " in enclosing scope"
+
+/* Dynamic execution profile */
+#ifdef DYNAMIC_EXECUTION_PROFILE
+#ifdef DXPAIRS
+static long dxpairs[257][256];
+#define dxp dxpairs[256]
+#else
+static long dxp[256];
+#endif
+#endif
+
+/* Function call profile */
+#ifdef CALL_PROFILE
+#define PCALL_NUM 11
+static int pcall[PCALL_NUM];
+
+#define PCALL_ALL 0
+#define PCALL_FUNCTION 1
+#define PCALL_FAST_FUNCTION 2
+#define PCALL_FASTER_FUNCTION 3
+#define PCALL_METHOD 4
+#define PCALL_BOUND_METHOD 5
+#define PCALL_CFUNCTION 6
+#define PCALL_TYPE 7
+#define PCALL_GENERATOR 8
+#define PCALL_OTHER 9
+#define PCALL_POP 10
+
+/* Notes about the statistics
+
+   PCALL_FAST stats
+
+   FAST_FUNCTION means no argument tuple needs to be created.
+   FASTER_FUNCTION means that the fast-path frame setup code is used.
+
+   If there is a method call where the call can be optimized by changing
+   the argument tuple and calling the function directly, it gets recorded
+   twice.
+
+   As a result, the relationship among the statistics appears to be
+   PCALL_ALL == PCALL_FUNCTION + PCALL_METHOD - PCALL_BOUND_METHOD +
+                PCALL_CFUNCTION + PCALL_TYPE + PCALL_GENERATOR + PCALL_OTHER
+   PCALL_FUNCTION > PCALL_FAST_FUNCTION > PCALL_FASTER_FUNCTION
+   PCALL_METHOD > PCALL_BOUND_METHOD
+*/
+
+#define PCALL(POS) pcall[POS]++
+
+PyObject *
+PyEval_GetCallStats(PyObject *self)
+{
+	return Py_BuildValue("iiiiiiiiii",
+			     pcall[0], pcall[1], pcall[2], pcall[3],
+			     pcall[4], pcall[5], pcall[6], pcall[7],
+			     pcall[8], pcall[9]);
+}
+#else
+#define PCALL(O)
+
+PyObject *
+PyEval_GetCallStats(PyObject *self)
+{
+	Py_INCREF(Py_None);
+	return Py_None;
+}
+#endif
+
+
+#ifdef WITH_THREAD
+
+#ifdef HAVE_ERRNO_H
+#include <errno.h>
+#endif
+#include "pythread.h"
+
+static PyThread_type_lock interpreter_lock = 0; /* This is the GIL */
+static long main_thread = 0;
+
+int
+PyEval_ThreadsInitialized(void)
+{
+	return interpreter_lock != 0;
+}
+
+void
+PyEval_InitThreads(void)
+{
+	if (interpreter_lock)
+		return;
+	interpreter_lock = PyThread_allocate_lock();
+	PyThread_acquire_lock(interpreter_lock, 1);
+	main_thread = PyThread_get_thread_ident();
+}
+
+void
+PyEval_AcquireLock(void)
+{
+	PyThread_acquire_lock(interpreter_lock, 1);
+}
+
+void
+PyEval_ReleaseLock(void)
+{
+	PyThread_release_lock(interpreter_lock);
+}
+
+void
+PyEval_AcquireThread(PyThreadState *tstate)
+{
+	if (tstate == NULL)
+		Py_FatalError("PyEval_AcquireThread: NULL new thread state");
+	/* Check someone has called PyEval_InitThreads() to create the lock */
+	assert(interpreter_lock);
+	PyThread_acquire_lock(interpreter_lock, 1);
+	if (PyThreadState_Swap(tstate) != NULL)
+		Py_FatalError(
+			"PyEval_AcquireThread: non-NULL old thread state");
+}
+
+void
+PyEval_ReleaseThread(PyThreadState *tstate)
+{
+	if (tstate == NULL)
+		Py_FatalError("PyEval_ReleaseThread: NULL thread state");
+	if (PyThreadState_Swap(NULL) != tstate)
+		Py_FatalError("PyEval_ReleaseThread: wrong thread state");
+	PyThread_release_lock(interpreter_lock);
+}
+
+/* This function is called from PyOS_AfterFork to ensure that newly
+   created child processes don't hold locks referring to threads which
+   are not running in the child process.  (This could also be done using
+   pthread_atfork mechanism, at least for the pthreads implementation.) */
+
+void
+PyEval_ReInitThreads(void)
+{
+	if (!interpreter_lock)
+		return;
+	/*XXX Can't use PyThread_free_lock here because it does too
+	  much error-checking.  Doing this cleanly would require
+	  adding a new function to each thread_*.h.  Instead, just
+	  create a new lock and waste a little bit of memory */
+	interpreter_lock = PyThread_allocate_lock();
+	PyThread_acquire_lock(interpreter_lock, 1);
+	main_thread = PyThread_get_thread_ident();
+}
+#endif
+
+/* Functions save_thread and restore_thread are always defined so
+   dynamically loaded modules needn't be compiled separately for use
+   with and without threads: */
+
+PyThreadState *
+PyEval_SaveThread(void)
+{
+	PyThreadState *tstate = PyThreadState_Swap(NULL);
+	if (tstate == NULL)
+		Py_FatalError("PyEval_SaveThread: NULL tstate");
+#ifdef WITH_THREAD
+	if (interpreter_lock)
+		PyThread_release_lock(interpreter_lock);
+#endif
+	return tstate;
+}
+
+void
+PyEval_RestoreThread(PyThreadState *tstate)
+{
+	if (tstate == NULL)
+		Py_FatalError("PyEval_RestoreThread: NULL tstate");
+#ifdef WITH_THREAD
+	if (interpreter_lock) {
+		int err = errno;
+		PyThread_acquire_lock(interpreter_lock, 1);
+		errno = err;
+	}
+#endif
+	PyThreadState_Swap(tstate);
+}
+
+
+/* Mechanism whereby asynchronously executing callbacks (e.g. UNIX
+   signal handlers or Mac I/O completion routines) can schedule calls
+   to a function to be called synchronously.
+   The synchronous function is called with one void* argument.
+   It should return 0 for success or -1 for failure -- failure should
+   be accompanied by an exception.
+
+   If registry succeeds, the registry function returns 0; if it fails
+   (e.g. due to too many pending calls) it returns -1 (without setting
+   an exception condition).
+
+   Note that because registry may occur from within signal handlers,
+   or other asynchronous events, calling malloc() is unsafe!
+
+#ifdef WITH_THREAD
+   Any thread can schedule pending calls, but only the main thread
+   will execute them.
+#endif
+
+   XXX WARNING!  ASYNCHRONOUSLY EXECUTING CODE!
+   There are two possible race conditions:
+   (1) nested asynchronous registry calls;
+   (2) registry calls made while pending calls are being processed.
+   While (1) is very unlikely, (2) is a real possibility.
+   The current code is safe against (2), but not against (1).
+   The safety against (2) is derived from the fact that only one
+   thread (the main thread) ever takes things out of the queue.
+
+   XXX Darn!  With the advent of thread state, we should have an array
+   of pending calls per thread in the thread state!  Later...
+*/
+
+#define NPENDINGCALLS 32
+static struct {
+	int (*func)(void *);
+	void *arg;
+} pendingcalls[NPENDINGCALLS];
+static volatile int pendingfirst = 0;
+static volatile int pendinglast = 0;
+static volatile int things_to_do = 0;
+
+int
+Py_AddPendingCall(int (*func)(void *), void *arg)
+{
+	static volatile int busy = 0;
+	int i, j;
+	/* XXX Begin critical section */
+	/* XXX If you want this to be safe against nested
+	   XXX asynchronous calls, you'll have to work harder! */
+	if (busy)
+		return -1;
+	busy = 1;
+	i = pendinglast;
+	j = (i + 1) % NPENDINGCALLS;
+	if (j == pendingfirst) {
+		busy = 0;
+		return -1; /* Queue full */
+	}
+	pendingcalls[i].func = func;
+	pendingcalls[i].arg = arg;
+	pendinglast = j;
+
+	_Py_Ticker = 0;
+	things_to_do = 1; /* Signal main loop */
+	busy = 0;
+	/* XXX End critical section */
+	return 0;
+}
+
+int
+Py_MakePendingCalls(void)
+{
+	static int busy = 0;
+#ifdef WITH_THREAD
+	if (main_thread && PyThread_get_thread_ident() != main_thread)
+		return 0;
+#endif
+	if (busy)
+		return 0;
+	busy = 1;
+	things_to_do = 0;
+	for (;;) {
+		int i;
+		int (*func)(void *);
+		void *arg;
+		i = pendingfirst;
+		if (i == pendinglast)
+			break; /* Queue empty */
+		func = pendingcalls[i].func;
+		arg = pendingcalls[i].arg;
+		pendingfirst = (i + 1) % NPENDINGCALLS;
+		if (func(arg) < 0) {
+			busy = 0;
+			things_to_do = 1; /* We're not done yet */
+			return -1;
+		}
+	}
+	busy = 0;
+	return 0;
+}
+
+
+/* The interpreter's recursion limit */
+
+#ifndef Py_DEFAULT_RECURSION_LIMIT
+#define Py_DEFAULT_RECURSION_LIMIT 1000
+#endif
+static int recursion_limit = Py_DEFAULT_RECURSION_LIMIT;
+int _Py_CheckRecursionLimit = Py_DEFAULT_RECURSION_LIMIT;
+
+int
+Py_GetRecursionLimit(void)
+{
+	return recursion_limit;
+}
+
+void
+Py_SetRecursionLimit(int new_limit)
+{
+	recursion_limit = new_limit;
+        _Py_CheckRecursionLimit = recursion_limit;
+}
+
+/* the macro Py_EnterRecursiveCall() only calls _Py_CheckRecursiveCall()
+   if the recursion_depth reaches _Py_CheckRecursionLimit.
+   If USE_STACKCHECK, the macro decrements _Py_CheckRecursionLimit
+   to guarantee that _Py_CheckRecursiveCall() is regularly called.
+   Without USE_STACKCHECK, there is no need for this. */
+int
+_Py_CheckRecursiveCall(char *where)
+{
+	PyThreadState *tstate = PyThreadState_GET();
+
+#ifdef USE_STACKCHECK
+	if (PyOS_CheckStack()) {
+		--tstate->recursion_depth;
+		PyErr_SetString(PyExc_MemoryError, "Stack overflow");
+		return -1;
+	}
+#endif
+	if (tstate->recursion_depth > recursion_limit) {
+		--tstate->recursion_depth;
+		PyErr_Format(PyExc_RuntimeError,
+			     "maximum recursion depth exceeded%s",
+			     where);
+		return -1;
+	}
+        _Py_CheckRecursionLimit = recursion_limit;
+	return 0;
+}
+
+/* Status code for main loop (reason for stack unwind) */
+enum why_code {
+		WHY_NOT =	0x0001,	/* No error */
+		WHY_EXCEPTION = 0x0002,	/* Exception occurred */
+		WHY_RERAISE =	0x0004,	/* Exception re-raised by 'finally' */
+		WHY_RETURN =	0x0008,	/* 'return' statement */
+		WHY_BREAK =	0x0010,	/* 'break' statement */
+		WHY_CONTINUE =	0x0020,	/* 'continue' statement */
+		WHY_YIELD =	0x0040	/* 'yield' operator */
+};
+
+static enum why_code do_raise(PyObject *, PyObject *, PyObject *);
+static int unpack_iterable(PyObject *, int, PyObject **);
+
+/* for manipulating the thread switch and periodic "stuff" - used to be
+   per thread, now just a pair o' globals */
+int _Py_CheckInterval = 100;
+volatile int _Py_Ticker = 100;
+
+PyObject *
+PyEval_EvalCode(PyCodeObject *co, PyObject *globals, PyObject *locals)
+{
+	/* XXX raise SystemError if globals is NULL */
+	return PyEval_EvalCodeEx(co,
+			  globals, locals,
+			  (PyObject **)NULL, 0,
+			  (PyObject **)NULL, 0,
+			  (PyObject **)NULL, 0,
+			  NULL);
+}
+
+
+/* Interpreter main loop */
+
+PyObject *
+PyEval_EvalFrame(PyFrameObject *f) {
+	/* This is for backward compatibility with extension modules that
+           used this API; core interpreter code should call PyEval_EvalFrameEx() */
+	return PyEval_EvalFrameEx(f, 0);
+}
+
+PyObject *
+PyEval_EvalFrameEx(PyFrameObject *f, int throwflag)
+{
+#ifdef DXPAIRS
+	int lastopcode = 0;
+#endif
+	register PyObject **stack_pointer;   /* Next free slot in value stack */
+	register unsigned char *next_instr;
+	register int opcode;	/* Current opcode */
+	register int oparg;	/* Current opcode argument, if any */
+	register enum why_code why; /* Reason for block stack unwind */
+	register int err;	/* Error status -- nonzero if error */
+	register PyObject *x;	/* Result object -- NULL if error */
+	register PyObject *v;	/* Temporary objects popped off stack */
+	register PyObject *w;
+	register PyObject *u;
+	register PyObject *t;
+	register PyObject *stream = NULL;    /* for PRINT opcodes */
+	register PyObject **fastlocals, **freevars;
+	PyObject *retval = NULL;	/* Return value */
+	PyThreadState *tstate = PyThreadState_GET();
+	PyCodeObject *co;
+
+	/* when tracing we set things up so that
+
+               not (instr_lb <= current_bytecode_offset < instr_ub)
+
+	   is true when the line being executed has changed.  The
+           initial values are such as to make this false the first
+           time it is tested. */
+	int instr_ub = -1, instr_lb = 0, instr_prev = -1;
+
+	unsigned char *first_instr;
+	PyObject *names;
+	PyObject *consts;
+#if defined(Py_DEBUG) || defined(LLTRACE)
+	/* Make it easier to find out where we are with a debugger */
+	char *filename;
+#endif
+
+/* Tuple access macros */
+
+#ifndef Py_DEBUG
+#define GETITEM(v, i) PyTuple_GET_ITEM((PyTupleObject *)(v), (i))
+#else
+#define GETITEM(v, i) PyTuple_GetItem((v), (i))
+#endif
+
+#ifdef WITH_TSC
+/* Use Pentium timestamp counter to mark certain events:
+   inst0 -- beginning of switch statement for opcode dispatch
+   inst1 -- end of switch statement (may be skipped)
+   loop0 -- the top of the mainloop
+   loop1 -- place where control returns again to top of mainloop
+            (may be skipped)
+   intr1 -- beginning of long interruption
+   intr2 -- end of long interruption
+
+   Many opcodes call out to helper C functions.  In some cases, the
+   time in those functions should be counted towards the time for the
+   opcode, but not in all cases.  For example, a CALL_FUNCTION opcode
+   calls another Python function; there's no point in charge all the
+   bytecode executed by the called function to the caller.
+
+   It's hard to make a useful judgement statically.  In the presence
+   of operator overloading, it's impossible to tell if a call will
+   execute new Python code or not.
+
+   It's a case-by-case judgement.  I'll use intr1 for the following
+   cases:
+
+   EXEC_STMT
+   IMPORT_STAR
+   IMPORT_FROM
+   CALL_FUNCTION (and friends)
+
+ */
+	uint64 inst0, inst1, loop0, loop1, intr0 = 0, intr1 = 0;
+	int ticked = 0;
+
+	READ_TIMESTAMP(inst0);
+	READ_TIMESTAMP(inst1);
+	READ_TIMESTAMP(loop0);
+	READ_TIMESTAMP(loop1);
+
+	/* shut up the compiler */
+	opcode = 0;
+#endif
+
+/* Code access macros */
+
+#define INSTR_OFFSET()	((int)(next_instr - first_instr))
+#define NEXTOP()	(*next_instr++)
+#define NEXTARG()	(next_instr += 2, (next_instr[-1]<<8) + next_instr[-2])
+#define PEEKARG()	((next_instr[2]<<8) + next_instr[1])
+#define JUMPTO(x)	(next_instr = first_instr + (x))
+#define JUMPBY(x)	(next_instr += (x))
+
+/* OpCode prediction macros
+	Some opcodes tend to come in pairs thus making it possible to predict
+	the second code when the first is run.  For example, COMPARE_OP is often
+	followed by JUMP_IF_FALSE or JUMP_IF_TRUE.  And, those opcodes are often
+	followed by a POP_TOP.
+
+	Verifying the prediction costs a single high-speed test of register
+	variable against a constant.  If the pairing was good, then the
+	processor has a high likelihood of making its own successful branch
+	prediction which results in a nearly zero overhead transition to the
+	next opcode.
+
+	A successful prediction saves a trip through the eval-loop including
+	its two unpredictable branches, the HASARG test and the switch-case.
+
+        If collecting opcode statistics, turn off prediction so that
+	statistics are accurately maintained (the predictions bypass
+	the opcode frequency counter updates).
+*/
+
+#ifdef DYNAMIC_EXECUTION_PROFILE
+#define PREDICT(op)		if (0) goto PRED_##op
+#else
+#define PREDICT(op)		if (*next_instr == op) goto PRED_##op
+#endif
+
+#define PREDICTED(op)		PRED_##op: next_instr++
+#define PREDICTED_WITH_ARG(op)	PRED_##op: oparg = PEEKARG(); next_instr += 3
+
+/* Stack manipulation macros */
+
+/* The stack can grow at most MAXINT deep, as co_nlocals and
+   co_stacksize are ints. */
+#define STACK_LEVEL()	((int)(stack_pointer - f->f_valuestack))
+#define EMPTY()		(STACK_LEVEL() == 0)
+#define TOP()		(stack_pointer[-1])
+#define SECOND()	(stack_pointer[-2])
+#define THIRD() 	(stack_pointer[-3])
+#define FOURTH()	(stack_pointer[-4])
+#define SET_TOP(v)	(stack_pointer[-1] = (v))
+#define SET_SECOND(v)	(stack_pointer[-2] = (v))
+#define SET_THIRD(v)	(stack_pointer[-3] = (v))
+#define SET_FOURTH(v)	(stack_pointer[-4] = (v))
+#define BASIC_STACKADJ(n)	(stack_pointer += n)
+#define BASIC_PUSH(v)	(*stack_pointer++ = (v))
+#define BASIC_POP()	(*--stack_pointer)
+
+#ifdef LLTRACE
+#define PUSH(v)		{ (void)(BASIC_PUSH(v), \
+                               lltrace && prtrace(TOP(), "push")); \
+                               assert(STACK_LEVEL() <= co->co_stacksize); }
+#define POP()		((void)(lltrace && prtrace(TOP(), "pop")), BASIC_POP())
+#define STACKADJ(n)	{ (void)(BASIC_STACKADJ(n), \
+                               lltrace && prtrace(TOP(), "stackadj")); \
+                               assert(STACK_LEVEL() <= co->co_stacksize); }
+#define EXT_POP(STACK_POINTER) (lltrace && prtrace(*(STACK_POINTER), "ext_pop"), *--(STACK_POINTER))
+#else
+#define PUSH(v)		BASIC_PUSH(v)
+#define POP()		BASIC_POP()
+#define STACKADJ(n)	BASIC_STACKADJ(n)
+#define EXT_POP(STACK_POINTER) (*--(STACK_POINTER))
+#endif
+
+/* Local variable macros */
+
+#define GETLOCAL(i)	(fastlocals[i])
+
+/* The SETLOCAL() macro must not DECREF the local variable in-place and
+   then store the new value; it must copy the old value to a temporary
+   value, then store the new value, and then DECREF the temporary value.
+   This is because it is possible that during the DECREF the frame is
+   accessed by other code (e.g. a __del__ method or gc.collect()) and the
+   variable would be pointing to already-freed memory. */
+#define SETLOCAL(i, value)	do { PyObject *tmp = GETLOCAL(i); \
+				     GETLOCAL(i) = value; \
+                                     Py_XDECREF(tmp); } while (0)
+
+/* Start of code */
+
+	if (f == NULL)
+		return NULL;
+
+	/* push frame */
+	if (Py_EnterRecursiveCall(""))
+		return NULL;
+
+	tstate->frame = f;
+
+	if (tstate->use_tracing) {
+		if (tstate->c_tracefunc != NULL) {
+			/* tstate->c_tracefunc, if defined, is a
+			   function that will be called on *every* entry
+			   to a code block.  Its return value, if not
+			   None, is a function that will be called at
+			   the start of each executed line of code.
+			   (Actually, the function must return itself
+			   in order to continue tracing.)  The trace
+			   functions are called with three arguments:
+			   a pointer to the current frame, a string
+			   indicating why the function is called, and
+			   an argument which depends on the situation.
+			   The global trace function is also called
+			   whenever an exception is detected. */
+			if (call_trace(tstate->c_tracefunc, tstate->c_traceobj,
+				       f, PyTrace_CALL, Py_None)) {
+				/* Trace function raised an error */
+				goto exit_eval_frame;
+			}
+		}
+		if (tstate->c_profilefunc != NULL) {
+			/* Similar for c_profilefunc, except it needn't
+			   return itself and isn't called for "line" events */
+			if (call_trace(tstate->c_profilefunc,
+				       tstate->c_profileobj,
+				       f, PyTrace_CALL, Py_None)) {
+				/* Profile function raised an error */
+				goto exit_eval_frame;
+			}
+		}
+	}
+
+	co = f->f_code;
+	names = co->co_names;
+	consts = co->co_consts;
+	fastlocals = f->f_localsplus;
+	freevars = f->f_localsplus + co->co_nlocals;
+	first_instr = (unsigned char*) PyString_AS_STRING(co->co_code);
+	/* An explanation is in order for the next line.
+
+	   f->f_lasti now refers to the index of the last instruction
+	   executed.  You might think this was obvious from the name, but
+	   this wasn't always true before 2.3!  PyFrame_New now sets
+	   f->f_lasti to -1 (i.e. the index *before* the first instruction)
+	   and YIELD_VALUE doesn't fiddle with f_lasti any more.  So this
+	   does work.  Promise. */
+	next_instr = first_instr + f->f_lasti + 1;
+	stack_pointer = f->f_stacktop;
+	assert(stack_pointer != NULL);
+	f->f_stacktop = NULL;	/* remains NULL unless yield suspends frame */
+
+#ifdef LLTRACE
+	lltrace = PyDict_GetItemString(f->f_globals, "__lltrace__") != NULL;
+#endif
+#if defined(Py_DEBUG) || defined(LLTRACE)
+	filename = PyString_AsString(co->co_filename);
+#endif
+
+	why = WHY_NOT;
+	err = 0;
+	x = Py_None;	/* Not a reference, just anything non-NULL */
+	w = NULL;
+
+	if (throwflag) { /* support for generator.throw() */
+		why = WHY_EXCEPTION;
+		goto on_error;
+	}
+
+	for (;;) {
+#ifdef WITH_TSC
+		if (inst1 == 0) {
+			/* Almost surely, the opcode executed a break
+			   or a continue, preventing inst1 from being set
+			   on the way out of the loop.
+			*/
+			READ_TIMESTAMP(inst1);
+			loop1 = inst1;
+		}
+		dump_tsc(opcode, ticked, inst0, inst1, loop0, loop1,
+			 intr0, intr1);
+		ticked = 0;
+		inst1 = 0;
+		intr0 = 0;
+		intr1 = 0;
+		READ_TIMESTAMP(loop0);
+#endif
+		assert(stack_pointer >= f->f_valuestack); /* else underflow */
+		assert(STACK_LEVEL() <= co->co_stacksize);  /* else overflow */
+
+		/* Do periodic things.  Doing this every time through
+		   the loop would add too much overhead, so we do it
+		   only every Nth instruction.  We also do it if
+		   ``things_to_do'' is set, i.e. when an asynchronous
+		   event needs attention (e.g. a signal handler or
+		   async I/O handler); see Py_AddPendingCall() and
+		   Py_MakePendingCalls() above. */
+
+		if (--_Py_Ticker < 0) {
+                        if (*next_instr == SETUP_FINALLY) {
+                                /* Make the last opcode before
+                                   a try: finally: block uninterruptable. */
+                                goto fast_next_opcode;
+                        }
+			_Py_Ticker = _Py_CheckInterval;
+			tstate->tick_counter++;
+#ifdef WITH_TSC
+			ticked = 1;
+#endif
+			if (things_to_do) {
+				if (Py_MakePendingCalls() < 0) {
+					why = WHY_EXCEPTION;
+					goto on_error;
+				}
+				if (things_to_do)
+					/* MakePendingCalls() didn't succeed.
+					   Force early re-execution of this
+					   "periodic" code, possibly after
+					   a thread switch */
+					_Py_Ticker = 0;
+			}
+#ifdef WITH_THREAD
+			if (interpreter_lock) {
+				/* Give another thread a chance */
+
+				if (PyThreadState_Swap(NULL) != tstate)
+					Py_FatalError("ceval: tstate mix-up");
+				PyThread_release_lock(interpreter_lock);
+
+				/* Other threads may run now */
+
+				PyThread_acquire_lock(interpreter_lock, 1);
+				if (PyThreadState_Swap(tstate) != NULL)
+					Py_FatalError("ceval: orphan tstate");
+
+				/* Check for thread interrupts */
+
+				if (tstate->async_exc != NULL) {
+					x = tstate->async_exc;
+					tstate->async_exc = NULL;
+					PyErr_SetNone(x);
+					Py_DECREF(x);
+					why = WHY_EXCEPTION;
+					goto on_error;
+				}
+			}
+#endif
+		}
+
+	fast_next_opcode:
+		f->f_lasti = INSTR_OFFSET();
+
+		/* line-by-line tracing support */
+
+		if (tstate->c_tracefunc != NULL && !tstate->tracing) {
+			/* see maybe_call_line_trace
+			   for expository comments */
+			f->f_stacktop = stack_pointer;
+
+			err = maybe_call_line_trace(tstate->c_tracefunc,
+						    tstate->c_traceobj,
+						    f, &instr_lb, &instr_ub,
+						    &instr_prev);
+			/* Reload possibly changed frame fields */
+			JUMPTO(f->f_lasti);
+			if (f->f_stacktop != NULL) {
+				stack_pointer = f->f_stacktop;
+				f->f_stacktop = NULL;
+			}
+			if (err) {
+				/* trace function raised an exception */
+				goto on_error;
+			}
+		}
+
+		/* Extract opcode and argument */
+
+		opcode = NEXTOP();
+		oparg = 0;   /* allows oparg to be stored in a register because
+			it doesn't have to be remembered across a full loop */
+		if (HAS_ARG(opcode))
+			oparg = NEXTARG();
+	  dispatch_opcode:
+#ifdef DYNAMIC_EXECUTION_PROFILE
+#ifdef DXPAIRS
+		dxpairs[lastopcode][opcode]++;
+		lastopcode = opcode;
+#endif
+		dxp[opcode]++;
+#endif
+
+#ifdef LLTRACE
+		/* Instruction tracing */
+
+		if (lltrace) {
+			if (HAS_ARG(opcode)) {
+				printf("%d: %d, %d\n",
+				       f->f_lasti, opcode, oparg);
+			}
+			else {
+				printf("%d: %d\n",
+				       f->f_lasti, opcode);
+			}
+		}
+#endif
+
+		/* Main switch on opcode */
+		READ_TIMESTAMP(inst0);
+
+		switch (opcode) {
+
+		/* BEWARE!
+		   It is essential that any operation that fails sets either
+		   x to NULL, err to nonzero, or why to anything but WHY_NOT,
+		   and that no operation that succeeds does this! */
+
+		/* case STOP_CODE: this is an error! */
+
+		case NOP:
+			goto fast_next_opcode;
+
+		case LOAD_FAST:
+			x = GETLOCAL(oparg);
+			if (x != NULL) {
+				Py_INCREF(x);
+				PUSH(x);
+				goto fast_next_opcode;
+			}
+			format_exc_check_arg(PyExc_UnboundLocalError,
+				UNBOUNDLOCAL_ERROR_MSG,
+				PyTuple_GetItem(co->co_varnames, oparg));
+			break;
+
+		case LOAD_CONST:
+			x = GETITEM(consts, oparg);
+			Py_INCREF(x);
+			PUSH(x);
+			goto fast_next_opcode;
+
+		PREDICTED_WITH_ARG(STORE_FAST);
+		case STORE_FAST:
+			v = POP();
+			SETLOCAL(oparg, v);
+			goto fast_next_opcode;
+
+		PREDICTED(POP_TOP);
+		case POP_TOP:
+			v = POP();
+			Py_DECREF(v);
+			goto fast_next_opcode;
+
+		case ROT_TWO:
+			v = TOP();
+			w = SECOND();
+			SET_TOP(w);
+			SET_SECOND(v);
+			goto fast_next_opcode;
+
+		case ROT_THREE:
+			v = TOP();
+			w = SECOND();
+			x = THIRD();
+			SET_TOP(w);
+			SET_SECOND(x);
+			SET_THIRD(v);
+			goto fast_next_opcode;
+
+		case ROT_FOUR:
+			u = TOP();
+			v = SECOND();
+			w = THIRD();
+			x = FOURTH();
+			SET_TOP(v);
+			SET_SECOND(w);
+			SET_THIRD(x);
+			SET_FOURTH(u);
+			goto fast_next_opcode;
+
+		case DUP_TOP:
+			v = TOP();
+			Py_INCREF(v);
+			PUSH(v);
+			goto fast_next_opcode;
+
+		case DUP_TOPX:
+			if (oparg == 2) {
+				x = TOP();
+				Py_INCREF(x);
+				w = SECOND();
+				Py_INCREF(w);
+				STACKADJ(2);
+				SET_TOP(x);
+				SET_SECOND(w);
+				goto fast_next_opcode;
+			} else if (oparg == 3) {
+				x = TOP();
+				Py_INCREF(x);
+				w = SECOND();
+				Py_INCREF(w);
+				v = THIRD();
+				Py_INCREF(v);
+				STACKADJ(3);
+				SET_TOP(x);
+				SET_SECOND(w);
+				SET_THIRD(v);
+				goto fast_next_opcode;
+			}
+			Py_FatalError("invalid argument to DUP_TOPX"
+				      " (bytecode corruption?)");
+			break;
+
+		case UNARY_POSITIVE:
+			v = TOP();
+			x = PyNumber_Positive(v);
+			Py_DECREF(v);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case UNARY_NEGATIVE:
+			v = TOP();
+			x = PyNumber_Negative(v);
+			Py_DECREF(v);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case UNARY_NOT:
+			v = TOP();
+			err = PyObject_IsTrue(v);
+			Py_DECREF(v);
+			if (err == 0) {
+				Py_INCREF(Py_True);
+				SET_TOP(Py_True);
+				continue;
+			}
+			else if (err > 0) {
+				Py_INCREF(Py_False);
+				SET_TOP(Py_False);
+				err = 0;
+				continue;
+			}
+			STACKADJ(-1);
+			break;
+
+		case UNARY_CONVERT:
+			v = TOP();
+			x = PyObject_Repr(v);
+			Py_DECREF(v);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case UNARY_INVERT:
+			v = TOP();
+			x = PyNumber_Invert(v);
+			Py_DECREF(v);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_POWER:
+			w = POP();
+			v = TOP();
+			x = PyNumber_Power(v, w, Py_None);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_MULTIPLY:
+			w = POP();
+			v = TOP();
+			x = PyNumber_Multiply(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_DIVIDE:
+			if (!_Py_QnewFlag) {
+				w = POP();
+				v = TOP();
+				x = PyNumber_Divide(v, w);
+				Py_DECREF(v);
+				Py_DECREF(w);
+				SET_TOP(x);
+				if (x != NULL) continue;
+				break;
+			}
+			/* -Qnew is in effect:	fall through to
+			   BINARY_TRUE_DIVIDE */
+		case BINARY_TRUE_DIVIDE:
+			w = POP();
+			v = TOP();
+			x = PyNumber_TrueDivide(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_FLOOR_DIVIDE:
+			w = POP();
+			v = TOP();
+			x = PyNumber_FloorDivide(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_MODULO:
+			w = POP();
+			v = TOP();
+			x = PyNumber_Remainder(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_ADD:
+			w = POP();
+			v = TOP();
+			if (PyInt_CheckExact(v) && PyInt_CheckExact(w)) {
+				/* INLINE: int + int */
+				register long a, b, i;
+				a = PyInt_AS_LONG(v);
+				b = PyInt_AS_LONG(w);
+				i = a + b;
+				if ((i^a) < 0 && (i^b) < 0)
+					goto slow_add;
+				x = PyInt_FromLong(i);
+			}
+			else if (PyString_CheckExact(v) &&
+				 PyString_CheckExact(w)) {
+				x = string_concatenate(v, w, f, next_instr);
+				/* string_concatenate consumed the ref to v */
+				goto skip_decref_vx;
+			}
+			else {
+			  slow_add:
+				x = PyNumber_Add(v, w);
+			}
+			Py_DECREF(v);
+		  skip_decref_vx:
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_SUBTRACT:
+			w = POP();
+			v = TOP();
+			if (PyInt_CheckExact(v) && PyInt_CheckExact(w)) {
+				/* INLINE: int - int */
+				register long a, b, i;
+				a = PyInt_AS_LONG(v);
+				b = PyInt_AS_LONG(w);
+				i = a - b;
+				if ((i^a) < 0 && (i^~b) < 0)
+					goto slow_sub;
+				x = PyInt_FromLong(i);
+			}
+			else {
+			  slow_sub:
+				x = PyNumber_Subtract(v, w);
+			}
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_SUBSCR:
+			w = POP();
+			v = TOP();
+			if (PyList_CheckExact(v) && PyInt_CheckExact(w)) {
+				/* INLINE: list[int] */
+				Py_ssize_t i = PyInt_AsSsize_t(w);
+				if (i < 0)
+					i += PyList_GET_SIZE(v);
+				if (i >= 0 && i < PyList_GET_SIZE(v)) {
+					x = PyList_GET_ITEM(v, i);
+					Py_INCREF(x);
+				}
+				else
+					goto slow_get;
+			}
+			else
+			  slow_get:
+				x = PyObject_GetItem(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_LSHIFT:
+			w = POP();
+			v = TOP();
+			x = PyNumber_Lshift(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_RSHIFT:
+			w = POP();
+			v = TOP();
+			x = PyNumber_Rshift(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_AND:
+			w = POP();
+			v = TOP();
+			x = PyNumber_And(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_XOR:
+			w = POP();
+			v = TOP();
+			x = PyNumber_Xor(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case BINARY_OR:
+			w = POP();
+			v = TOP();
+			x = PyNumber_Or(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case LIST_APPEND:
+			w = POP();
+			v = POP();
+			err = PyList_Append(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			if (err == 0) {
+				PREDICT(JUMP_ABSOLUTE);
+				continue;
+			}
+			break;
+
+		case INPLACE_POWER:
+			w = POP();
+			v = TOP();
+			x = PyNumber_InPlacePower(v, w, Py_None);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_MULTIPLY:
+			w = POP();
+			v = TOP();
+			x = PyNumber_InPlaceMultiply(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_DIVIDE:
+			if (!_Py_QnewFlag) {
+				w = POP();
+				v = TOP();
+				x = PyNumber_InPlaceDivide(v, w);
+				Py_DECREF(v);
+				Py_DECREF(w);
+				SET_TOP(x);
+				if (x != NULL) continue;
+				break;
+			}
+			/* -Qnew is in effect:	fall through to
+			   INPLACE_TRUE_DIVIDE */
+		case INPLACE_TRUE_DIVIDE:
+			w = POP();
+			v = TOP();
+			x = PyNumber_InPlaceTrueDivide(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_FLOOR_DIVIDE:
+			w = POP();
+			v = TOP();
+			x = PyNumber_InPlaceFloorDivide(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_MODULO:
+			w = POP();
+			v = TOP();
+			x = PyNumber_InPlaceRemainder(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_ADD:
+			w = POP();
+			v = TOP();
+			if (PyInt_CheckExact(v) && PyInt_CheckExact(w)) {
+				/* INLINE: int + int */
+				register long a, b, i;
+				a = PyInt_AS_LONG(v);
+				b = PyInt_AS_LONG(w);
+				i = a + b;
+				if ((i^a) < 0 && (i^b) < 0)
+					goto slow_iadd;
+				x = PyInt_FromLong(i);
+			}
+			else if (PyString_CheckExact(v) &&
+				 PyString_CheckExact(w)) {
+				x = string_concatenate(v, w, f, next_instr);
+				/* string_concatenate consumed the ref to v */
+				goto skip_decref_v;
+			}
+			else {
+			  slow_iadd:
+				x = PyNumber_InPlaceAdd(v, w);
+			}
+			Py_DECREF(v);
+		  skip_decref_v:
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_SUBTRACT:
+			w = POP();
+			v = TOP();
+			if (PyInt_CheckExact(v) && PyInt_CheckExact(w)) {
+				/* INLINE: int - int */
+				register long a, b, i;
+				a = PyInt_AS_LONG(v);
+				b = PyInt_AS_LONG(w);
+				i = a - b;
+				if ((i^a) < 0 && (i^~b) < 0)
+					goto slow_isub;
+				x = PyInt_FromLong(i);
+			}
+			else {
+			  slow_isub:
+				x = PyNumber_InPlaceSubtract(v, w);
+			}
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_LSHIFT:
+			w = POP();
+			v = TOP();
+			x = PyNumber_InPlaceLshift(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_RSHIFT:
+			w = POP();
+			v = TOP();
+			x = PyNumber_InPlaceRshift(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_AND:
+			w = POP();
+			v = TOP();
+			x = PyNumber_InPlaceAnd(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_XOR:
+			w = POP();
+			v = TOP();
+			x = PyNumber_InPlaceXor(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case INPLACE_OR:
+			w = POP();
+			v = TOP();
+			x = PyNumber_InPlaceOr(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case SLICE+0:
+		case SLICE+1:
+		case SLICE+2:
+		case SLICE+3:
+			if ((opcode-SLICE) & 2)
+				w = POP();
+			else
+				w = NULL;
+			if ((opcode-SLICE) & 1)
+				v = POP();
+			else
+				v = NULL;
+			u = TOP();
+			x = apply_slice(u, v, w);
+			Py_DECREF(u);
+			Py_XDECREF(v);
+			Py_XDECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case STORE_SLICE+0:
+		case STORE_SLICE+1:
+		case STORE_SLICE+2:
+		case STORE_SLICE+3:
+			if ((opcode-STORE_SLICE) & 2)
+				w = POP();
+			else
+				w = NULL;
+			if ((opcode-STORE_SLICE) & 1)
+				v = POP();
+			else
+				v = NULL;
+			u = POP();
+			t = POP();
+			err = assign_slice(u, v, w, t); /* u[v:w] = t */
+			Py_DECREF(t);
+			Py_DECREF(u);
+			Py_XDECREF(v);
+			Py_XDECREF(w);
+			if (err == 0) continue;
+			break;
+
+		case DELETE_SLICE+0:
+		case DELETE_SLICE+1:
+		case DELETE_SLICE+2:
+		case DELETE_SLICE+3:
+			if ((opcode-DELETE_SLICE) & 2)
+				w = POP();
+			else
+				w = NULL;
+			if ((opcode-DELETE_SLICE) & 1)
+				v = POP();
+			else
+				v = NULL;
+			u = POP();
+			err = assign_slice(u, v, w, (PyObject *)NULL);
+							/* del u[v:w] */
+			Py_DECREF(u);
+			Py_XDECREF(v);
+			Py_XDECREF(w);
+			if (err == 0) continue;
+			break;
+
+		case STORE_SUBSCR:
+			w = TOP();
+			v = SECOND();
+			u = THIRD();
+			STACKADJ(-3);
+			/* v[w] = u */
+			err = PyObject_SetItem(v, w, u);
+			Py_DECREF(u);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			if (err == 0) continue;
+			break;
+
+		case DELETE_SUBSCR:
+			w = TOP();
+			v = SECOND();
+			STACKADJ(-2);
+			/* del v[w] */
+			err = PyObject_DelItem(v, w);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			if (err == 0) continue;
+			break;
+
+		case PRINT_EXPR:
+			v = POP();
+			w = PySys_GetObject("displayhook");
+			if (w == NULL) {
+				PyErr_SetString(PyExc_RuntimeError,
+						"lost sys.displayhook");
+				err = -1;
+				x = NULL;
+			}
+			if (err == 0) {
+				x = PyTuple_Pack(1, v);
+				if (x == NULL)
+					err = -1;
+			}
+			if (err == 0) {
+				w = PyEval_CallObject(w, x);
+				Py_XDECREF(w);
+				if (w == NULL)
+					err = -1;
+			}
+			Py_DECREF(v);
+			Py_XDECREF(x);
+			break;
+
+		case PRINT_ITEM_TO:
+			w = stream = POP();
+			/* fall through to PRINT_ITEM */
+
+		case PRINT_ITEM:
+			v = POP();
+			if (stream == NULL || stream == Py_None) {
+				w = PySys_GetObject("stdout");
+				if (w == NULL) {
+					PyErr_SetString(PyExc_RuntimeError,
+							"lost sys.stdout");
+					err = -1;
+				}
+			}
+			/* PyFile_SoftSpace() can exececute arbitrary code
+			   if sys.stdout is an instance with a __getattr__.
+			   If __getattr__ raises an exception, w will
+			   be freed, so we need to prevent that temporarily. */
+			Py_XINCREF(w);
+			if (w != NULL && PyFile_SoftSpace(w, 0))
+				err = PyFile_WriteString(" ", w);
+			if (err == 0)
+				err = PyFile_WriteObject(v, w, Py_PRINT_RAW);
+			if (err == 0) {
+			    /* XXX move into writeobject() ? */
+			    if (PyString_Check(v)) {
+				char *s = PyString_AS_STRING(v);
+				Py_ssize_t len = PyString_GET_SIZE(v);
+				if (len == 0 ||
+				    !isspace(Py_CHARMASK(s[len-1])) ||
+				    s[len-1] == ' ')
+					PyFile_SoftSpace(w, 1);
+			    }
+#ifdef Py_USING_UNICODE
+			    else if (PyUnicode_Check(v)) {
+				Py_UNICODE *s = PyUnicode_AS_UNICODE(v);
+				Py_ssize_t len = PyUnicode_GET_SIZE(v);
+				if (len == 0 ||
+				    !Py_UNICODE_ISSPACE(s[len-1]) ||
+				    s[len-1] == ' ')
+				    PyFile_SoftSpace(w, 1);
+			    }
+#endif
+			    else
+			    	PyFile_SoftSpace(w, 1);
+			}
+			Py_XDECREF(w);
+			Py_DECREF(v);
+			Py_XDECREF(stream);
+			stream = NULL;
+			if (err == 0)
+				continue;
+			break;
+
+		case PRINT_NEWLINE_TO:
+			w = stream = POP();
+			/* fall through to PRINT_NEWLINE */
+
+		case PRINT_NEWLINE:
+			if (stream == NULL || stream == Py_None) {
+				w = PySys_GetObject("stdout");
+				if (w == NULL)
+					PyErr_SetString(PyExc_RuntimeError,
+							"lost sys.stdout");
+			}
+			if (w != NULL) {
+				err = PyFile_WriteString("\n", w);
+				if (err == 0)
+					PyFile_SoftSpace(w, 0);
+			}
+			Py_XDECREF(stream);
+			stream = NULL;
+			break;
+
+
+#ifdef CASE_TOO_BIG
+		default: switch (opcode) {
+#endif
+		case RAISE_VARARGS:
+			u = v = w = NULL;
+			switch (oparg) {
+			case 3:
+				u = POP(); /* traceback */
+				/* Fallthrough */
+			case 2:
+				v = POP(); /* value */
+				/* Fallthrough */
+			case 1:
+				w = POP(); /* exc */
+			case 0: /* Fallthrough */
+				why = do_raise(w, v, u);
+				break;
+			default:
+				PyErr_SetString(PyExc_SystemError,
+					   "bad RAISE_VARARGS oparg");
+				why = WHY_EXCEPTION;
+				break;
+			}
+			break;
+
+		case LOAD_LOCALS:
+			if ((x = f->f_locals) != NULL) {
+				Py_INCREF(x);
+				PUSH(x);
+				continue;
+			}
+			PyErr_SetString(PyExc_SystemError, "no locals");
+			break;
+
+		case RETURN_VALUE:
+			retval = POP();
+			why = WHY_RETURN;
+			goto fast_block_end;
+
+		case YIELD_VALUE:
+			retval = POP();
+			f->f_stacktop = stack_pointer;
+			why = WHY_YIELD;
+			goto fast_yield;
+
+		case EXEC_STMT:
+			w = TOP();
+			v = SECOND();
+			u = THIRD();
+			STACKADJ(-3);
+			READ_TIMESTAMP(intr0);
+			err = exec_statement(f, u, v, w);
+			READ_TIMESTAMP(intr1);
+			Py_DECREF(u);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			break;
+
+		case POP_BLOCK:
+			{
+				PyTryBlock *b = PyFrame_BlockPop(f);
+				while (STACK_LEVEL() > b->b_level) {
+					v = POP();
+					Py_DECREF(v);
+				}
+			}
+			continue;
+
+		case END_FINALLY:
+			v = POP();
+			if (PyInt_Check(v)) {
+				why = (enum why_code) PyInt_AS_LONG(v);
+				assert(why != WHY_YIELD);
+				if (why == WHY_RETURN ||
+				    why == WHY_CONTINUE)
+					retval = POP();
+			}
+			else if (PyExceptionClass_Check(v) || PyString_Check(v)) {
+				w = POP();
+				u = POP();
+				PyErr_Restore(v, w, u);
+				why = WHY_RERAISE;
+				break;
+			}
+			else if (v != Py_None) {
+				PyErr_SetString(PyExc_SystemError,
+					"'finally' pops bad exception");
+				why = WHY_EXCEPTION;
+			}
+			Py_DECREF(v);
+			break;
+
+		case BUILD_CLASS:
+			u = TOP();
+			v = SECOND();
+			w = THIRD();
+			STACKADJ(-2);
+			x = build_class(u, v, w);
+			SET_TOP(x);
+			Py_DECREF(u);
+			Py_DECREF(v);
+			Py_DECREF(w);
+			break;
+
+		case STORE_NAME:
+			w = GETITEM(names, oparg);
+			v = POP();
+			if ((x = f->f_locals) != NULL) {
+				if (PyDict_CheckExact(x))
+					err = PyDict_SetItem(x, w, v);
+				else
+					err = PyObject_SetItem(x, w, v);
+				Py_DECREF(v);
+				if (err == 0) continue;
+				break;
+			}
+			PyErr_Format(PyExc_SystemError,
+				     "no locals found when storing %s",
+				     PyObject_REPR(w));
+			break;
+
+		case DELETE_NAME:
+			w = GETITEM(names, oparg);
+			if ((x = f->f_locals) != NULL) {
+				if ((err = PyObject_DelItem(x, w)) != 0)
+					format_exc_check_arg(PyExc_NameError,
+								NAME_ERROR_MSG ,w);
+				break;
+			}
+			PyErr_Format(PyExc_SystemError,
+				     "no locals when deleting %s",
+				     PyObject_REPR(w));
+			break;
+
+		PREDICTED_WITH_ARG(UNPACK_SEQUENCE);
+		case UNPACK_SEQUENCE:
+			v = POP();
+			if (PyTuple_CheckExact(v) && PyTuple_GET_SIZE(v) == oparg) {
+				PyObject **items = ((PyTupleObject *)v)->ob_item;
+				while (oparg--) {
+					w = items[oparg];
+					Py_INCREF(w);
+					PUSH(w);
+				}
+				Py_DECREF(v);
+				continue;
+			} else if (PyList_CheckExact(v) && PyList_GET_SIZE(v) == oparg) {
+				PyObject **items = ((PyListObject *)v)->ob_item;
+				while (oparg--) {
+					w = items[oparg];
+					Py_INCREF(w);
+					PUSH(w);
+				}
+			} else if (unpack_iterable(v, oparg,
+						 stack_pointer + oparg))
+				stack_pointer += oparg;
+			else {
+				if (PyErr_ExceptionMatches(PyExc_TypeError))
+					PyErr_SetString(PyExc_TypeError,
+						"unpack non-sequence");
+				why = WHY_EXCEPTION;
+			}
+			Py_DECREF(v);
+			break;
+
+		case STORE_ATTR:
+			w = GETITEM(names, oparg);
+			v = TOP();
+			u = SECOND();
+			STACKADJ(-2);
+			err = PyObject_SetAttr(v, w, u); /* v.w = u */
+			Py_DECREF(v);
+			Py_DECREF(u);
+			if (err == 0) continue;
+			break;
+
+		case DELETE_ATTR:
+			w = GETITEM(names, oparg);
+			v = POP();
+			err = PyObject_SetAttr(v, w, (PyObject *)NULL);
+							/* del v.w */
+			Py_DECREF(v);
+			break;
+
+		case STORE_GLOBAL:
+			w = GETITEM(names, oparg);
+			v = POP();
+			err = PyDict_SetItem(f->f_globals, w, v);
+			Py_DECREF(v);
+			if (err == 0) continue;
+			break;
+
+		case DELETE_GLOBAL:
+			w = GETITEM(names, oparg);
+			if ((err = PyDict_DelItem(f->f_globals, w)) != 0)
+				format_exc_check_arg(
+				    PyExc_NameError, GLOBAL_NAME_ERROR_MSG, w);
+			break;
+
+		case LOAD_NAME:
+			w = GETITEM(names, oparg);
+			if ((v = f->f_locals) == NULL) {
+				PyErr_Format(PyExc_SystemError,
+					     "no locals when loading %s",
+					     PyObject_REPR(w));
+				break;
+			}
+			if (PyDict_CheckExact(v)) {
+				x = PyDict_GetItem(v, w);
+				Py_XINCREF(x);
+			}
+			else {
+				x = PyObject_GetItem(v, w);
+				if (x == NULL && PyErr_Occurred()) {
+					if (!PyErr_ExceptionMatches(PyExc_KeyError))
+						break;
+					PyErr_Clear();
+				}
+			}
+			if (x == NULL) {
+				x = PyDict_GetItem(f->f_globals, w);
+				if (x == NULL) {
+					x = PyDict_GetItem(f->f_builtins, w);
+					if (x == NULL) {
+						format_exc_check_arg(
+							    PyExc_NameError,
+							    NAME_ERROR_MSG ,w);
+						break;
+					}
+				}
+				Py_INCREF(x);
+			}
+			PUSH(x);
+			continue;
+
+		case LOAD_GLOBAL:
+			w = GETITEM(names, oparg);
+			if (PyString_CheckExact(w)) {
+				/* Inline the PyDict_GetItem() calls.
+				   WARNING: this is an extreme speed hack.
+				   Do not try this at home. */
+				long hash = ((PyStringObject *)w)->ob_shash;
+				if (hash != -1) {
+					PyDictObject *d;
+					PyDictEntry *e;
+					d = (PyDictObject *)(f->f_globals);
+					e = d->ma_lookup(d, w, hash);
+					if (e == NULL) {
+						x = NULL;
+						break;
+					}
+					x = e->me_value;
+					if (x != NULL) {
+						Py_INCREF(x);
+						PUSH(x);
+						continue;
+					}
+					d = (PyDictObject *)(f->f_builtins);
+					e = d->ma_lookup(d, w, hash);
+					if (e == NULL) {
+						x = NULL;
+						break;
+					}
+					x = e->me_value;
+					if (x != NULL) {
+						Py_INCREF(x);
+						PUSH(x);
+						continue;
+					}
+					goto load_global_error;
+				}
+			}
+			/* This is the un-inlined version of the code above */
+			x = PyDict_GetItem(f->f_globals, w);
+			if (x == NULL) {
+				x = PyDict_GetItem(f->f_builtins, w);
+				if (x == NULL) {
+				  load_global_error:
+					format_exc_check_arg(
+						    PyExc_NameError,
+						    GLOBAL_NAME_ERROR_MSG, w);
+					break;
+				}
+			}
+			Py_INCREF(x);
+			PUSH(x);
+			continue;
+
+		case DELETE_FAST:
+			x = GETLOCAL(oparg);
+			if (x != NULL) {
+				SETLOCAL(oparg, NULL);
+				continue;
+			}
+			format_exc_check_arg(
+				PyExc_UnboundLocalError,
+				UNBOUNDLOCAL_ERROR_MSG,
+				PyTuple_GetItem(co->co_varnames, oparg)
+				);
+			break;
+
+		case LOAD_CLOSURE:
+			x = freevars[oparg];
+			Py_INCREF(x);
+			PUSH(x);
+			if (x != NULL) continue;
+			break;
+
+		case LOAD_DEREF:
+			x = freevars[oparg];
+			w = PyCell_Get(x);
+			if (w != NULL) {
+				PUSH(w);
+				continue;
+			}
+			err = -1;
+			/* Don't stomp existing exception */
+			if (PyErr_Occurred())
+				break;
+			if (oparg < PyTuple_GET_SIZE(co->co_cellvars)) {
+				v = PyTuple_GET_ITEM(co->co_cellvars,
+						       oparg);
+			       format_exc_check_arg(
+				       PyExc_UnboundLocalError,
+				       UNBOUNDLOCAL_ERROR_MSG,
+				       v);
+			} else {
+			       v = PyTuple_GET_ITEM(
+					      co->co_freevars,
+					      oparg - PyTuple_GET_SIZE(co->co_cellvars));
+			       format_exc_check_arg(
+				       PyExc_NameError,
+				       UNBOUNDFREE_ERROR_MSG,
+				       v);
+			}
+			break;
+
+		case STORE_DEREF:
+			w = POP();
+			x = freevars[oparg];
+			PyCell_Set(x, w);
+			Py_DECREF(w);
+			continue;
+
+		case BUILD_TUPLE:
+			x = PyTuple_New(oparg);
+			if (x != NULL) {
+				for (; --oparg >= 0;) {
+					w = POP();
+					PyTuple_SET_ITEM(x, oparg, w);
+				}
+				PUSH(x);
+				continue;
+			}
+			break;
+
+		case BUILD_LIST:
+			x =  PyList_New(oparg);
+			if (x != NULL) {
+				for (; --oparg >= 0;) {
+					w = POP();
+					PyList_SET_ITEM(x, oparg, w);
+				}
+				PUSH(x);
+				continue;
+			}
+			break;
+
+		case BUILD_MAP:
+			x = PyDict_New();
+			PUSH(x);
+			if (x != NULL) continue;
+			break;
+
+		case LOAD_ATTR:
+			w = GETITEM(names, oparg);
+			v = TOP();
+			x = PyObject_GetAttr(v, w);
+			Py_DECREF(v);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case COMPARE_OP:
+			w = POP();
+			v = TOP();
+			if (PyInt_CheckExact(w) && PyInt_CheckExact(v)) {
+				/* INLINE: cmp(int, int) */
+				register long a, b;
+				register int res;
+				a = PyInt_AS_LONG(v);
+				b = PyInt_AS_LONG(w);
+				switch (oparg) {
+				case PyCmp_LT: res = a <  b; break;
+				case PyCmp_LE: res = a <= b; break;
+				case PyCmp_EQ: res = a == b; break;
+				case PyCmp_NE: res = a != b; break;
+				case PyCmp_GT: res = a >  b; break;
+				case PyCmp_GE: res = a >= b; break;
+				case PyCmp_IS: res = v == w; break;
+				case PyCmp_IS_NOT: res = v != w; break;
+				default: goto slow_compare;
+				}
+				x = res ? Py_True : Py_False;
+				Py_INCREF(x);
+			}
+			else {
+			  slow_compare:
+				x = cmp_outcome(oparg, v, w);
+			}
+			Py_DECREF(v);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x == NULL) break;
+			PREDICT(JUMP_IF_FALSE);
+			PREDICT(JUMP_IF_TRUE);
+			continue;
+
+		case IMPORT_NAME:
+			w = GETITEM(names, oparg);
+			x = PyDict_GetItemString(f->f_builtins, "__import__");
+			if (x == NULL) {
+				PyErr_SetString(PyExc_ImportError,
+						"__import__ not found");
+				break;
+			}
+			v = POP();
+			u = TOP();
+			if (PyInt_AsLong(u) != -1 || PyErr_Occurred())
+				w = PyTuple_Pack(5,
+					    w,
+					    f->f_globals,
+					    f->f_locals == NULL ?
+						  Py_None : f->f_locals,
+					    v,
+					    u);
+			else
+				w = PyTuple_Pack(4,
+					    w,
+					    f->f_globals,
+					    f->f_locals == NULL ?
+						  Py_None : f->f_locals,
+					    v);
+			Py_DECREF(v);
+			Py_DECREF(u);
+			if (w == NULL) {
+				u = POP();
+				x = NULL;
+				break;
+			}
+			READ_TIMESTAMP(intr0);
+			x = PyEval_CallObject(x, w);
+			READ_TIMESTAMP(intr1);
+			Py_DECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case IMPORT_STAR:
+			v = POP();
+			PyFrame_FastToLocals(f);
+			if ((x = f->f_locals) == NULL) {
+				PyErr_SetString(PyExc_SystemError,
+					"no locals found during 'import *'");
+				break;
+			}
+			READ_TIMESTAMP(intr0);
+			err = import_all_from(x, v);
+			READ_TIMESTAMP(intr1);
+			PyFrame_LocalsToFast(f, 0);
+			Py_DECREF(v);
+			if (err == 0) continue;
+			break;
+
+		case IMPORT_FROM:
+			w = GETITEM(names, oparg);
+			v = TOP();
+			READ_TIMESTAMP(intr0);
+			x = import_from(v, w);
+			READ_TIMESTAMP(intr1);
+			PUSH(x);
+			if (x != NULL) continue;
+			break;
+
+		case JUMP_FORWARD:
+			JUMPBY(oparg);
+			goto fast_next_opcode;
+
+		PREDICTED_WITH_ARG(JUMP_IF_FALSE);
+		case JUMP_IF_FALSE:
+			w = TOP();
+			if (w == Py_True) {
+				PREDICT(POP_TOP);
+				goto fast_next_opcode;
+			}
+			if (w == Py_False) {
+				JUMPBY(oparg);
+				goto fast_next_opcode;
+			}
+			err = PyObject_IsTrue(w);
+			if (err > 0)
+				err = 0;
+			else if (err == 0)
+				JUMPBY(oparg);
+			else
+				break;
+			continue;
+
+		PREDICTED_WITH_ARG(JUMP_IF_TRUE);
+		case JUMP_IF_TRUE:
+			w = TOP();
+			if (w == Py_False) {
+				PREDICT(POP_TOP);
+				goto fast_next_opcode;
+			}
+			if (w == Py_True) {
+				JUMPBY(oparg);
+				goto fast_next_opcode;
+			}
+			err = PyObject_IsTrue(w);
+			if (err > 0) {
+				err = 0;
+				JUMPBY(oparg);
+			}
+			else if (err == 0)
+				;
+			else
+				break;
+			continue;
+
+		PREDICTED_WITH_ARG(JUMP_ABSOLUTE);
+		case JUMP_ABSOLUTE:
+			JUMPTO(oparg);
+			continue;
+
+		case GET_ITER:
+			/* before: [obj]; after [getiter(obj)] */
+			v = TOP();
+			x = PyObject_GetIter(v);
+			Py_DECREF(v);
+			if (x != NULL) {
+				SET_TOP(x);
+				PREDICT(FOR_ITER);
+				continue;
+			}
+			STACKADJ(-1);
+			break;
+
+		PREDICTED_WITH_ARG(FOR_ITER);
+		case FOR_ITER:
+			/* before: [iter]; after: [iter, iter()] *or* [] */
+			v = TOP();
+			x = (*v->ob_type->tp_iternext)(v);
+			if (x != NULL) {
+				PUSH(x);
+				PREDICT(STORE_FAST);
+				PREDICT(UNPACK_SEQUENCE);
+				continue;
+			}
+			if (PyErr_Occurred()) {
+				if (!PyErr_ExceptionMatches(PyExc_StopIteration))
+					break;
+				PyErr_Clear();
+			}
+			/* iterator ended normally */
+ 			x = v = POP();
+			Py_DECREF(v);
+			JUMPBY(oparg);
+			continue;
+
+		case BREAK_LOOP:
+			why = WHY_BREAK;
+			goto fast_block_end;
+
+		case CONTINUE_LOOP:
+			retval = PyInt_FromLong(oparg);
+			if (!retval) {
+				x = NULL;
+				break;
+			}
+			why = WHY_CONTINUE;
+			goto fast_block_end;
+
+		case SETUP_LOOP:
+		case SETUP_EXCEPT:
+		case SETUP_FINALLY:
+			/* NOTE: If you add any new block-setup opcodes that are not try/except/finally
+			   handlers, you may need to update the PyGen_NeedsFinalizing() function. */
+
+			PyFrame_BlockSetup(f, opcode, INSTR_OFFSET() + oparg,
+					   STACK_LEVEL());
+			continue;
+
+		case WITH_CLEANUP:
+		{
+			/* TOP is the context.__exit__ bound method.
+			   Below that are 1-3 values indicating how/why
+			   we entered the finally clause:
+			   - SECOND = None
+			   - (SECOND, THIRD) = (WHY_{RETURN,CONTINUE}), retval
+			   - SECOND = WHY_*; no retval below it
+			   - (SECOND, THIRD, FOURTH) = exc_info()
+			   In the last case, we must call
+			     TOP(SECOND, THIRD, FOURTH)
+			   otherwise we must call
+			     TOP(None, None, None)
+
+			   In addition, if the stack represents an exception,
+			   *and* the function call returns a 'true' value, we
+			   "zap" this information, to prevent END_FINALLY from
+			   re-raising the exception.  (But non-local gotos
+			   should still be resumed.)
+			*/
+
+			x = TOP();
+			u = SECOND();
+			if (PyInt_Check(u) || u == Py_None) {
+				u = v = w = Py_None;
+			}
+			else {
+				v = THIRD();
+				w = FOURTH();
+			}
+			/* XXX Not the fastest way to call it... */
+			x = PyObject_CallFunctionObjArgs(x, u, v, w, NULL);
+			if (x == NULL)
+				break; /* Go to error exit */
+			if (u != Py_None && PyObject_IsTrue(x)) {
+				/* There was an exception and a true return */
+				Py_DECREF(x);
+				x = TOP(); /* Again */
+				STACKADJ(-3);
+				Py_INCREF(Py_None);
+				SET_TOP(Py_None);
+				Py_DECREF(x);
+				Py_DECREF(u);
+				Py_DECREF(v);
+				Py_DECREF(w);
+			} else {
+				/* Let END_FINALLY do its thing */
+				Py_DECREF(x);
+				x = POP();
+				Py_DECREF(x);
+			}
+			break;
+		}
+
+		case CALL_FUNCTION:
+		{
+			PyObject **sp;
+			PCALL(PCALL_ALL);
+			sp = stack_pointer;
+#ifdef WITH_TSC
+			x = call_function(&sp, oparg, &intr0, &intr1);
+#else
+			x = call_function(&sp, oparg);
+#endif
+			stack_pointer = sp;
+			PUSH(x);
+			if (x != NULL)
+				continue;
+			break;
+		}
+
+		case CALL_FUNCTION_VAR:
+		case CALL_FUNCTION_KW:
+		case CALL_FUNCTION_VAR_KW:
+		{
+		    int na = oparg & 0xff;
+		    int nk = (oparg>>8) & 0xff;
+		    int flags = (opcode - CALL_FUNCTION) & 3;
+		    int n = na + 2 * nk;
+		    PyObject **pfunc, *func, **sp;
+		    PCALL(PCALL_ALL);
+		    if (flags & CALL_FLAG_VAR)
+			    n++;
+		    if (flags & CALL_FLAG_KW)
+			    n++;
+		    pfunc = stack_pointer - n - 1;
+		    func = *pfunc;
+
+		    if (PyMethod_Check(func)
+			&& PyMethod_GET_SELF(func) != NULL) {
+			    PyObject *self = PyMethod_GET_SELF(func);
+			    Py_INCREF(self);
+			    func = PyMethod_GET_FUNCTION(func);
+			    Py_INCREF(func);
+			    Py_DECREF(*pfunc);
+			    *pfunc = self;
+			    na++;
+			    n++;
+		    } else
+			    Py_INCREF(func);
+		    sp = stack_pointer;
+		    READ_TIMESTAMP(intr0);
+		    x = ext_do_call(func, &sp, flags, na, nk);
+		    READ_TIMESTAMP(intr1);
+		    stack_pointer = sp;
+		    Py_DECREF(func);
+
+		    while (stack_pointer > pfunc) {
+			    w = POP();
+			    Py_DECREF(w);
+		    }
+		    PUSH(x);
+		    if (x != NULL)
+			    continue;
+		    break;
+		}
+
+		case MAKE_FUNCTION:
+			v = POP(); /* code object */
+			x = PyFunction_New(v, f->f_globals);
+			Py_DECREF(v);
+			/* XXX Maybe this should be a separate opcode? */
+			if (x != NULL && oparg > 0) {
+				v = PyTuple_New(oparg);
+				if (v == NULL) {
+					Py_DECREF(x);
+					x = NULL;
+					break;
+				}
+				while (--oparg >= 0) {
+					w = POP();
+					PyTuple_SET_ITEM(v, oparg, w);
+				}
+				err = PyFunction_SetDefaults(x, v);
+				Py_DECREF(v);
+			}
+			PUSH(x);
+			break;
+
+		case MAKE_CLOSURE:
+		{
+			v = POP(); /* code object */
+			x = PyFunction_New(v, f->f_globals);
+			Py_DECREF(v);
+			if (x != NULL) {
+				v = POP();
+				err = PyFunction_SetClosure(x, v);
+				Py_DECREF(v);
+			}
+			if (x != NULL && oparg > 0) {
+				v = PyTuple_New(oparg);
+				if (v == NULL) {
+					Py_DECREF(x);
+					x = NULL;
+					break;
+				}
+				while (--oparg >= 0) {
+					w = POP();
+					PyTuple_SET_ITEM(v, oparg, w);
+				}
+				err = PyFunction_SetDefaults(x, v);
+				Py_DECREF(v);
+			}
+			PUSH(x);
+			break;
+		}
+
+		case BUILD_SLICE:
+			if (oparg == 3)
+				w = POP();
+			else
+				w = NULL;
+			v = POP();
+			u = TOP();
+			x = PySlice_New(u, v, w);
+			Py_DECREF(u);
+			Py_DECREF(v);
+			Py_XDECREF(w);
+			SET_TOP(x);
+			if (x != NULL) continue;
+			break;
+
+		case EXTENDED_ARG:
+			opcode = NEXTOP();
+			oparg = oparg<<16 | NEXTARG();
+			goto dispatch_opcode;
+
+		default:
+			fprintf(stderr,
+				"XXX lineno: %d, opcode: %d\n",
+				PyCode_Addr2Line(f->f_code, f->f_lasti),
+				opcode);
+			PyErr_SetString(PyExc_SystemError, "unknown opcode");
+			why = WHY_EXCEPTION;
+			break;
+
+#ifdef CASE_TOO_BIG
+		}
+#endif
+
+		} /* switch */
+
+	    on_error:
+
+		READ_TIMESTAMP(inst1);
+
+		/* Quickly continue if no error occurred */
+
+		if (why == WHY_NOT) {
+			if (err == 0 && x != NULL) {
+#ifdef CHECKEXC
+				/* This check is expensive! */
+				if (PyErr_Occurred())
+					fprintf(stderr,
+						"XXX undetected error\n");
+				else {
+#endif
+					READ_TIMESTAMP(loop1);
+					continue; /* Normal, fast path */
+#ifdef CHECKEXC
+				}
+#endif
+			}
+			why = WHY_EXCEPTION;
+			x = Py_None;
+			err = 0;
+		}
+
+		/* Double-check exception status */
+
+		if (why == WHY_EXCEPTION || why == WHY_RERAISE) {
+			if (!PyErr_Occurred()) {
+				PyErr_SetString(PyExc_SystemError,
+					"error return without exception set");
+				why = WHY_EXCEPTION;
+			}
+		}
+#ifdef CHECKEXC
+		else {
+			/* This check is expensive! */
+			if (PyErr_Occurred()) {
+				char buf[1024];
+				sprintf(buf, "Stack unwind with exception "
+					"set and why=%d", why);
+				Py_FatalError(buf);
+			}
+		}
+#endif
+
+		/* Log traceback info if this is a real exception */
+
+		if (why == WHY_EXCEPTION) {
+			PyTraceBack_Here(f);
+
+			if (tstate->c_tracefunc != NULL)
+				call_exc_trace(tstate->c_tracefunc,
+					       tstate->c_traceobj, f);
+		}
+
+		/* For the rest, treat WHY_RERAISE as WHY_EXCEPTION */
+
+		if (why == WHY_RERAISE)
+			why = WHY_EXCEPTION;
+
+		/* Unwind stacks if a (pseudo) exception occurred */
+
+fast_block_end:
+		while (why != WHY_NOT && f->f_iblock > 0) {
+			PyTryBlock *b = PyFrame_BlockPop(f);
+
+			assert(why != WHY_YIELD);
+			if (b->b_type == SETUP_LOOP && why == WHY_CONTINUE) {
+				/* For a continue inside a try block,
+				   don't pop the block for the loop. */
+				PyFrame_BlockSetup(f, b->b_type, b->b_handler,
+						   b->b_level);
+				why = WHY_NOT;
+				JUMPTO(PyInt_AS_LONG(retval));
+				Py_DECREF(retval);
+				break;
+			}
+
+			while (STACK_LEVEL() > b->b_level) {
+				v = POP();
+				Py_XDECREF(v);
+			}
+			if (b->b_type == SETUP_LOOP && why == WHY_BREAK) {
+				why = WHY_NOT;
+				JUMPTO(b->b_handler);
+				break;
+			}
+			if (b->b_type == SETUP_FINALLY ||
+			    (b->b_type == SETUP_EXCEPT &&
+			     why == WHY_EXCEPTION)) {
+				if (why == WHY_EXCEPTION) {
+					PyObject *exc, *val, *tb;
+					PyErr_Fetch(&exc, &val, &tb);
+					if (val == NULL) {
+						val = Py_None;
+						Py_INCREF(val);
+					}
+					/* Make the raw exception data
+					   available to the handler,
+					   so a program can emulate the
+					   Python main loop.  Don't do
+					   this for 'finally'. */
+					if (b->b_type == SETUP_EXCEPT) {
+						PyErr_NormalizeException(
+							&exc, &val, &tb);
+						set_exc_info(tstate,
+							     exc, val, tb);
+					}
+					if (tb == NULL) {
+						Py_INCREF(Py_None);
+						PUSH(Py_None);
+					} else
+						PUSH(tb);
+					PUSH(val);
+					PUSH(exc);
+				}
+				else {
+					if (why & (WHY_RETURN | WHY_CONTINUE))
+						PUSH(retval);
+					v = PyInt_FromLong((long)why);
+					PUSH(v);
+				}
+				why = WHY_NOT;
+				JUMPTO(b->b_handler);
+				break;
+			}
+		} /* unwind stack */
+
+		/* End the loop if we still have an error (or return) */
+
+		if (why != WHY_NOT)
+			break;
+		READ_TIMESTAMP(loop1);
+
+	} /* main loop */
+
+	assert(why != WHY_YIELD);
+	/* Pop remaining stack entries. */
+	while (!EMPTY()) {
+		v = POP();
+		Py_XDECREF(v);
+	}
+
+	if (why != WHY_RETURN)
+		retval = NULL;
+
+fast_yield:
+	if (tstate->use_tracing) {
+		if (tstate->c_tracefunc) {
+			if (why == WHY_RETURN || why == WHY_YIELD) {
+				if (call_trace(tstate->c_tracefunc,
+					       tstate->c_traceobj, f,
+					       PyTrace_RETURN, retval)) {
+					Py_XDECREF(retval);
+					retval = NULL;
+					why = WHY_EXCEPTION;
+				}
+			}
+			else if (why == WHY_EXCEPTION) {
+				call_trace_protected(tstate->c_tracefunc,
+						     tstate->c_traceobj, f,
+						     PyTrace_RETURN, NULL);
+			}
+		}
+		if (tstate->c_profilefunc) {
+			if (why == WHY_EXCEPTION)
+				call_trace_protected(tstate->c_profilefunc,
+						     tstate->c_profileobj, f,
+						     PyTrace_RETURN, NULL);
+			else if (call_trace(tstate->c_profilefunc,
+					    tstate->c_profileobj, f,
+					    PyTrace_RETURN, retval)) {
+				Py_XDECREF(retval);
+				retval = NULL;
+				why = WHY_EXCEPTION;
+			}
+		}
+	}
+
+	if (tstate->frame->f_exc_type != NULL)
+		reset_exc_info(tstate);
+	else {
+		assert(tstate->frame->f_exc_value == NULL);
+		assert(tstate->frame->f_exc_traceback == NULL);
+	}
+
+	/* pop frame */
+    exit_eval_frame:
+	Py_LeaveRecursiveCall();
+	tstate->frame = f->f_back;
+
+	return retval;
+}
+
+/* This is gonna seem *real weird*, but if you put some other code between
+   PyEval_EvalFrame() and PyEval_EvalCodeEx() you will need to adjust
+   the test in the if statements in Misc/gdbinit (pystack and pystackv). */
+
+PyObject *
+PyEval_EvalCodeEx(PyCodeObject *co, PyObject *globals, PyObject *locals,
+	   PyObject **args, int argcount, PyObject **kws, int kwcount,
+	   PyObject **defs, int defcount, PyObject *closure)
+{
+	register PyFrameObject *f;
+	register PyObject *retval = NULL;
+	register PyObject **fastlocals, **freevars;
+	PyThreadState *tstate = PyThreadState_GET();
+	PyObject *x, *u;
+
+	if (globals == NULL) {
+		PyErr_SetString(PyExc_SystemError,
+				"PyEval_EvalCodeEx: NULL globals");
+		return NULL;
+	}
+
+	assert(tstate != NULL);
+	assert(globals != NULL);
+	f = PyFrame_New(tstate, co, globals, locals);
+	if (f == NULL)
+		return NULL;
+
+	fastlocals = f->f_localsplus;
+	freevars = f->f_localsplus + co->co_nlocals;
+
+	if (co->co_argcount > 0 ||
+	    co->co_flags & (CO_VARARGS | CO_VARKEYWORDS)) {
+		int i;
+		int n = argcount;
+		PyObject *kwdict = NULL;
+		if (co->co_flags & CO_VARKEYWORDS) {
+			kwdict = PyDict_New();
+			if (kwdict == NULL)
+				goto fail;
+			i = co->co_argcount;
+			if (co->co_flags & CO_VARARGS)
+				i++;
+			SETLOCAL(i, kwdict);
+		}
+		if (argcount > co->co_argcount) {
+			if (!(co->co_flags & CO_VARARGS)) {
+				PyErr_Format(PyExc_TypeError,
+				    "%.200s() takes %s %d "
+				    "%sargument%s (%d given)",
+				    PyString_AsString(co->co_name),
+				    defcount ? "at most" : "exactly",
+				    co->co_argcount,
+				    kwcount ? "non-keyword " : "",
+				    co->co_argcount == 1 ? "" : "s",
+				    argcount);
+				goto fail;
+			}
+			n = co->co_argcount;
+		}
+		for (i = 0; i < n; i++) {
+			x = args[i];
+			Py_INCREF(x);
+			SETLOCAL(i, x);
+		}
+		if (co->co_flags & CO_VARARGS) {
+			u = PyTuple_New(argcount - n);
+			if (u == NULL)
+				goto fail;
+			SETLOCAL(co->co_argcount, u);
+			for (i = n; i < argcount; i++) {
+				x = args[i];
+				Py_INCREF(x);
+				PyTuple_SET_ITEM(u, i-n, x);
+			}
+		}
+		for (i = 0; i < kwcount; i++) {
+			PyObject *keyword = kws[2*i];
+			PyObject *value = kws[2*i + 1];
+			int j;
+			if (keyword == NULL || !PyString_Check(keyword)) {
+				PyErr_Format(PyExc_TypeError,
+				    "%.200s() keywords must be strings",
+				    PyString_AsString(co->co_name));
+				goto fail;
+			}
+			/* XXX slow -- speed up using dictionary? */
+			for (j = 0; j < co->co_argcount; j++) {
+				PyObject *nm = PyTuple_GET_ITEM(
+					co->co_varnames, j);
+				int cmp = PyObject_RichCompareBool(
+					keyword, nm, Py_EQ);
+				if (cmp > 0)
+					break;
+				else if (cmp < 0)
+					goto fail;
+			}
+			/* Check errors from Compare */
+			if (PyErr_Occurred())
+				goto fail;
+			if (j >= co->co_argcount) {
+				if (kwdict == NULL) {
+					PyErr_Format(PyExc_TypeError,
+					    "%.200s() got an unexpected "
+					    "keyword argument '%.400s'",
+					    PyString_AsString(co->co_name),
+					    PyString_AsString(keyword));
+					goto fail;
+				}
+				PyDict_SetItem(kwdict, keyword, value);
+			}
+			else {
+				if (GETLOCAL(j) != NULL) {
+					PyErr_Format(PyExc_TypeError,
+					     "%.200s() got multiple "
+					     "values for keyword "
+					     "argument '%.400s'",
+					     PyString_AsString(co->co_name),
+					     PyString_AsString(keyword));
+					goto fail;
+				}
+				Py_INCREF(value);
+				SETLOCAL(j, value);
+			}
+		}
+		if (argcount < co->co_argcount) {
+			int m = co->co_argcount - defcount;
+			for (i = argcount; i < m; i++) {
+				if (GETLOCAL(i) == NULL) {
+					PyErr_Format(PyExc_TypeError,
+					    "%.200s() takes %s %d "
+					    "%sargument%s (%d given)",
+					    PyString_AsString(co->co_name),
+					    ((co->co_flags & CO_VARARGS) ||
+					     defcount) ? "at least"
+						       : "exactly",
+					    m, kwcount ? "non-keyword " : "",
+					    m == 1 ? "" : "s", i);
+					goto fail;
+				}
+			}
+			if (n > m)
+				i = n - m;
+			else
+				i = 0;
+			for (; i < defcount; i++) {
+				if (GETLOCAL(m+i) == NULL) {
+					PyObject *def = defs[i];
+					Py_INCREF(def);
+					SETLOCAL(m+i, def);
+				}
+			}
+		}
+	}
+	else {
+		if (argcount > 0 || kwcount > 0) {
+			PyErr_Format(PyExc_TypeError,
+				     "%.200s() takes no arguments (%d given)",
+				     PyString_AsString(co->co_name),
+				     argcount + kwcount);
+			goto fail;
+		}
+	}
+	/* Allocate and initialize storage for cell vars, and copy free
+	   vars into frame.  This isn't too efficient right now. */
+	if (PyTuple_GET_SIZE(co->co_cellvars)) {
+		int i, j, nargs, found;
+		char *cellname, *argname;
+		PyObject *c;
+
+		nargs = co->co_argcount;
+		if (co->co_flags & CO_VARARGS)
+			nargs++;
+		if (co->co_flags & CO_VARKEYWORDS)
+			nargs++;
+
+		/* Initialize each cell var, taking into account
+		   cell vars that are initialized from arguments.
+
+		   Should arrange for the compiler to put cellvars
+		   that are arguments at the beginning of the cellvars
+		   list so that we can march over it more efficiently?
+		*/
+		for (i = 0; i < PyTuple_GET_SIZE(co->co_cellvars); ++i) {
+			cellname = PyString_AS_STRING(
+				PyTuple_GET_ITEM(co->co_cellvars, i));
+			found = 0;
+			for (j = 0; j < nargs; j++) {
+				argname = PyString_AS_STRING(
+					PyTuple_GET_ITEM(co->co_varnames, j));
+				if (strcmp(cellname, argname) == 0) {
+					c = PyCell_New(GETLOCAL(j));
+					if (c == NULL)
+						goto fail;
+					GETLOCAL(co->co_nlocals + i) = c;
+					found = 1;
+					break;
+				}
+			}
+			if (found == 0) {
+				c = PyCell_New(NULL);
+				if (c == NULL)
+					goto fail;
+				SETLOCAL(co->co_nlocals + i, c);
+			}
+		}
+	}
+	if (PyTuple_GET_SIZE(co->co_freevars)) {
+		int i;
+		for (i = 0; i < PyTuple_GET_SIZE(co->co_freevars); ++i) {
+			PyObject *o = PyTuple_GET_ITEM(closure, i);
+			Py_INCREF(o);
+			freevars[PyTuple_GET_SIZE(co->co_cellvars) + i] = o;
+		}
+	}
+
+	if (co->co_flags & CO_GENERATOR) {
+		/* Don't need to keep the reference to f_back, it will be set
+		 * when the generator is resumed. */
+		Py_XDECREF(f->f_back);
+		f->f_back = NULL;
+
+		PCALL(PCALL_GENERATOR);
+
+		/* Create a new generator that owns the ready to run frame
+		 * and return that as the value. */
+		return PyGen_New(f);
+	}
+
+        retval = PyEval_EvalFrameEx(f,0);
+
+  fail: /* Jump here from prelude on failure */
+
+	/* decref'ing the frame can cause __del__ methods to get invoked,
+	   which can call back into Python.  While we're done with the
+	   current Python frame (f), the associated C stack is still in use,
+	   so recursion_depth must be boosted for the duration.
+	*/
+	assert(tstate != NULL);
+	++tstate->recursion_depth;
+        Py_DECREF(f);
+	--tstate->recursion_depth;
+	return retval;
+}
+
+
+/* Implementation notes for set_exc_info() and reset_exc_info():
+
+- Below, 'exc_ZZZ' stands for 'exc_type', 'exc_value' and
+  'exc_traceback'.  These always travel together.
+
+- tstate->curexc_ZZZ is the "hot" exception that is set by
+  PyErr_SetString(), cleared by PyErr_Clear(), and so on.
+
+- Once an exception is caught by an except clause, it is transferred
+  from tstate->curexc_ZZZ to tstate->exc_ZZZ, from which sys.exc_info()
+  can pick it up.  This is the primary task of set_exc_info().
+  XXX That can't be right:  set_exc_info() doesn't look at tstate->curexc_ZZZ.
+
+- Now let me explain the complicated dance with frame->f_exc_ZZZ.
+
+  Long ago, when none of this existed, there were just a few globals:
+  one set corresponding to the "hot" exception, and one set
+  corresponding to sys.exc_ZZZ.  (Actually, the latter weren't C
+  globals; they were simply stored as sys.exc_ZZZ.  For backwards
+  compatibility, they still are!)  The problem was that in code like
+  this:
+
+     try:
+	"something that may fail"
+     except "some exception":
+	"do something else first"
+	"print the exception from sys.exc_ZZZ."
+
+  if "do something else first" invoked something that raised and caught
+  an exception, sys.exc_ZZZ were overwritten.  That was a frequent
+  cause of subtle bugs.  I fixed this by changing the semantics as
+  follows:
+
+    - Within one frame, sys.exc_ZZZ will hold the last exception caught
+      *in that frame*.
+
+    - But initially, and as long as no exception is caught in a given
+      frame, sys.exc_ZZZ will hold the last exception caught in the
+      previous frame (or the frame before that, etc.).
+
+  The first bullet fixed the bug in the above example.  The second
+  bullet was for backwards compatibility: it was (and is) common to
+  have a function that is called when an exception is caught, and to
+  have that function access the caught exception via sys.exc_ZZZ.
+  (Example: traceback.print_exc()).
+
+  At the same time I fixed the problem that sys.exc_ZZZ weren't
+  thread-safe, by introducing sys.exc_info() which gets it from tstate;
+  but that's really a separate improvement.
+
+  The reset_exc_info() function in ceval.c restores the tstate->exc_ZZZ
+  variables to what they were before the current frame was called.  The
+  set_exc_info() function saves them on the frame so that
+  reset_exc_info() can restore them.  The invariant is that
+  frame->f_exc_ZZZ is NULL iff the current frame never caught an
+  exception (where "catching" an exception applies only to successful
+  except clauses); and if the current frame ever caught an exception,
+  frame->f_exc_ZZZ is the exception that was stored in tstate->exc_ZZZ
+  at the start of the current frame.
+
+*/
+
+static void
+set_exc_info(PyThreadState *tstate,
+	     PyObject *type, PyObject *value, PyObject *tb)
+{
+	PyFrameObject *frame = tstate->frame;
+	PyObject *tmp_type, *tmp_value, *tmp_tb;
+
+	assert(type != NULL);
+	assert(frame != NULL);
+	if (frame->f_exc_type == NULL) {
+		assert(frame->f_exc_value == NULL);
+		assert(frame->f_exc_traceback == NULL);
+		/* This frame didn't catch an exception before. */
+		/* Save previous exception of this thread in this frame. */
+		if (tstate->exc_type == NULL) {
+			/* XXX Why is this set to Py_None? */
+			Py_INCREF(Py_None);
+			tstate->exc_type = Py_None;
+		}
+		Py_INCREF(tstate->exc_type);
+		Py_XINCREF(tstate->exc_value);
+		Py_XINCREF(tstate->exc_traceback);
+		frame->f_exc_type = tstate->exc_type;
+		frame->f_exc_value = tstate->exc_value;
+		frame->f_exc_traceback = tstate->exc_traceback;
+	}
+	/* Set new exception for this thread. */
+	tmp_type = tstate->exc_type;
+	tmp_value = tstate->exc_value;
+	tmp_tb = tstate->exc_traceback;
+	Py_INCREF(type);
+	Py_XINCREF(value);
+	Py_XINCREF(tb);
+	tstate->exc_type = type;
+	tstate->exc_value = value;
+	tstate->exc_traceback = tb;
+	Py_XDECREF(tmp_type);
+	Py_XDECREF(tmp_value);
+	Py_XDECREF(tmp_tb);
+	/* For b/w compatibility */
+	PySys_SetObject("exc_type", type);
+	PySys_SetObject("exc_value", value);
+	PySys_SetObject("exc_traceback", tb);
+}
+
+static void
+reset_exc_info(PyThreadState *tstate)
+{
+	PyFrameObject *frame;
+	PyObject *tmp_type, *tmp_value, *tmp_tb;
+
+	/* It's a precondition that the thread state's frame caught an
+	 * exception -- verify in a debug build.
+	 */
+	assert(tstate != NULL);
+	frame = tstate->frame;
+	assert(frame != NULL);
+	assert(frame->f_exc_type != NULL);
+
+	/* Copy the frame's exception info back to the thread state. */
+	tmp_type = tstate->exc_type;
+	tmp_value = tstate->exc_value;
+	tmp_tb = tstate->exc_traceback;
+	Py_INCREF(frame->f_exc_type);
+	Py_XINCREF(frame->f_exc_value);
+	Py_XINCREF(frame->f_exc_traceback);
+	tstate->exc_type = frame->f_exc_type;
+	tstate->exc_value = frame->f_exc_value;
+	tstate->exc_traceback = frame->f_exc_traceback;
+	Py_XDECREF(tmp_type);
+	Py_XDECREF(tmp_value);
+	Py_XDECREF(tmp_tb);
+
+	/* For b/w compatibility */
+	PySys_SetObject("exc_type", frame->f_exc_type);
+	PySys_SetObject("exc_value", frame->f_exc_value);
+	PySys_SetObject("exc_traceback", frame->f_exc_traceback);
+
+	/* Clear the frame's exception info. */
+	tmp_type = frame->f_exc_type;
+	tmp_value = frame->f_exc_value;
+	tmp_tb = frame->f_exc_traceback;
+	frame->f_exc_type = NULL;
+	frame->f_exc_value = NULL;
+	frame->f_exc_traceback = NULL;
+	Py_DECREF(tmp_type);
+	Py_XDECREF(tmp_value);
+	Py_XDECREF(tmp_tb);
+}
+
+/* Logic for the raise statement (too complicated for inlining).
+   This *consumes* a reference count to each of its arguments. */
+static enum why_code
+do_raise(PyObject *type, PyObject *value, PyObject *tb)
+{
+	if (type == NULL) {
+		/* Reraise */
+		PyThreadState *tstate = PyThreadState_GET();
+		type = tstate->exc_type == NULL ? Py_None : tstate->exc_type;
+		value = tstate->exc_value;
+		tb = tstate->exc_traceback;
+		Py_XINCREF(type);
+		Py_XINCREF(value);
+		Py_XINCREF(tb);
+	}
+
+	/* We support the following forms of raise:
+	   raise <class>, <classinstance>
+	   raise <class>, <argument tuple>
+	   raise <class>, None
+	   raise <class>, <argument>
+	   raise <classinstance>, None
+	   raise <string>, <object>
+	   raise <string>, None
+
+	   An omitted second argument is the same as None.
+
+	   In addition, raise <tuple>, <anything> is the same as
+	   raising the tuple's first item (and it better have one!);
+	   this rule is applied recursively.
+
+	   Finally, an optional third argument can be supplied, which
+	   gives the traceback to be substituted (useful when
+	   re-raising an exception after examining it).  */
+
+	/* First, check the traceback argument, replacing None with
+	   NULL. */
+	if (tb == Py_None) {
+		Py_DECREF(tb);
+		tb = NULL;
+	}
+	else if (tb != NULL && !PyTraceBack_Check(tb)) {
+		PyErr_SetString(PyExc_TypeError,
+			   "raise: arg 3 must be a traceback or None");
+		goto raise_error;
+	}
+
+	/* Next, replace a missing value with None */
+	if (value == NULL) {
+		value = Py_None;
+		Py_INCREF(value);
+	}
+
+	/* Next, repeatedly, replace a tuple exception with its first item */
+	while (PyTuple_Check(type) && PyTuple_Size(type) > 0) {
+		PyObject *tmp = type;
+		type = PyTuple_GET_ITEM(type, 0);
+		Py_INCREF(type);
+		Py_DECREF(tmp);
+	}
+
+	if (PyString_CheckExact(type)) {
+		/* Raising builtin string is deprecated but still allowed --
+		 * do nothing.  Raising an instance of a new-style str
+		 * subclass is right out. */
+		if (PyErr_Warn(PyExc_DeprecationWarning,
+			   "raising a string exception is deprecated"))
+			goto raise_error;
+	}
+	else if (PyExceptionClass_Check(type))
+		PyErr_NormalizeException(&type, &value, &tb);
+
+	else if (PyExceptionInstance_Check(type)) {
+		/* Raising an instance.  The value should be a dummy. */
+		if (value != Py_None) {
+			PyErr_SetString(PyExc_TypeError,
+			  "instance exception may not have a separate value");
+			goto raise_error;
+		}
+		else {
+			/* Normalize to raise <class>, <instance> */
+			Py_DECREF(value);
+			value = type;
+			type = PyExceptionInstance_Class(type);
+			Py_INCREF(type);
+		}
+	}
+	else {
+		/* Not something you can raise.  You get an exception
+		   anyway, just not what you specified :-) */
+		PyErr_Format(PyExc_TypeError,
+			     "exceptions must be classes, instances, or "
+			     "strings (deprecated), not %s",
+			     type->ob_type->tp_name);
+		goto raise_error;
+	}
+	PyErr_Restore(type, value, tb);
+	if (tb == NULL)
+		return WHY_EXCEPTION;
+	else
+		return WHY_RERAISE;
+ raise_error:
+	Py_XDECREF(value);
+	Py_XDECREF(type);
+	Py_XDECREF(tb);
+	return WHY_EXCEPTION;
+}
+
+/* Iterate v argcnt times and store the results on the stack (via decreasing
+   sp).  Return 1 for success, 0 if error. */
+
+static int
+unpack_iterable(PyObject *v, int argcnt, PyObject **sp)
+{
+	int i = 0;
+	PyObject *it;  /* iter(v) */
+	PyObject *w;
+
+	assert(v != NULL);
+
+	it = PyObject_GetIter(v);
+	if (it == NULL)
+		goto Error;
+
+	for (; i < argcnt; i++) {
+		w = PyIter_Next(it);
+		if (w == NULL) {
+			/* Iterator done, via error or exhaustion. */
+			if (!PyErr_Occurred()) {
+				PyErr_Format(PyExc_ValueError,
+					"need more than %d value%s to unpack",
+					i, i == 1 ? "" : "s");
+			}
+			goto Error;
+		}
+		*--sp = w;
+	}
+
+	/* We better have exhausted the iterator now. */
+	w = PyIter_Next(it);
+	if (w == NULL) {
+		if (PyErr_Occurred())
+			goto Error;
+		Py_DECREF(it);
+		return 1;
+	}
+	Py_DECREF(w);
+	PyErr_SetString(PyExc_ValueError, "too many values to unpack");
+	/* fall through */
+Error:
+	for (; i > 0; i--, sp++)
+		Py_DECREF(*sp);
+	Py_XDECREF(it);
+	return 0;
+}
+
+
+#ifdef LLTRACE
+static int
+prtrace(PyObject *v, char *str)
+{
+	printf("%s ", str);
+	if (PyObject_Print(v, stdout, 0) != 0)
+		PyErr_Clear(); /* Don't know what else to do */
+	printf("\n");
+	return 1;
+}
+#endif
+
+static void
+call_exc_trace(Py_tracefunc func, PyObject *self, PyFrameObject *f)
+{
+	PyObject *type, *value, *traceback, *arg;
+	int err;
+	PyErr_Fetch(&type, &value, &traceback);
+	if (value == NULL) {
+		value = Py_None;
+		Py_INCREF(value);
+	}
+	arg = PyTuple_Pack(3, type, value, traceback);
+	if (arg == NULL) {
+		PyErr_Restore(type, value, traceback);
+		return;
+	}
+	err = call_trace(func, self, f, PyTrace_EXCEPTION, arg);
+	Py_DECREF(arg);
+	if (err == 0)
+		PyErr_Restore(type, value, traceback);
+	else {
+		Py_XDECREF(type);
+		Py_XDECREF(value);
+		Py_XDECREF(traceback);
+	}
+}
+
+static void
+call_trace_protected(Py_tracefunc func, PyObject *obj, PyFrameObject *frame,
+		     int what, PyObject *arg)
+{
+	PyObject *type, *value, *traceback;
+	int err;
+	PyErr_Fetch(&type, &value, &traceback);
+	err = call_trace(func, obj, frame, what, arg);
+	if (err == 0)
+		PyErr_Restore(type, value, traceback);
+	else {
+		Py_XDECREF(type);
+		Py_XDECREF(value);
+		Py_XDECREF(traceback);
+	}
+}
+
+static int
+call_trace(Py_tracefunc func, PyObject *obj, PyFrameObject *frame,
+	   int what, PyObject *arg)
+{
+	register PyThreadState *tstate = frame->f_tstate;
+	int result;
+	if (tstate->tracing)
+		return 0;
+	tstate->tracing++;
+	tstate->use_tracing = 0;
+	result = func(obj, frame, what, arg);
+	tstate->use_tracing = ((tstate->c_tracefunc != NULL)
+			       || (tstate->c_profilefunc != NULL));
+	tstate->tracing--;
+	return result;
+}
+
+PyObject *
+_PyEval_CallTracing(PyObject *func, PyObject *args)
+{
+	PyFrameObject *frame = PyEval_GetFrame();
+	PyThreadState *tstate = frame->f_tstate;
+	int save_tracing = tstate->tracing;
+	int save_use_tracing = tstate->use_tracing;
+	PyObject *result;
+
+	tstate->tracing = 0;
+	tstate->use_tracing = ((tstate->c_tracefunc != NULL)
+			       || (tstate->c_profilefunc != NULL));
+	result = PyObject_Call(func, args, NULL);
+	tstate->tracing = save_tracing;
+	tstate->use_tracing = save_use_tracing;
+	return result;
+}
+
+static int
+maybe_call_line_trace(Py_tracefunc func, PyObject *obj,
+		      PyFrameObject *frame, int *instr_lb, int *instr_ub,
+		      int *instr_prev)
+{
+	int result = 0;
+
+        /* If the last instruction executed isn't in the current
+           instruction window, reset the window.  If the last
+           instruction happens to fall at the start of a line or if it
+           represents a jump backwards, call the trace function.
+        */
+	if ((frame->f_lasti < *instr_lb || frame->f_lasti >= *instr_ub)) {
+                int line;
+                PyAddrPair bounds;
+
+                line = PyCode_CheckLineNumber(frame->f_code, frame->f_lasti,
+                                              &bounds);
+                if (line >= 0) {
+			frame->f_lineno = line;
+			result = call_trace(func, obj, frame,
+					    PyTrace_LINE, Py_None);
+                }
+                *instr_lb = bounds.ap_lower;
+                *instr_ub = bounds.ap_upper;
+	}
+	else if (frame->f_lasti <= *instr_prev) {
+		result = call_trace(func, obj, frame, PyTrace_LINE, Py_None);
+	}
+	*instr_prev = frame->f_lasti;
+	return result;
+}
+
+void
+PyEval_SetProfile(Py_tracefunc func, PyObject *arg)
+{
+	PyThreadState *tstate = PyThreadState_GET();
+	PyObject *temp = tstate->c_profileobj;
+	Py_XINCREF(arg);
+	tstate->c_profilefunc = NULL;
+	tstate->c_profileobj = NULL;
+	/* Must make sure that tracing is not ignored if 'temp' is freed */
+	tstate->use_tracing = tstate->c_tracefunc != NULL;
+	Py_XDECREF(temp);
+	tstate->c_profilefunc = func;
+	tstate->c_profileobj = arg;
+	/* Flag that tracing or profiling is turned on */
+	tstate->use_tracing = (func != NULL) || (tstate->c_tracefunc != NULL);
+}
+
+void
+PyEval_SetTrace(Py_tracefunc func, PyObject *arg)
+{
+	PyThreadState *tstate = PyThreadState_GET();
+	PyObject *temp = tstate->c_traceobj;
+	Py_XINCREF(arg);
+	tstate->c_tracefunc = NULL;
+	tstate->c_traceobj = NULL;
+	/* Must make sure that profiling is not ignored if 'temp' is freed */
+	tstate->use_tracing = tstate->c_profilefunc != NULL;
+	Py_XDECREF(temp);
+	tstate->c_tracefunc = func;
+	tstate->c_traceobj = arg;
+	/* Flag that tracing or profiling is turned on */
+	tstate->use_tracing = ((func != NULL)
+			       || (tstate->c_profilefunc != NULL));
+}
+
+PyObject *
+PyEval_GetBuiltins(void)
+{
+	PyFrameObject *current_frame = PyEval_GetFrame();
+	if (current_frame == NULL)
+		return PyThreadState_GET()->interp->builtins;
+	else
+		return current_frame->f_builtins;
+}
+
+PyObject *
+PyEval_GetLocals(void)
+{
+	PyFrameObject *current_frame = PyEval_GetFrame();
+	if (current_frame == NULL)
+		return NULL;
+	PyFrame_FastToLocals(current_frame);
+	return current_frame->f_locals;
+}
+
+PyObject *
+PyEval_GetGlobals(void)
+{
+	PyFrameObject *current_frame = PyEval_GetFrame();
+	if (current_frame == NULL)
+		return NULL;
+	else
+		return current_frame->f_globals;
+}
+
+PyFrameObject *
+PyEval_GetFrame(void)
+{
+	PyThreadState *tstate = PyThreadState_GET();
+	return _PyThreadState_GetFrame(tstate);
+}
+
+int
+PyEval_GetRestricted(void)
+{
+	PyFrameObject *current_frame = PyEval_GetFrame();
+	return current_frame == NULL ? 0 : PyFrame_IsRestricted(current_frame);
+}
+
+int
+PyEval_MergeCompilerFlags(PyCompilerFlags *cf)
+{
+	PyFrameObject *current_frame = PyEval_GetFrame();
+	int result = cf->cf_flags != 0;
+
+	if (current_frame != NULL) {
+		const int codeflags = current_frame->f_code->co_flags;
+		const int compilerflags = codeflags & PyCF_MASK;
+		if (compilerflags) {
+			result = 1;
+			cf->cf_flags |= compilerflags;
+		}
+#if 0 /* future keyword */
+		if (codeflags & CO_GENERATOR_ALLOWED) {
+			result = 1;
+			cf->cf_flags |= CO_GENERATOR_ALLOWED;
+		}
+#endif
+	}
+	return result;
+}
+
+int
+Py_FlushLine(void)
+{
+	PyObject *f = PySys_GetObject("stdout");
+	if (f == NULL)
+		return 0;
+	if (!PyFile_SoftSpace(f, 0))
+		return 0;
+	return PyFile_WriteString("\n", f);
+}
+
+
+/* External interface to call any callable object.
+   The arg must be a tuple or NULL. */
+
+#undef PyEval_CallObject
+/* for backward compatibility: export this interface */
+
+PyObject *
+PyEval_CallObject(PyObject *func, PyObject *arg)
+{
+	return PyEval_CallObjectWithKeywords(func, arg, (PyObject *)NULL);
+}
+#define PyEval_CallObject(func,arg) \
+        PyEval_CallObjectWithKeywords(func, arg, (PyObject *)NULL)
+
+PyObject *
+PyEval_CallObjectWithKeywords(PyObject *func, PyObject *arg, PyObject *kw)
+{
+	PyObject *result;
+
+	if (arg == NULL) {
+		arg = PyTuple_New(0);
+		if (arg == NULL)
+			return NULL;
+	}
+	else if (!PyTuple_Check(arg)) {
+		PyErr_SetString(PyExc_TypeError,
+				"argument list must be a tuple");
+		return NULL;
+	}
+	else
+		Py_INCREF(arg);
+
+	if (kw != NULL && !PyDict_Check(kw)) {
+		PyErr_SetString(PyExc_TypeError,
+				"keyword list must be a dictionary");
+		Py_DECREF(arg);
+		return NULL;
+	}
+
+	result = PyObject_Call(func, arg, kw);
+	Py_DECREF(arg);
+	return result;
+}
+
+const char *
+PyEval_GetFuncName(PyObject *func)
+{
+	if (PyMethod_Check(func))
+		return PyEval_GetFuncName(PyMethod_GET_FUNCTION(func));
+	else if (PyFunction_Check(func))
+		return PyString_AsString(((PyFunctionObject*)func)->func_name);
+	else if (PyCFunction_Check(func))
+		return ((PyCFunctionObject*)func)->m_ml->ml_name;
+	else if (PyClass_Check(func))
+		return PyString_AsString(((PyClassObject*)func)->cl_name);
+	else if (PyInstance_Check(func)) {
+		return PyString_AsString(
+			((PyInstanceObject*)func)->in_class->cl_name);
+	} else {
+		return func->ob_type->tp_name;
+	}
+}
+
+const char *
+PyEval_GetFuncDesc(PyObject *func)
+{
+	if (PyMethod_Check(func))
+		return "()";
+	else if (PyFunction_Check(func))
+		return "()";
+	else if (PyCFunction_Check(func))
+		return "()";
+	else if (PyClass_Check(func))
+		return " constructor";
+	else if (PyInstance_Check(func)) {
+		return " instance";
+	} else {
+		return " object";
+	}
+}
+
+static void
+err_args(PyObject *func, int flags, int nargs)
+{
+	if (flags & METH_NOARGS)
+		PyErr_Format(PyExc_TypeError,
+			     "%.200s() takes no arguments (%d given)",
+			     ((PyCFunctionObject *)func)->m_ml->ml_name,
+			     nargs);
+	else
+		PyErr_Format(PyExc_TypeError,
+			     "%.200s() takes exactly one argument (%d given)",
+			     ((PyCFunctionObject *)func)->m_ml->ml_name,
+			     nargs);
+}
+
+#define C_TRACE(x, call) \
+if (tstate->use_tracing && tstate->c_profilefunc) { \
+	if (call_trace(tstate->c_profilefunc, \
+		tstate->c_profileobj, \
+		tstate->frame, PyTrace_C_CALL, \
+		func)) { \
+		x = NULL; \
+	} \
+	else { \
+		x = call; \
+		if (tstate->c_profilefunc != NULL) { \
+			if (x == NULL) { \
+				call_trace_protected(tstate->c_profilefunc, \
+					tstate->c_profileobj, \
+					tstate->frame, PyTrace_C_EXCEPTION, \
+					func); \
+				/* XXX should pass (type, value, tb) */ \
+			} else { \
+				if (call_trace(tstate->c_profilefunc, \
+					tstate->c_profileobj, \
+					tstate->frame, PyTrace_C_RETURN, \
+					func)) { \
+					Py_DECREF(x); \
+					x = NULL; \
+				} \
+			} \
+		} \
+	} \
+} else { \
+	x = call; \
+	}
+
+static PyObject *
+call_function(PyObject ***pp_stack, int oparg
+#ifdef WITH_TSC
+		, uint64* pintr0, uint64* pintr1
+#endif
+		)
+{
+	int na = oparg & 0xff;
+	int nk = (oparg>>8) & 0xff;
+	int n = na + 2 * nk;
+	PyObject **pfunc = (*pp_stack) - n - 1;
+	PyObject *func = *pfunc;
+	PyObject *x, *w;
+
+	/* Always dispatch PyCFunction first, because these are
+	   presumed to be the most frequent callable object.
+	*/
+	if (PyCFunction_Check(func) && nk == 0) {
+		int flags = PyCFunction_GET_FLAGS(func);
+		PyThreadState *tstate = PyThreadState_GET();
+
+		PCALL(PCALL_CFUNCTION);
+		if (flags & (METH_NOARGS | METH_O)) {
+			PyCFunction meth = PyCFunction_GET_FUNCTION(func);
+			PyObject *self = PyCFunction_GET_SELF(func);
+			if (flags & METH_NOARGS && na == 0) {
+				C_TRACE(x, (*meth)(self,NULL));
+			}
+			else if (flags & METH_O && na == 1) {
+				PyObject *arg = EXT_POP(*pp_stack);
+				C_TRACE(x, (*meth)(self,arg));
+				Py_DECREF(arg);
+			}
+			else {
+				err_args(func, flags, na);
+				x = NULL;
+			}
+		}
+		else {
+			PyObject *callargs;
+			callargs = load_args(pp_stack, na);
+			READ_TIMESTAMP(*pintr0);
+			C_TRACE(x, PyCFunction_Call(func,callargs,NULL));
+			READ_TIMESTAMP(*pintr1);
+			Py_XDECREF(callargs);
+		}
+	} else {
+		if (PyMethod_Check(func) && PyMethod_GET_SELF(func) != NULL) {
+			/* optimize access to bound methods */
+			PyObject *self = PyMethod_GET_SELF(func);
+			PCALL(PCALL_METHOD);
+			PCALL(PCALL_BOUND_METHOD);
+			Py_INCREF(self);
+			func = PyMethod_GET_FUNCTION(func);
+			Py_INCREF(func);
+			Py_DECREF(*pfunc);
+			*pfunc = self;
+			na++;
+			n++;
+		} else
+			Py_INCREF(func);
+			
+		READ_TIMESTAMP(*pintr0);
+				//-----------------------------------------------------------
+		// Nagy		
+		PyThreadState* tstate = PyThreadState_GET();
+	
+		// I found out that tstate address and thread_id are ONLY unique among running threads
+		// not globally. I am using address of the CCT tree instead as thread id both for trace generation
+		// and CCT update.
+		PyFrameObject* current_frame = PyEval_GetFrame();
+		// Method ID: Using the address of PyFunctionObject representing the callee function is not always unique
+		// One case is calling methods for class definition.
+				
+		char* calleeName;
+		char* fullCalleeName;
+		char* callerName;
+		UL callerId, calleeId;
+		char* fileName, *fileName2; /*caller, callee source files. DO NOT free those. They point to internal strings.*/
+		
+		callerId = current_frame->f_code;
+		calleeId = ((PyFunctionObject*)func)->func_code;
+		static char* logMsg;
+		int logEnabled;
+		ULL timestamp;
+		
+		
+		fileName="null"; fileName2="null";
+		timestamp = 0;
+		if (Py_cntCalls){
+			if (PyCFunction_Check(func) || PyFunction_Check(func))
+			incTotalCallCount();
+		}
+			
+		if (Py_txtLogCalls || Py_logCalls){
+			if (Py_sampleLogs){
+				logEnabled = decSampleCounter();
+			}else
+				logEnabled = 1;
+		}else
+			logEnabled = 0;
+
+		// if any of the profiling options
+		if (Py_CCT || Py_txtCCT || logEnabled){
+			calleeName = PyEval_GetFuncName(func);
+			fullCalleeName = (char*) malloc(200);
+					
+			if (current_frame != NULL){
+				callerName = PyString_AsString(current_frame->f_code->co_name);
+				fileName = PyString_AsString(current_frame->f_code->co_filename);
+			}
+			
+			
+			// handle python calls only for now
+			if (PyCFunction_Check(func) || PyFunction_Check(func)){
+				if (Py_logCalls || Py_txtLogCalls){
+					if (PyFunction_Check(func)){		
+						if (((PyFunctionObject*)func)->func_code == NULL){
+							fileName2 = "null";
+						}else{
+							// getting target file name
+							if (((PyCodeObject*)((PyFunctionObject*)func)->func_code)->co_filename != NULL)
+								fileName2 = PyString_AsString(((PyCodeObject*)((PyFunctionObject*)func)->func_code)->co_filename);
+						}
+					} else if(PyCFunction_Check(func)){
+						if (((PyCFunctionObject*)func)->m_module != NULL){
+							fileName2 = PyString_AsString(  ((PyCFunctionObject*)func)->m_module);
+						}
+						else
+							fileName2 = "null";
+					}
+				}
+	
+				timestamp = rdtsc();
+				sprintf(fullCalleeName, "%s:%s", fileName2, calleeName);
+				// logging calls as text
+				if (Py_txtLogCalls){	
+					// allocate log message once
+					if (logMsg == NULL)
+						logMsg = (char*) malloc(200);	
+					
+					sprintf(logMsg, "+%llu,%lu,%s\n", timestamp, tstate, fullCalleeName);
+					logMessage(logMsg);
+
+				}
+				
+				if (Py_logCalls)
+					logBinMessage(0, timestamp, tstate, fullCalleeName);
+					
+				
+
+				// Todo: get call-site (optional)
+				if (Py_CCT || Py_txtCCT)
+					update_with_call(tstate->cct, callerName, callerId, calleeName, calleeId, 0);
+			}
+		}
+		//-----------------------------------------------------------	
+		if (PyFunction_Check(func))
+			x = fast_function(func, pp_stack, n, na, nk);
+		else
+			x = do_call(func, pp_stack, na, nk);
+		//-----------------------------------------------------------	
+		//Nagy		
+		if (Py_CCT || Py_txtCCT || logEnabled){
+			if (PyCFunction_Check(func) || PyFunction_Check(func)){
+				if (Py_txtLogCalls){
+					// logging return
+					
+					if (current_frame == NULL)
+						sprintf(logMsg, "-%llu,%lu,%s:%s\n", rdtsc(), tstate, fileName2, calleeName);
+					else
+						sprintf(logMsg, "-%llu,%lu,%s:%s\n", rdtsc(), tstate, fileName2, calleeName);
+					
+					logMessage(logMsg);
+					
+				}
+				if (Py_CCT || Py_txtCCT)
+					update_with_return(tstate->cct, calleeName, calleeId);
+			}
+		}
+		//-----------------------------------------------------------			
+		READ_TIMESTAMP(*pintr1);
+		Py_DECREF(func);
+	}
+
+	/* Clear the stack of the function object.  Also removes
+           the arguments in case they weren't consumed already
+           (fast_function() and err_args() leave them on the stack).
+	 */
+	while ((*pp_stack) > pfunc) {
+		w = EXT_POP(*pp_stack);
+		Py_DECREF(w);
+		PCALL(PCALL_POP);
+	}
+	return x;
+}
+
+/* The fast_function() function optimize calls for which no argument
+   tuple is necessary; the objects are passed directly from the stack.
+   For the simplest case -- a function that takes only positional
+   arguments and is called with only positional arguments -- it
+   inlines the most primitive frame setup code from
+   PyEval_EvalCodeEx(), which vastly reduces the checks that must be
+   done before evaluating the frame.
+*/
+
+static PyObject *
+fast_function(PyObject *func, PyObject ***pp_stack, int n, int na, int nk)
+{
+	PyCodeObject *co = (PyCodeObject *)PyFunction_GET_CODE(func);
+	PyObject *globals = PyFunction_GET_GLOBALS(func);
+	PyObject *argdefs = PyFunction_GET_DEFAULTS(func);
+	PyObject **d = NULL;
+	int nd = 0;
+
+	PCALL(PCALL_FUNCTION);
+	PCALL(PCALL_FAST_FUNCTION);
+	if (argdefs == NULL && co->co_argcount == n && nk==0 &&
+	    co->co_flags == (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)) {
+		PyFrameObject *f;
+		PyObject *retval = NULL;
+		PyThreadState *tstate = PyThreadState_GET();
+		PyObject **fastlocals, **stack;
+		int i;
+
+		PCALL(PCALL_FASTER_FUNCTION);
+		assert(globals != NULL);
+		/* XXX Perhaps we should create a specialized
+		   PyFrame_New() that doesn't take locals, but does
+		   take builtins without sanity checking them.
+		*/
+		assert(tstate != NULL);
+		f = PyFrame_New(tstate, co, globals, NULL);
+		if (f == NULL)
+			return NULL;
+
+		fastlocals = f->f_localsplus;
+		stack = (*pp_stack) - n;
+
+		for (i = 0; i < n; i++) {
+			Py_INCREF(*stack);
+			fastlocals[i] = *stack++;
+		}
+		retval = PyEval_EvalFrameEx(f,0);
+		++tstate->recursion_depth;
+		Py_DECREF(f);
+		--tstate->recursion_depth;
+		return retval;
+	}
+	if (argdefs != NULL) {
+		d = &PyTuple_GET_ITEM(argdefs, 0);
+		nd = ((PyTupleObject *)argdefs)->ob_size;
+	}
+	return PyEval_EvalCodeEx(co, globals,
+				 (PyObject *)NULL, (*pp_stack)-n, na,
+				 (*pp_stack)-2*nk, nk, d, nd,
+				 PyFunction_GET_CLOSURE(func));
+}
+
+static PyObject *
+update_keyword_args(PyObject *orig_kwdict, int nk, PyObject ***pp_stack,
+                    PyObject *func)
+{
+	PyObject *kwdict = NULL;
+	if (orig_kwdict == NULL)
+		kwdict = PyDict_New();
+	else {
+		kwdict = PyDict_Copy(orig_kwdict);
+		Py_DECREF(orig_kwdict);
+	}
+	if (kwdict == NULL)
+		return NULL;
+	while (--nk >= 0) {
+		int err;
+		PyObject *value = EXT_POP(*pp_stack);
+		PyObject *key = EXT_POP(*pp_stack);
+		if (PyDict_GetItem(kwdict, key) != NULL) {
+                        PyErr_Format(PyExc_TypeError,
+                                     "%.200s%s got multiple values "
+                                     "for keyword argument '%.200s'",
+				     PyEval_GetFuncName(func),
+				     PyEval_GetFuncDesc(func),
+				     PyString_AsString(key));
+			Py_DECREF(key);
+			Py_DECREF(value);
+			Py_DECREF(kwdict);
+			return NULL;
+		}
+		err = PyDict_SetItem(kwdict, key, value);
+		Py_DECREF(key);
+		Py_DECREF(value);
+		if (err) {
+			Py_DECREF(kwdict);
+			return NULL;
+		}
+	}
+	return kwdict;
+}
+
+static PyObject *
+update_star_args(int nstack, int nstar, PyObject *stararg,
+		 PyObject ***pp_stack)
+{
+	PyObject *callargs, *w;
+
+	callargs = PyTuple_New(nstack + nstar);
+	if (callargs == NULL) {
+		return NULL;
+	}
+	if (nstar) {
+		int i;
+		for (i = 0; i < nstar; i++) {
+			PyObject *a = PyTuple_GET_ITEM(stararg, i);
+			Py_INCREF(a);
+			PyTuple_SET_ITEM(callargs, nstack + i, a);
+		}
+	}
+	while (--nstack >= 0) {
+		w = EXT_POP(*pp_stack);
+		PyTuple_SET_ITEM(callargs, nstack, w);
+	}
+	return callargs;
+}
+
+static PyObject *
+load_args(PyObject ***pp_stack, int na)
+{
+	PyObject *args = PyTuple_New(na);
+	PyObject *w;
+
+	if (args == NULL)
+		return NULL;
+	while (--na >= 0) {
+		w = EXT_POP(*pp_stack);
+		PyTuple_SET_ITEM(args, na, w);
+	}
+	return args;
+}
+
+static PyObject *
+do_call(PyObject *func, PyObject ***pp_stack, int na, int nk)
+{
+	PyObject *callargs = NULL;
+	PyObject *kwdict = NULL;
+	PyObject *result = NULL;
+
+	if (nk > 0) {
+		kwdict = update_keyword_args(NULL, nk, pp_stack, func);
+		if (kwdict == NULL)
+			goto call_fail;
+	}
+	callargs = load_args(pp_stack, na);
+	if (callargs == NULL)
+		goto call_fail;
+#ifdef CALL_PROFILE
+	/* At this point, we have to look at the type of func to
+	   update the call stats properly.  Do it here so as to avoid
+	   exposing the call stats machinery outside ceval.c
+	*/
+	if (PyFunction_Check(func))
+		PCALL(PCALL_FUNCTION);
+	else if (PyMethod_Check(func))
+		PCALL(PCALL_METHOD);
+	else if (PyType_Check(func))
+		PCALL(PCALL_TYPE);
+	else
+		PCALL(PCALL_OTHER);
+#endif
+	result = PyObject_Call(func, callargs, kwdict);
+ call_fail:
+	Py_XDECREF(callargs);
+	Py_XDECREF(kwdict);
+	return result;
+}
+
+static PyObject *
+ext_do_call(PyObject *func, PyObject ***pp_stack, int flags, int na, int nk)
+{
+	int nstar = 0;
+	PyObject *callargs = NULL;
+	PyObject *stararg = NULL;
+	PyObject *kwdict = NULL;
+	PyObject *result = NULL;
+
+	if (flags & CALL_FLAG_KW) {
+		kwdict = EXT_POP(*pp_stack);
+		if (!(kwdict && PyDict_Check(kwdict))) {
+			PyErr_Format(PyExc_TypeError,
+				     "%s%s argument after ** "
+				     "must be a dictionary",
+				     PyEval_GetFuncName(func),
+				     PyEval_GetFuncDesc(func));
+			goto ext_call_fail;
+		}
+	}
+	if (flags & CALL_FLAG_VAR) {
+		stararg = EXT_POP(*pp_stack);
+		if (!PyTuple_Check(stararg)) {
+			PyObject *t = NULL;
+			t = PySequence_Tuple(stararg);
+			if (t == NULL) {
+				if (PyErr_ExceptionMatches(PyExc_TypeError)) {
+					PyErr_Format(PyExc_TypeError,
+						     "%s%s argument after * "
+						     "must be a sequence",
+						     PyEval_GetFuncName(func),
+						     PyEval_GetFuncDesc(func));
+				}
+				goto ext_call_fail;
+			}
+			Py_DECREF(stararg);
+			stararg = t;
+		}
+		nstar = PyTuple_GET_SIZE(stararg);
+	}
+	if (nk > 0) {
+		kwdict = update_keyword_args(kwdict, nk, pp_stack, func);
+		if (kwdict == NULL)
+			goto ext_call_fail;
+	}
+	callargs = update_star_args(na, nstar, stararg, pp_stack);
+	if (callargs == NULL)
+		goto ext_call_fail;
+#ifdef CALL_PROFILE
+	/* At this point, we have to look at the type of func to
+	   update the call stats properly.  Do it here so as to avoid
+	   exposing the call stats machinery outside ceval.c
+	*/
+	if (PyFunction_Check(func))
+		PCALL(PCALL_FUNCTION);
+	else if (PyMethod_Check(func))
+		PCALL(PCALL_METHOD);
+	else if (PyType_Check(func))
+		PCALL(PCALL_TYPE);
+	else
+		PCALL(PCALL_OTHER);
+#endif
+	result = PyObject_Call(func, callargs, kwdict);
+      ext_call_fail:
+	Py_XDECREF(callargs);
+	Py_XDECREF(kwdict);
+	Py_XDECREF(stararg);
+	return result;
+}
+
+/* Extract a slice index from a PyInt or PyLong or an object with the
+   nb_index slot defined, and store in *pi.
+   Silently reduce values larger than PY_SSIZE_T_MAX to PY_SSIZE_T_MAX,
+   and silently boost values less than -PY_SSIZE_T_MAX-1 to -PY_SSIZE_T_MAX-1.
+   Return 0 on error, 1 on success.
+*/
+/* Note:  If v is NULL, return success without storing into *pi.  This
+   is because_PyEval_SliceIndex() is called by apply_slice(), which can be
+   called by the SLICE opcode with v and/or w equal to NULL.
+*/
+int
+_PyEval_SliceIndex(PyObject *v, Py_ssize_t *pi)
+{
+	if (v != NULL) {
+		Py_ssize_t x;
+		if (PyInt_Check(v)) {
+			/* XXX(nnorwitz): I think PyInt_AS_LONG is correct,
+			   however, it looks like it should be AsSsize_t.
+			   There should be a comment here explaining why.
+			*/
+			x = PyInt_AS_LONG(v);
+		}
+		else if (PyIndex_Check(v)) {
+			x = PyNumber_AsSsize_t(v, NULL);
+			if (x == -1 && PyErr_Occurred())
+				return 0;
+		}
+		else {
+			PyErr_SetString(PyExc_TypeError,
+					"slice indices must be integers or "
+					"None or have an __index__ method");
+			return 0;
+		}
+		*pi = x;
+	}
+	return 1;
+}
+
+#undef ISINDEX
+#define ISINDEX(x) ((x) == NULL || \
+		    PyInt_Check(x) || PyLong_Check(x) || PyIndex_Check(x))
+
+static PyObject *
+apply_slice(PyObject *u, PyObject *v, PyObject *w) /* return u[v:w] */
+{
+	PyTypeObject *tp = u->ob_type;
+	PySequenceMethods *sq = tp->tp_as_sequence;
+
+	if (sq && sq->sq_slice && ISINDEX(v) && ISINDEX(w)) {
+		Py_ssize_t ilow = 0, ihigh = PY_SSIZE_T_MAX;
+		if (!_PyEval_SliceIndex(v, &ilow))
+			return NULL;
+		if (!_PyEval_SliceIndex(w, &ihigh))
+			return NULL;
+		return PySequence_GetSlice(u, ilow, ihigh);
+	}
+	else {
+		PyObject *slice = PySlice_New(v, w, NULL);
+		if (slice != NULL) {
+			PyObject *res = PyObject_GetItem(u, slice);
+			Py_DECREF(slice);
+			return res;
+		}
+		else
+			return NULL;
+	}
+}
+
+static int
+assign_slice(PyObject *u, PyObject *v, PyObject *w, PyObject *x)
+	/* u[v:w] = x */
+{
+	PyTypeObject *tp = u->ob_type;
+	PySequenceMethods *sq = tp->tp_as_sequence;
+
+	if (sq && sq->sq_slice && ISINDEX(v) && ISINDEX(w)) {
+		Py_ssize_t ilow = 0, ihigh = PY_SSIZE_T_MAX;
+		if (!_PyEval_SliceIndex(v, &ilow))
+			return -1;
+		if (!_PyEval_SliceIndex(w, &ihigh))
+			return -1;
+		if (x == NULL)
+			return PySequence_DelSlice(u, ilow, ihigh);
+		else
+			return PySequence_SetSlice(u, ilow, ihigh, x);
+	}
+	else {
+		PyObject *slice = PySlice_New(v, w, NULL);
+		if (slice != NULL) {
+			int res;
+			if (x != NULL)
+				res = PyObject_SetItem(u, slice, x);
+			else
+				res = PyObject_DelItem(u, slice);
+			Py_DECREF(slice);
+			return res;
+		}
+		else
+			return -1;
+	}
+}
+
+static PyObject *
+cmp_outcome(int op, register PyObject *v, register PyObject *w)
+{
+	int res = 0;
+	switch (op) {
+	case PyCmp_IS:
+		res = (v == w);
+		break;
+	case PyCmp_IS_NOT:
+		res = (v != w);
+		break;
+	case PyCmp_IN:
+		res = PySequence_Contains(w, v);
+		if (res < 0)
+			return NULL;
+		break;
+	case PyCmp_NOT_IN:
+		res = PySequence_Contains(w, v);
+		if (res < 0)
+			return NULL;
+		res = !res;
+		break;
+	case PyCmp_EXC_MATCH:
+		res = PyErr_GivenExceptionMatches(v, w);
+		break;
+	default:
+		return PyObject_RichCompare(v, w, op);
+	}
+	v = res ? Py_True : Py_False;
+	Py_INCREF(v);
+	return v;
+}
+
+static PyObject *
+import_from(PyObject *v, PyObject *name)
+{
+	PyObject *x;
+
+	x = PyObject_GetAttr(v, name);
+	if (x == NULL && PyErr_ExceptionMatches(PyExc_AttributeError)) {
+		PyErr_Format(PyExc_ImportError,
+			     "cannot import name %.230s",
+			     PyString_AsString(name));
+	}
+	return x;
+}
+
+static int
+import_all_from(PyObject *locals, PyObject *v)
+{
+	PyObject *all = PyObject_GetAttrString(v, "__all__");
+	PyObject *dict, *name, *value;
+	int skip_leading_underscores = 0;
+	int pos, err;
+
+	if (all == NULL) {
+		if (!PyErr_ExceptionMatches(PyExc_AttributeError))
+			return -1; /* Unexpected error */
+		PyErr_Clear();
+		dict = PyObject_GetAttrString(v, "__dict__");
+		if (dict == NULL) {
+			if (!PyErr_ExceptionMatches(PyExc_AttributeError))
+				return -1;
+			PyErr_SetString(PyExc_ImportError,
+			"from-import-* object has no __dict__ and no __all__");
+			return -1;
+		}
+		all = PyMapping_Keys(dict);
+		Py_DECREF(dict);
+		if (all == NULL)
+			return -1;
+		skip_leading_underscores = 1;
+	}
+
+	for (pos = 0, err = 0; ; pos++) {
+		name = PySequence_GetItem(all, pos);
+		if (name == NULL) {
+			if (!PyErr_ExceptionMatches(PyExc_IndexError))
+				err = -1;
+			else
+				PyErr_Clear();
+			break;
+		}
+		if (skip_leading_underscores &&
+		    PyString_Check(name) &&
+		    PyString_AS_STRING(name)[0] == '_')
+		{
+			Py_DECREF(name);
+			continue;
+		}
+		value = PyObject_GetAttr(v, name);
+		if (value == NULL)
+			err = -1;
+		else
+			err = PyDict_SetItem(locals, name, value);
+		Py_DECREF(name);
+		Py_XDECREF(value);
+		if (err != 0)
+			break;
+	}
+	Py_DECREF(all);
+	return err;
+}
+
+static PyObject *
+build_class(PyObject *methods, PyObject *bases, PyObject *name)
+{
+	PyObject *metaclass = NULL, *result, *base;
+
+	if (PyDict_Check(methods))
+		metaclass = PyDict_GetItemString(methods, "__metaclass__");
+	if (metaclass != NULL)
+		Py_INCREF(metaclass);
+	else if (PyTuple_Check(bases) && PyTuple_GET_SIZE(bases) > 0) {
+		base = PyTuple_GET_ITEM(bases, 0);
+		metaclass = PyObject_GetAttrString(base, "__class__");
+		if (metaclass == NULL) {
+			PyErr_Clear();
+			metaclass = (PyObject *)base->ob_type;
+			Py_INCREF(metaclass);
+		}
+	}
+	else {
+		PyObject *g = PyEval_GetGlobals();
+		if (g != NULL && PyDict_Check(g))
+			metaclass = PyDict_GetItemString(g, "__metaclass__");
+		if (metaclass == NULL)
+			metaclass = (PyObject *) &PyClass_Type;
+		Py_INCREF(metaclass);
+	}
+	result = PyObject_CallFunctionObjArgs(metaclass, name, bases, methods, NULL);
+	Py_DECREF(metaclass);
+	if (result == NULL && PyErr_ExceptionMatches(PyExc_TypeError)) {
+		/* A type error here likely means that the user passed
+		   in a base that was not a class (such the random module
+		   instead of the random.random type).  Help them out with
+		   by augmenting the error message with more information.*/
+
+		PyObject *ptype, *pvalue, *ptraceback;
+
+		PyErr_Fetch(&ptype, &pvalue, &ptraceback);
+		if (PyString_Check(pvalue)) {
+			PyObject *newmsg;
+			newmsg = PyString_FromFormat(
+				"Error when calling the metaclass bases\n    %s",
+				PyString_AS_STRING(pvalue));
+			if (newmsg != NULL) {
+				Py_DECREF(pvalue);
+				pvalue = newmsg;
+			}
+		}
+		PyErr_Restore(ptype, pvalue, ptraceback);
+	}
+	return result;
+}
+
+static int
+exec_statement(PyFrameObject *f, PyObject *prog, PyObject *globals,
+	       PyObject *locals)
+{
+	int n;
+	PyObject *v;
+	int plain = 0;
+
+	if (PyTuple_Check(prog) && globals == Py_None && locals == Py_None &&
+	    ((n = PyTuple_Size(prog)) == 2 || n == 3)) {
+		/* Backward compatibility hack */
+		globals = PyTuple_GetItem(prog, 1);
+		if (n == 3)
+			locals = PyTuple_GetItem(prog, 2);
+		prog = PyTuple_GetItem(prog, 0);
+	}
+	if (globals == Py_None) {
+		globals = PyEval_GetGlobals();
+		if (locals == Py_None) {
+			locals = PyEval_GetLocals();
+			plain = 1;
+		}
+		if (!globals || !locals) {
+			PyErr_SetString(PyExc_SystemError,
+					"globals and locals cannot be NULL");
+			return -1;
+		}
+	}
+	else if (locals == Py_None)
+		locals = globals;
+	if (!PyString_Check(prog) &&
+	    !PyUnicode_Check(prog) &&
+	    !PyCode_Check(prog) &&
+	    !PyFile_Check(prog)) {
+		PyErr_SetString(PyExc_TypeError,
+			"exec: arg 1 must be a string, file, or code object");
+		return -1;
+	}
+	if (!PyDict_Check(globals)) {
+		PyErr_SetString(PyExc_TypeError,
+		    "exec: arg 2 must be a dictionary or None");
+		return -1;
+	}
+	if (!PyMapping_Check(locals)) {
+		PyErr_SetString(PyExc_TypeError,
+		    "exec: arg 3 must be a mapping or None");
+		return -1;
+	}
+	if (PyDict_GetItemString(globals, "__builtins__") == NULL)
+		PyDict_SetItemString(globals, "__builtins__", f->f_builtins);
+	if (PyCode_Check(prog)) {
+		if (PyCode_GetNumFree((PyCodeObject *)prog) > 0) {
+			PyErr_SetString(PyExc_TypeError,
+		"code object passed to exec may not contain free variables");
+			return -1;
+		}
+		v = PyEval_EvalCode((PyCodeObject *) prog, globals, locals);
+	}
+	else if (PyFile_Check(prog)) {
+		FILE *fp = PyFile_AsFile(prog);
+		char *name = PyString_AsString(PyFile_Name(prog));
+		PyCompilerFlags cf;
+		cf.cf_flags = 0;
+		if (PyEval_MergeCompilerFlags(&cf))
+			v = PyRun_FileFlags(fp, name, Py_file_input, globals,
+					    locals, &cf);
+		else
+			v = PyRun_File(fp, name, Py_file_input, globals,
+				       locals);
+	}
+	else {
+		PyObject *tmp = NULL;
+		char *str;
+		PyCompilerFlags cf;
+		cf.cf_flags = 0;
+#ifdef Py_USING_UNICODE
+		if (PyUnicode_Check(prog)) {
+			tmp = PyUnicode_AsUTF8String(prog);
+			if (tmp == NULL)
+				return -1;
+			prog = tmp;
+			cf.cf_flags |= PyCF_SOURCE_IS_UTF8;
+		}
+#endif
+		if (PyString_AsStringAndSize(prog, &str, NULL))
+			return -1;
+		if (PyEval_MergeCompilerFlags(&cf))
+			v = PyRun_StringFlags(str, Py_file_input, globals,
+					      locals, &cf);
+		else
+			v = PyRun_String(str, Py_file_input, globals, locals);
+		Py_XDECREF(tmp);
+	}
+	if (plain)
+		PyFrame_LocalsToFast(f, 0);
+	if (v == NULL)
+		return -1;
+	Py_DECREF(v);
+	return 0;
+}
+
+static void
+format_exc_check_arg(PyObject *exc, char *format_str, PyObject *obj)
+{
+	char *obj_str;
+
+	if (!obj)
+		return;
+
+	obj_str = PyString_AsString(obj);
+	if (!obj_str)
+		return;
+
+	PyErr_Format(exc, format_str, obj_str);
+}
+
+static PyObject *
+string_concatenate(PyObject *v, PyObject *w,
+		   PyFrameObject *f, unsigned char *next_instr)
+{
+	/* This function implements 'variable += expr' when both arguments
+	   are strings. */
+	Py_ssize_t v_len = PyString_GET_SIZE(v);
+	Py_ssize_t w_len = PyString_GET_SIZE(w);
+	Py_ssize_t new_len = v_len + w_len;
+	if (new_len < 0) {
+		PyErr_SetString(PyExc_OverflowError,
+				"strings are too large to concat");
+		return NULL;
+	}
+
+	if (v->ob_refcnt == 2) {
+		/* In the common case, there are 2 references to the value
+		 * stored in 'variable' when the += is performed: one on the
+		 * value stack (in 'v') and one still stored in the 'variable'.
+		 * We try to delete the variable now to reduce the refcnt to 1.
+		 */
+		switch (*next_instr) {
+		case STORE_FAST:
+		{
+			int oparg = PEEKARG();
+			PyObject **fastlocals = f->f_localsplus;
+			if (GETLOCAL(oparg) == v)
+				SETLOCAL(oparg, NULL);
+			break;
+		}
+		case STORE_DEREF:
+		{
+			PyObject **freevars = f->f_localsplus + f->f_code->co_nlocals;
+			PyObject *c = freevars[PEEKARG()];
+			if (PyCell_GET(c) == v)
+				PyCell_Set(c, NULL);
+			break;
+		}
+		case STORE_NAME:
+		{
+			PyObject *names = f->f_code->co_names;
+			PyObject *name = GETITEM(names, PEEKARG());
+			PyObject *locals = f->f_locals;
+			if (PyDict_CheckExact(locals) &&
+			    PyDict_GetItem(locals, name) == v) {
+				if (PyDict_DelItem(locals, name) != 0) {
+					PyErr_Clear();
+				}
+			}
+			break;
+		}
+		}
+	}
+
+	if (v->ob_refcnt == 1 && !PyString_CHECK_INTERNED(v)) {
+		/* Now we own the last reference to 'v', so we can resize it
+		 * in-place.
+		 */
+		if (_PyString_Resize(&v, new_len) != 0) {
+			/* XXX if _PyString_Resize() fails, 'v' has been
+			 * deallocated so it cannot be put back into 'variable'.
+			 * The MemoryError is raised when there is no value in
+			 * 'variable', which might (very remotely) be a cause
+			 * of incompatibilities.
+			 */
+			return NULL;
+		}
+		/* copy 'w' into the newly allocated area of 'v' */
+		memcpy(PyString_AS_STRING(v) + v_len,
+		       PyString_AS_STRING(w), w_len);
+		return v;
+	}
+	else {
+		/* When in-place resizing is not an option. */
+		PyString_Concat(&v, w);
+		return v;
+	}
+}
+
+#ifdef DYNAMIC_EXECUTION_PROFILE
+
+static PyObject *
+getarray(long a[256])
+{
+	int i;
+	PyObject *l = PyList_New(256);
+	if (l == NULL) return NULL;
+	for (i = 0; i < 256; i++) {
+		PyObject *x = PyInt_FromLong(a[i]);
+		if (x == NULL) {
+			Py_DECREF(l);
+			return NULL;
+		}
+		PyList_SetItem(l, i, x);
+	}
+	for (i = 0; i < 256; i++)
+		a[i] = 0;
+	return l;
+}
+
+PyObject *
+_Py_GetDXProfile(PyObject *self, PyObject *args)
+{
+#ifndef DXPAIRS
+	return getarray(dxp);
+#else
+	int i;
+	PyObject *l = PyList_New(257);
+	if (l == NULL) return NULL;
+	for (i = 0; i < 257; i++) {
+		PyObject *x = getarray(dxpairs[i]);
+		if (x == NULL) {
+			Py_DECREF(l);
+			return NULL;
+		}
+		PyList_SetItem(l, i, x);
+	}
+	return l;
+#endif
+}
+
+#endif
diff -Naur Python-2.5-base/Python/getopt.c Python-2.5/Python/getopt.c
--- Python-2.5-base/Python/getopt.c	2006-07-12 08:31:17.000000000 -0700
+++ Python-2.5/Python/getopt.c	2009-03-17 15:50:58.000000000 -0700
@@ -72,6 +72,41 @@
 		else if (strcmp(argv[_PyOS_optind], "--version") == 0) {
 			++_PyOS_optind;
 			return 'V';
+		} 
+		
+		else if (strcmp(argv[_PyOS_optind], "-cct") == 0){
+			++_PyOS_optind;
+			return 'C';
+		}
+		
+		else if (strcmp(argv[_PyOS_optind], "-txtcct") == 0){
+			++_PyOS_optind;
+			return 'T';
+		}
+		
+		else if (strcmp(argv[_PyOS_optind], "-cntcalls") == 0){
+			++_PyOS_optind;
+			return 'N';
+		}
+		
+		else if (strcmp(argv[_PyOS_optind], "-logcalls") == 0){
+			++_PyOS_optind;
+			return 'L';
+		}
+		
+		else if (strcmp(argv[_PyOS_optind], "-txtlogcalls") == 0){
+			
+			++_PyOS_optind;
+			return 'A';
+		}
+		else if (strcmp(argv[_PyOS_optind], "-lograte") == 0){
+			++_PyOS_optind;
+			return 'R';
+		}
+		else if (strcmp(argv[_PyOS_optind], "-logint") == 0){
+			
+			++_PyOS_optind;
+			return 'I';
 		}
 
 
diff -Naur Python-2.5-base/Python/logger.c Python-2.5/Python/logger.c
--- Python-2.5-base/Python/logger.c	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Python/logger.c	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,188 @@
+/*
+Software License Agreement (BSD License)
+
+Copyright (c) 2008, Regents of the University of California
+All rights reserved.
+
+Redistribution and use of this software in source and binary forms, with or
+without modification, are permitted provided that the following conditions
+are met:
+
+* Redistributions of source code must retain the above
+  copyright notice, this list of conditions and the
+  following disclaimer.
+
+* Redistributions in binary form must reproduce the above
+  copyright notice, this list of conditions and the
+  following disclaimer in the documentation and/or other
+  materials provided with the distribution.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
+LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGE.  USERS OF THIS SOFTWARE ACKNOWLEDGE THE POSSIBLE
+PRESENCE OF OTHER OPEN SOURCE LICENSED MATERIAL, COPYRIGHTED MATERIAL OR
+PATENTED MATERIAL IN THIS SOFTWARE, AND IF ANY SUCH MATERIAL IS DISCOVERED THE PARTY
+DISCOVERING IT MAY INFORM DR. RICH WOLSKI AT THE UNIVERSITY OF CALIFORNIA,
+SANTA BARBARA WHO WILL THEN ASCERTAIN THE MOST APPROPRIATE REMEDY, WHICH
+IN THE REGENTS. DISCRETION MAY INCLUDE, WITHOUT LIMITATION, REPLACEMENT
+OF THE CODE SO IDENTIFIED, LICENSING OF THE CODE SO IDENTIFIED, OR WITHDRAWAL
+OF THE CODE CAPABILITY TO THE EXTENT NEEDED TO COMPLY WITH ANY SUCH LICENSES
+OR RIGHTS.
+*/
+
+// Nagy
+// Call trace logging module
+#include <stdio.h>
+#include <stdlib.h>
+#include <time.h>
+#include <string.h>
+#include "logger.h"
+//#define LOGGERDBG
+
+static FILE* logFile;
+static FILE* binLogFile;
+
+unsigned long long totalCallCount;
+
+int maxSampleRate, sampleCounter;
+static int burstLogInt; // burst interval
+int burstCounter; 
+
+void initSampleVars(int msr, int bli){
+	maxSampleRate = msr;
+	burstLogInt = bli;
+	burstCounter = bli;
+	unsigned int seed = (unsigned int)time(NULL);
+  	srand (seed);
+
+	sampleCounter = rand()/(int)(((unsigned)RAND_MAX + 1) / maxSampleRate) + 1;
+}
+
+inline int decSampleCounter(){
+	
+	// inside burst interval
+	if (burstCounter > 0){
+		burstCounter --;
+		#ifdef LOGGERDBG
+		fprintf(stderr,"burst counter = %d, sample taken\n", burstCounter);
+		#endif
+		return 1;
+	}
+	
+	if (sampleCounter > 0){
+		
+		#ifdef LOGGERDBG
+		fprintf(stderr,"sample count = %d, sample not taken\n", sampleCounter);
+		#endif
+		sampleCounter --;
+		return 0;
+	}
+	
+	// re-initialize sample Counter to  random value
+	// start burst interval
+	
+	sampleCounter = rand()/(int)(((unsigned)RAND_MAX + 1) / maxSampleRate) + 1;
+	burstCounter = burstLogInt;
+
+	return 0;
+	
+	#ifdef LOGGERDBG	
+	printf("sampleCounter:%d\n", sampleCounter);
+	#endif
+	
+}
+
+void resetCallCounts(){
+		totalCallCount = 0;
+		printf("CallCount reset\n");
+}
+
+void openLogFile(char* fileName){
+	
+	if (fileName == NULL)
+		fileName = "call_log.txt";
+	
+	if ((logFile = fopen(fileName, "w")) == NULL){
+		fprintf(stderr, "Cannot create log file\n");
+		exit(1);
+	}
+	fprintf(stderr, "** Logging calls in %s\n", fileName);
+}
+
+void openBinLogFile(char* fileName){
+	if (fileName == NULL)
+		fileName = "call_log.bin";
+	
+	if ((binLogFile = fopen(fileName, "wb")) == NULL){
+		fprintf(stderr, "Cannot create binary log file\n");
+		exit(1);
+	}
+	fprintf(stderr, "** Logging calls in %s\n", fileName);
+}
+
+inline void incTotalCallCount(){
+	totalCallCount ++;
+}
+
+inline void decTotalCallCount(){
+	totalCallCount --;
+}
+
+inline void logMessage(char* s){
+	
+	if (logFile == NULL)
+		fprintf(stderr, "Log file not open\n");
+	
+	
+	if (s == NULL){
+		fprintf(stderr, "Cannot log an empty string\n");
+		return;
+	}
+	
+	fprintf(logFile, s);
+}
+
+// logs a binary message. buffer is where the data resides and size is its size in bytes
+inline void logBinMessage(\
+	char type, \
+	unsigned long long timestamp, \
+	unsigned long tid, \
+	const char* name ){
+	
+	
+	fwrite(&type, sizeof(char), 1, binLogFile);
+	fwrite(&timestamp, sizeof(unsigned long long), 1, binLogFile);
+	fwrite(&tid, sizeof(unsigned long), 1, binLogFile); 
+	fwrite(name, sizeof(char), strlen(name) + 1, binLogFile);
+	
+	
+}
+
+void printCallCounts(){
+	fprintf(stderr, "Logger: Total call count %llu\n", totalCallCount);
+}
+
+unsigned long long getTotalCallCount(){
+	return totalCallCount;
+}
+void closeLogFile(){
+	if (logFile){
+		fclose(logFile);
+		fprintf(stderr, "** Log file closed\n");
+	}
+
+	if (binLogFile){
+		fclose(binLogFile);
+		fprintf(stderr, "** Binary log file closed\n");
+	}
+}
+
+ 
diff -Naur Python-2.5-base/Python/pystate.c Python-2.5/Python/pystate.c
--- Python-2.5-base/Python/pystate.c	2006-09-11 01:51:17.000000000 -0700
+++ Python-2.5/Python/pystate.c	2009-03-17 15:50:58.000000000 -0700
@@ -1,4 +1,44 @@
+/*
+Software License Agreement (BSD License)
 
+Copyright (c) 2008, Regents of the University of California
+All rights reserved.
+
+Redistribution and use of this software in source and binary forms, with or
+without modification, are permitted provided that the following conditions
+are met:
+
+* Redistributions of source code must retain the above
+  copyright notice, this list of conditions and the
+  following disclaimer.
+
+* Redistributions in binary form must reproduce the above
+  copyright notice, this list of conditions and the
+  following disclaimer in the documentation and/or other
+  materials provided with the distribution.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
+LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGE.  USERS OF THIS SOFTWARE ACKNOWLEDGE THE POSSIBLE
+ PRESENCE OF OTHER OPEN SOURCE LICENSED MATERIAL, COPYRIGHTED MATERIAL OR
+PATENTED MATERIAL IN THIS SOFTWARE, AND IF ANY SUCH MATERIAL IS DISCOVERED THE PARTY
+DISCOVERING IT MAY INFORM DR. RICH WOLSKI AT THE UNIVERSITY OF CALIFORNIA, 
+SANTA BARBARA WHO WILL THEN ASCERTAIN THE MOST APPROPRIATE REMEDY, WHICH
+IN THE REGENTS. DISCRETION MAY INCLUDE, WITHOUT LIMITATION, REPLACEMENT
+OF THE CODE SO IDENTIFIED, LICENSING OF THE CODE SO IDENTIFIED, OR WITHDRAWAL
+OF THE CODE CAPABILITY TO THE EXTENT NEEDED TO COMPLY WITH ANY SUCH LICENSES
+OR RIGHTS.
+*/
+
+#include "logger.h"
 /* Thread and interpreter state structures and their interfaces */
 
 #include "Python.h"
@@ -22,7 +62,16 @@
 #endif
 #endif
 
-
+// Nagy
+//#include "pycct.h"
+#include "cct.h"
+// Nagy
+extern int Py_CCT;                     /* CCT collection on */
+extern 	int Py_txtCCT;          /* text dump of CCT */
+extern int Py_logCalls;        /* generate a binary call trace */
+extern int Py_txtLogCalls; /* dump a text call trace to a text file */
+extern int Py_cntCalls;  /* count calls */
+	
 #ifdef WITH_THREAD
 #include "pythread.h"
 static PyThread_type_lock head_mutex = NULL; /* Protects interp->tstate_head */
@@ -100,6 +149,22 @@
 {
 	PyThreadState *p;
 	HEAD_LOCK();
+	
+	//Nagy: Dumping all CCTs
+	if (Py_CCT || Py_txtCCT){
+		dump_all_as_bin();
+		if (Py_txtCCT)
+			dump_all_as_text();
+	}	
+	
+	if (Py_logCalls || Py_txtLogCalls){
+		closeLogFile();
+	}
+	
+	if (Py_cntCalls){
+		printCallCounts();
+	}
+		
 	for (p = interp->tstate_head; p != NULL; p = p->next)
 		PyThreadState_Clear(p);
 	HEAD_UNLOCK();
@@ -190,6 +255,12 @@
 		tstate->c_tracefunc = NULL;
 		tstate->c_profileobj = NULL;
 		tstate->c_traceobj = NULL;
+		
+		if (Py_CCT || Py_txtCCT){
+			//Nagy: Add CCT to thread state
+			printf("Adding CCT to thread %lu\n", (UL)tstate);
+			tstate->cct = addTree((UL)tstate, "Thread");
+		}
 
 #ifdef WITH_THREAD
 		_PyGILState_NoteThreadState(tstate);
diff -Naur Python-2.5-base/Python/pystate.c~ Python-2.5/Python/pystate.c~
--- Python-2.5-base/Python/pystate.c~	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Python/pystate.c~	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,661 @@
+
+/* Thread and interpreter state structures and their interfaces */
+
+#include "Python.h"
+
+/* --------------------------------------------------------------------------
+CAUTION
+
+Always use malloc() and free() directly in this file.  A number of these
+functions are advertised as safe to call when the GIL isn't held, and in
+a debug build Python redirects (e.g.) PyMem_NEW (etc) to Python's debugging
+obmalloc functions.  Those aren't thread-safe (they rely on the GIL to avoid
+the expense of doing their own locking).
+-------------------------------------------------------------------------- */
+
+#ifdef HAVE_DLOPEN
+#ifdef HAVE_DLFCN_H
+#include <dlfcn.h>
+#endif
+#ifndef RTLD_LAZY
+#define RTLD_LAZY 1
+#endif
+#endif
+
+// Nagy
+//#include "pycct.h"
+#include "cct.h"
+// Nagy
+extern int Py_CCT;                     /* CCT collection on */
+extern 	int Py_txtCCT;          /* text dump of CCT */
+extern int Py_logCalls;        /* generate a binary call trace */
+extern int Py_txtLogCalls; /* dump a text call trace to a text file */
+extern int Py_cntCalls;  /* count calls */
+	
+#ifdef WITH_THREAD
+#include "pythread.h"
+static PyThread_type_lock head_mutex = NULL; /* Protects interp->tstate_head */
+#define HEAD_INIT() (void)(head_mutex || (head_mutex = PyThread_allocate_lock()))
+#define HEAD_LOCK() PyThread_acquire_lock(head_mutex, WAIT_LOCK)
+#define HEAD_UNLOCK() PyThread_release_lock(head_mutex)
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+/* The single PyInterpreterState used by this process'
+   GILState implementation
+*/
+static PyInterpreterState *autoInterpreterState = NULL;
+static int autoTLSkey = 0;
+#else
+#define HEAD_INIT() /* Nothing */
+#define HEAD_LOCK() /* Nothing */
+#define HEAD_UNLOCK() /* Nothing */
+#endif
+
+static PyInterpreterState *interp_head = NULL;
+
+PyThreadState *_PyThreadState_Current = NULL;
+PyThreadFrameGetter _PyThreadState_GetFrame = NULL;
+
+#ifdef WITH_THREAD
+static void _PyGILState_NoteThreadState(PyThreadState* tstate);
+#endif
+
+
+PyInterpreterState *
+PyInterpreterState_New(void)
+{
+	PyInterpreterState *interp = (PyInterpreterState *)
+				     malloc(sizeof(PyInterpreterState));
+
+	if (interp != NULL) {
+		HEAD_INIT();
+#ifdef WITH_THREAD
+		if (head_mutex == NULL)
+			Py_FatalError("Can't initialize threads for interpreter");
+#endif
+		interp->modules = NULL;
+		interp->sysdict = NULL;
+		interp->builtins = NULL;
+		interp->tstate_head = NULL;
+		interp->codec_search_path = NULL;
+		interp->codec_search_cache = NULL;
+		interp->codec_error_registry = NULL;
+#ifdef HAVE_DLOPEN
+#ifdef RTLD_NOW
+                interp->dlopenflags = RTLD_NOW;
+#else
+		interp->dlopenflags = RTLD_LAZY;
+#endif
+#endif
+#ifdef WITH_TSC
+		interp->tscdump = 0;
+#endif
+
+		HEAD_LOCK();
+		interp->next = interp_head;
+		interp_head = interp;
+		HEAD_UNLOCK();
+	}
+
+	return interp;
+}
+
+
+void
+PyInterpreterState_Clear(PyInterpreterState *interp)
+{
+	PyThreadState *p;
+	HEAD_LOCK();
+	
+	//Nagy: Dumping all CCTs
+		if (Py_CCT || Py_txtCCT){
+			dump_all_as_bin();
+			if (Py_txtCCT)
+				dump_all_as_text();
+		}	
+	
+		if (Py_logCalls || Py_txtLogCalls){
+			closeLogFile();
+		}
+	
+		if (Py_cntCalls){
+			printCallCounts();
+		}
+		
+	for (p = interp->tstate_head; p != NULL; p = p->next)
+		PyThreadState_Clear(p);
+	HEAD_UNLOCK();
+	Py_CLEAR(interp->codec_search_path);
+	Py_CLEAR(interp->codec_search_cache);
+	Py_CLEAR(interp->codec_error_registry);
+	Py_CLEAR(interp->modules);
+	Py_CLEAR(interp->sysdict);
+	Py_CLEAR(interp->builtins);
+}
+
+
+static void
+zapthreads(PyInterpreterState *interp)
+{
+	PyThreadState *p;
+	/* No need to lock the mutex here because this should only happen
+	   when the threads are all really dead (XXX famous last words). */
+	while ((p = interp->tstate_head) != NULL) {
+		PyThreadState_Delete(p);
+	}
+}
+
+
+void
+PyInterpreterState_Delete(PyInterpreterState *interp)
+{
+	PyInterpreterState **p;
+	zapthreads(interp);
+	HEAD_LOCK();
+	for (p = &interp_head; ; p = &(*p)->next) {
+		if (*p == NULL)
+			Py_FatalError(
+				"PyInterpreterState_Delete: invalid interp");
+		if (*p == interp)
+			break;
+	}
+	if (interp->tstate_head != NULL)
+		Py_FatalError("PyInterpreterState_Delete: remaining threads");
+	*p = interp->next;
+	HEAD_UNLOCK();
+	free(interp);
+}
+
+
+/* Default implementation for _PyThreadState_GetFrame */
+static struct _frame *
+threadstate_getframe(PyThreadState *self)
+{
+	return self->frame;
+}
+
+PyThreadState *
+PyThreadState_New(PyInterpreterState *interp)
+{
+	PyThreadState *tstate = (PyThreadState *)malloc(sizeof(PyThreadState));
+
+	if (_PyThreadState_GetFrame == NULL)
+		_PyThreadState_GetFrame = threadstate_getframe;
+
+	if (tstate != NULL) {
+		tstate->interp = interp;
+
+		tstate->frame = NULL;
+		tstate->recursion_depth = 0;
+		tstate->tracing = 0;
+		tstate->use_tracing = 0;
+		tstate->tick_counter = 0;
+		tstate->gilstate_counter = 0;
+		tstate->async_exc = NULL;
+#ifdef WITH_THREAD
+		tstate->thread_id = PyThread_get_thread_ident();
+#else
+		tstate->thread_id = 0;
+#endif
+
+		tstate->dict = NULL;
+
+		tstate->curexc_type = NULL;
+		tstate->curexc_value = NULL;
+		tstate->curexc_traceback = NULL;
+
+		tstate->exc_type = NULL;
+		tstate->exc_value = NULL;
+		tstate->exc_traceback = NULL;
+
+		tstate->c_profilefunc = NULL;
+		tstate->c_tracefunc = NULL;
+		tstate->c_profileobj = NULL;
+		tstate->c_traceobj = NULL;
+		
+		if (Py_CCT || Py_txtCCT){
+			//Nagy: Add CCT to thread state
+			printf("Adding CCT to thread %lu\n", tstate);
+			tstate->cct = addTree(tstate, "Thread");
+		}
+
+#ifdef WITH_THREAD
+		_PyGILState_NoteThreadState(tstate);
+#endif
+
+		HEAD_LOCK();
+		tstate->next = interp->tstate_head;
+		interp->tstate_head = tstate;
+		HEAD_UNLOCK();
+	}
+
+	return tstate;
+}
+
+
+void
+PyThreadState_Clear(PyThreadState *tstate)
+{
+	if (Py_VerboseFlag && tstate->frame != NULL)
+		fprintf(stderr,
+		  "PyThreadState_Clear: warning: thread still has a frame\n");
+
+	Py_CLEAR(tstate->frame);
+
+	Py_CLEAR(tstate->dict);
+	Py_CLEAR(tstate->async_exc);
+
+	Py_CLEAR(tstate->curexc_type);
+	Py_CLEAR(tstate->curexc_value);
+	Py_CLEAR(tstate->curexc_traceback);
+
+	Py_CLEAR(tstate->exc_type);
+	Py_CLEAR(tstate->exc_value);
+	Py_CLEAR(tstate->exc_traceback);
+
+	tstate->c_profilefunc = NULL;
+	tstate->c_tracefunc = NULL;
+	Py_CLEAR(tstate->c_profileobj);
+	Py_CLEAR(tstate->c_traceobj);
+}
+
+
+/* Common code for PyThreadState_Delete() and PyThreadState_DeleteCurrent() */
+static void
+tstate_delete_common(PyThreadState *tstate)
+{
+	PyInterpreterState *interp;
+	PyThreadState **p;
+	if (tstate == NULL)
+		Py_FatalError("PyThreadState_Delete: NULL tstate");
+	interp = tstate->interp;
+	if (interp == NULL)
+		Py_FatalError("PyThreadState_Delete: NULL interp");
+	HEAD_LOCK();
+	for (p = &interp->tstate_head; ; p = &(*p)->next) {
+		if (*p == NULL)
+			Py_FatalError(
+				"PyThreadState_Delete: invalid tstate");
+		if (*p == tstate)
+			break;
+	}
+	*p = tstate->next;
+	HEAD_UNLOCK();
+	free(tstate);
+}
+
+
+void
+PyThreadState_Delete(PyThreadState *tstate)
+{
+	if (tstate == _PyThreadState_Current)
+		Py_FatalError("PyThreadState_Delete: tstate is still current");
+	tstate_delete_common(tstate);
+#ifdef WITH_THREAD
+	if (autoTLSkey && PyThread_get_key_value(autoTLSkey) == tstate)
+		PyThread_delete_key_value(autoTLSkey);
+#endif /* WITH_THREAD */
+}
+
+
+#ifdef WITH_THREAD
+void
+PyThreadState_DeleteCurrent()
+{
+	PyThreadState *tstate = _PyThreadState_Current;
+	if (tstate == NULL)
+		Py_FatalError(
+			"PyThreadState_DeleteCurrent: no current tstate");
+	_PyThreadState_Current = NULL;
+	tstate_delete_common(tstate);
+	if (autoTLSkey && PyThread_get_key_value(autoTLSkey) == tstate)
+		PyThread_delete_key_value(autoTLSkey);
+	PyEval_ReleaseLock();
+}
+#endif /* WITH_THREAD */
+
+
+PyThreadState *
+PyThreadState_Get(void)
+{
+	if (_PyThreadState_Current == NULL)
+		Py_FatalError("PyThreadState_Get: no current thread");
+
+	return _PyThreadState_Current;
+}
+
+
+PyThreadState *
+PyThreadState_Swap(PyThreadState *newts)
+{
+	PyThreadState *oldts = _PyThreadState_Current;
+
+	_PyThreadState_Current = newts;
+	/* It should not be possible for more than one thread state
+	   to be used for a thread.  Check this the best we can in debug
+	   builds.
+	*/
+#if defined(Py_DEBUG) && defined(WITH_THREAD)
+	if (newts) {
+		/* This can be called from PyEval_RestoreThread(). Similar
+		   to it, we need to ensure errno doesn't change.
+		*/
+		int err = errno;
+		PyThreadState *check = PyGILState_GetThisThreadState();
+		if (check && check->interp == newts->interp && check != newts)
+			Py_FatalError("Invalid thread state for this thread");
+		errno = err;
+	}
+#endif
+	return oldts;
+}
+
+/* An extension mechanism to store arbitrary additional per-thread state.
+   PyThreadState_GetDict() returns a dictionary that can be used to hold such
+   state; the caller should pick a unique key and store its state there.  If
+   PyThreadState_GetDict() returns NULL, an exception has *not* been raised
+   and the caller should assume no per-thread state is available. */
+
+PyObject *
+PyThreadState_GetDict(void)
+{
+	if (_PyThreadState_Current == NULL)
+		return NULL;
+
+	if (_PyThreadState_Current->dict == NULL) {
+		PyObject *d;
+		_PyThreadState_Current->dict = d = PyDict_New();
+		if (d == NULL)
+			PyErr_Clear();
+	}
+	return _PyThreadState_Current->dict;
+}
+
+
+/* Asynchronously raise an exception in a thread.
+   Requested by Just van Rossum and Alex Martelli.
+   To prevent naive misuse, you must write your own extension
+   to call this, or use ctypes.  Must be called with the GIL held.
+   Returns the number of tstates modified (normally 1, but 0 if `id` didn't
+   match any known thread id).  Can be called with exc=NULL to clear an
+   existing async exception.  This raises no exceptions. */
+
+int
+PyThreadState_SetAsyncExc(long id, PyObject *exc) {
+	PyThreadState *tstate = PyThreadState_GET();
+	PyInterpreterState *interp = tstate->interp;
+	PyThreadState *p;
+
+	/* Although the GIL is held, a few C API functions can be called
+	 * without the GIL held, and in particular some that create and
+	 * destroy thread and interpreter states.  Those can mutate the
+	 * list of thread states we're traversing, so to prevent that we lock
+	 * head_mutex for the duration.
+	 */
+	HEAD_LOCK();
+	for (p = interp->tstate_head; p != NULL; p = p->next) {
+		if (p->thread_id == id) {
+			/* Tricky:  we need to decref the current value
+			 * (if any) in p->async_exc, but that can in turn
+			 * allow arbitrary Python code to run, including
+			 * perhaps calls to this function.  To prevent
+			 * deadlock, we need to release head_mutex before
+			 * the decref.
+			 */
+			PyObject *old_exc = p->async_exc;
+			Py_XINCREF(exc);
+			p->async_exc = exc;
+			HEAD_UNLOCK();
+			Py_XDECREF(old_exc);
+			return 1;
+		}
+	}
+	HEAD_UNLOCK();
+	return 0;
+}
+
+
+/* Routines for advanced debuggers, requested by David Beazley.
+   Don't use unless you know what you are doing! */
+
+PyInterpreterState *
+PyInterpreterState_Head(void)
+{
+	return interp_head;
+}
+
+PyInterpreterState *
+PyInterpreterState_Next(PyInterpreterState *interp) {
+	return interp->next;
+}
+
+PyThreadState *
+PyInterpreterState_ThreadHead(PyInterpreterState *interp) {
+	return interp->tstate_head;
+}
+
+PyThreadState *
+PyThreadState_Next(PyThreadState *tstate) {
+	return tstate->next;
+}
+
+/* The implementation of sys._current_frames().  This is intended to be
+   called with the GIL held, as it will be when called via
+   sys._current_frames().  It's possible it would work fine even without
+   the GIL held, but haven't thought enough about that.
+*/
+PyObject *
+_PyThread_CurrentFrames(void)
+{
+	PyObject *result;
+	PyInterpreterState *i;
+
+	result = PyDict_New();
+	if (result == NULL)
+		return NULL;
+
+	/* for i in all interpreters:
+	 *     for t in all of i's thread states:
+	 *          if t's frame isn't NULL, map t's id to its frame
+	 * Because these lists can mutute even when the GIL is held, we
+	 * need to grab head_mutex for the duration.
+	 */
+	HEAD_LOCK();
+	for (i = interp_head; i != NULL; i = i->next) {
+		PyThreadState *t;
+		for (t = i->tstate_head; t != NULL; t = t->next) {
+			PyObject *id;
+			int stat;
+			struct _frame *frame = t->frame;
+			if (frame == NULL)
+				continue;
+			id = PyInt_FromLong(t->thread_id);
+			if (id == NULL)
+				goto Fail;
+			stat = PyDict_SetItem(result, id, (PyObject *)frame);
+			Py_DECREF(id);
+			if (stat < 0)
+				goto Fail;
+		}
+	}
+	HEAD_UNLOCK();
+	return result;
+
+ Fail:
+ 	HEAD_UNLOCK();
+ 	Py_DECREF(result);
+ 	return NULL;
+}
+
+/* Python "auto thread state" API. */
+#ifdef WITH_THREAD
+
+/* Keep this as a static, as it is not reliable!  It can only
+   ever be compared to the state for the *current* thread.
+   * If not equal, then it doesn't matter that the actual
+     value may change immediately after comparison, as it can't
+     possibly change to the current thread's state.
+   * If equal, then the current thread holds the lock, so the value can't
+     change until we yield the lock.
+*/
+static int
+PyThreadState_IsCurrent(PyThreadState *tstate)
+{
+	/* Must be the tstate for this thread */
+	assert(PyGILState_GetThisThreadState()==tstate);
+	/* On Windows at least, simple reads and writes to 32 bit values
+	   are atomic.
+	*/
+	return tstate == _PyThreadState_Current;
+}
+
+/* Internal initialization/finalization functions called by
+   Py_Initialize/Py_Finalize
+*/
+void
+_PyGILState_Init(PyInterpreterState *i, PyThreadState *t)
+{
+	assert(i && t); /* must init with valid states */
+	autoTLSkey = PyThread_create_key();
+	autoInterpreterState = i;
+	assert(PyThread_get_key_value(autoTLSkey) == NULL);
+	assert(t->gilstate_counter == 0);
+
+	_PyGILState_NoteThreadState(t);
+}
+
+void
+_PyGILState_Fini(void)
+{
+	PyThread_delete_key(autoTLSkey);
+	autoTLSkey = 0;
+	autoInterpreterState = NULL;;
+}
+
+/* When a thread state is created for a thread by some mechanism other than
+   PyGILState_Ensure, it's important that the GILState machinery knows about
+   it so it doesn't try to create another thread state for the thread (this is
+   a better fix for SF bug #1010677 than the first one attempted).
+*/
+static void
+_PyGILState_NoteThreadState(PyThreadState* tstate)
+{
+	/* If autoTLSkey is 0, this must be the very first threadstate created
+	   in Py_Initialize().  Don't do anything for now (we'll be back here
+	   when _PyGILState_Init is called). */
+	if (!autoTLSkey)
+		return;
+
+	/* Stick the thread state for this thread in thread local storage.
+
+	   The only situation where you can legitimately have more than one
+	   thread state for an OS level thread is when there are multiple
+	   interpreters, when:
+
+	       a) You shouldn't really be using the PyGILState_ APIs anyway,
+	          and:
+
+	       b) The slightly odd way PyThread_set_key_value works (see
+	          comments by its implementation) means that the first thread
+	          state created for that given OS level thread will "win",
+	          which seems reasonable behaviour.
+	*/
+	if (PyThread_set_key_value(autoTLSkey, (void *)tstate) < 0)
+		Py_FatalError("Couldn't create autoTLSkey mapping");
+
+	/* PyGILState_Release must not try to delete this thread state. */
+	tstate->gilstate_counter = 1;
+}
+
+/* The public functions */
+PyThreadState *
+PyGILState_GetThisThreadState(void)
+{
+	if (autoInterpreterState == NULL || autoTLSkey == 0)
+		return NULL;
+	return (PyThreadState *)PyThread_get_key_value(autoTLSkey);
+}
+
+PyGILState_STATE
+PyGILState_Ensure(void)
+{
+	int current;
+	PyThreadState *tcur;
+	/* Note that we do not auto-init Python here - apart from
+	   potential races with 2 threads auto-initializing, pep-311
+	   spells out other issues.  Embedders are expected to have
+	   called Py_Initialize() and usually PyEval_InitThreads().
+	*/
+	assert(autoInterpreterState); /* Py_Initialize() hasn't been called! */
+	tcur = (PyThreadState *)PyThread_get_key_value(autoTLSkey);
+	if (tcur == NULL) {
+		/* Create a new thread state for this thread */
+		tcur = PyThreadState_New(autoInterpreterState);
+		if (tcur == NULL)
+			Py_FatalError("Couldn't create thread-state for new thread");
+		/* This is our thread state!  We'll need to delete it in the
+		   matching call to PyGILState_Release(). */
+		tcur->gilstate_counter = 0;
+		current = 0; /* new thread state is never current */
+	}
+	else
+		current = PyThreadState_IsCurrent(tcur);
+	if (current == 0)
+		PyEval_RestoreThread(tcur);
+	/* Update our counter in the thread-state - no need for locks:
+	   - tcur will remain valid as we hold the GIL.
+	   - the counter is safe as we are the only thread "allowed"
+	     to modify this value
+	*/
+	++tcur->gilstate_counter;
+	return current ? PyGILState_LOCKED : PyGILState_UNLOCKED;
+}
+
+void
+PyGILState_Release(PyGILState_STATE oldstate)
+{
+	PyThreadState *tcur = (PyThreadState *)PyThread_get_key_value(
+                                                                autoTLSkey);
+	if (tcur == NULL)
+		Py_FatalError("auto-releasing thread-state, "
+		              "but no thread-state for this thread");
+	/* We must hold the GIL and have our thread state current */
+	/* XXX - remove the check - the assert should be fine,
+	   but while this is very new (April 2003), the extra check
+	   by release-only users can't hurt.
+	*/
+	if (! PyThreadState_IsCurrent(tcur))
+		Py_FatalError("This thread state must be current when releasing");
+	assert(PyThreadState_IsCurrent(tcur));
+	--tcur->gilstate_counter;
+	assert(tcur->gilstate_counter >= 0); /* illegal counter value */
+
+	/* If we're going to destroy this thread-state, we must
+	 * clear it while the GIL is held, as destructors may run.
+	 */
+	if (tcur->gilstate_counter == 0) {
+		/* can't have been locked when we created it */
+		assert(oldstate == PyGILState_UNLOCKED);
+		PyThreadState_Clear(tcur);
+		/* Delete the thread-state.  Note this releases the GIL too!
+		 * It's vital that the GIL be held here, to avoid shutdown
+		 * races; see bugs 225673 and 1061968 (that nasty bug has a
+		 * habit of coming back).
+		 */
+		PyThreadState_DeleteCurrent();
+	}
+	/* Release the lock if necessary */
+	else if (oldstate == PyGILState_UNLOCKED)
+		PyEval_SaveThread();
+}
+
+#ifdef __cplusplus
+}
+#endif
+
+#endif /* WITH_THREAD */
+
+
diff -Naur Python-2.5-base/Python/pythonrun.c Python-2.5/Python/pythonrun.c
--- Python-2.5-base/Python/pythonrun.c	2006-08-21 13:20:59.000000000 -0700
+++ Python-2.5/Python/pythonrun.c	2009-03-17 15:50:58.000000000 -0700
@@ -1,4 +1,42 @@
+/*
+Software License Agreement (BSD License)
+
+Copyright (c) 2008, Regents of the University of California
+All rights reserved.
 
+Redistribution and use of this software in source and binary forms, with or
+without modification, are permitted provided that the following conditions
+are met:
+
+* Redistributions of source code must retain the above
+  copyright notice, this list of conditions and the
+  following disclaimer.
+
+* Redistributions in binary form must reproduce the above
+  copyright notice, this list of conditions and the
+  following disclaimer in the documentation and/or other
+  materials provided with the distribution.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
+LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
+CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
+SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
+INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGE.  USERS OF THIS SOFTWARE ACKNOWLEDGE THE POSSIBLE
+ PRESENCE OF OTHER OPEN SOURCE LICENSED MATERIAL, COPYRIGHTED MATERIAL OR
+PATENTED MATERIAL IN THIS SOFTWARE, AND IF ANY SUCH MATERIAL IS DISCOVERED THE PARTY
+DISCOVERING IT MAY INFORM DR. RICH WOLSKI AT THE UNIVERSITY OF CALIFORNIA, 
+SANTA BARBARA WHO WILL THEN ASCERTAIN THE MOST APPROPRIATE REMEDY, WHICH
+IN THE REGENTS. DISCRETION MAY INCLUDE, WITHOUT LIMITATION, REPLACEMENT
+OF THE CODE SO IDENTIFIED, LICENSING OF THE CODE SO IDENTIFIED, OR WITHDRAWAL
+OF THE CODE CAPABILITY TO THE EXTENT NEEDED TO COMPLY WITH ANY SUCH LICENSES
+OR RIGHTS.
+*/
 /* Python interpreter top-level routines, including init/exit */
 
 #include "Python.h"
@@ -17,6 +55,10 @@
 #include "eval.h"
 #include "marshal.h"
 
+// Nagy
+#include "cct.h"
+#include "logger.h"
+
 #ifdef HAVE_SIGNAL_H
 #include <signal.h>
 #endif
@@ -66,6 +108,16 @@
 extern void _PyGILState_Fini(void);
 #endif /* WITH_THREAD */
 
+// Nagy
+int Py_CCT;			/* CCT collection on */
+int Py_txtCCT;		/* text dump of CCT */
+int Py_logCalls;	/* generate a binary call trace */
+int Py_txtLogCalls; /* dump a text call trace to a text file */
+int Py_cntCalls;  /* count calls */
+int Py_sampleLogs;
+int Py_maxLogRate;
+int Py_logInt;
+
 int Py_DebugFlag; /* Needed by parser.c */
 int Py_VerboseFlag; /* Needed by import.c */
 int Py_InteractiveFlag; /* Needed by Py_FdIsInteractive() below */
@@ -163,6 +215,24 @@
 	if (initialized)
 		return;
 	initialized = 1;
+	
+	// Nagy
+	if (Py_CCT || Py_txtCCT)
+		initCCTManager();
+		
+	if (!Py_txtLogCalls && !Py_logCalls)
+		Py_sampleLogs = 0;
+		
+	if (Py_txtLogCalls || Py_logCalls) {
+		if (Py_txtLogCalls) openLogFile(NULL);
+		if (Py_logCalls) openBinLogFile(NULL);
+		if (Py_sampleLogs){
+    				initSampleVars(Py_maxLogRate, Py_logInt);
+    	}
+	}
+	if (Py_cntCalls)
+		resetCallCounts();	
+	
 
 	if ((p = Py_GETENV("PYTHONDEBUG")) && *p != '\0')
 		Py_DebugFlag = add_flag(Py_DebugFlag, p);
@@ -339,7 +409,7 @@
 {
 	PyInterpreterState *interp;
 	PyThreadState *tstate;
-
+ 
 	if (!initialized)
 		return;
 
@@ -352,6 +422,10 @@
 	 * threads created thru it, so this also protects pending imports in
 	 * the threads created via Threading.
 	 */
+	 
+	// Nagy
+	printf("Exiting\n");	 
+	 
 	call_sys_exitfunc();
 	initialized = 0;
 
diff -Naur Python-2.5-base/Python/pythonrun.c~ Python-2.5/Python/pythonrun.c~
--- Python-2.5-base/Python/pythonrun.c~	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/Python/pythonrun.c~	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,1885 @@
+
+/* Python interpreter top-level routines, including init/exit */
+
+#include "Python.h"
+
+#include "Python-ast.h"
+#include "grammar.h"
+#include "node.h"
+#include "token.h"
+#include "parsetok.h"
+#include "errcode.h"
+#include "code.h"
+#include "compile.h"
+#include "symtable.h"
+#include "pyarena.h"
+#include "ast.h"
+#include "eval.h"
+#include "marshal.h"
+
+// Nagy
+#include "cct.h"
+#include "logger.h"
+
+#ifdef HAVE_SIGNAL_H
+#include <signal.h>
+#endif
+
+#ifdef HAVE_LANGINFO_H
+#include <locale.h>
+#include <langinfo.h>
+#endif
+
+#ifdef MS_WINDOWS
+#undef BYTE
+#include "windows.h"
+#endif
+
+#ifndef Py_REF_DEBUG
+#define PRINT_TOTAL_REFS()
+#else /* Py_REF_DEBUG */
+#define PRINT_TOTAL_REFS() fprintf(stderr,				\
+				   "[%" PY_FORMAT_SIZE_T "d refs]\n",	\
+				   _Py_GetRefTotal())
+#endif
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+extern char *Py_GetPath(void);
+
+extern grammar _PyParser_Grammar; /* From graminit.c */
+
+/* Forward */
+static void initmain(void);
+static void initsite(void);
+static PyObject *run_mod(mod_ty, const char *, PyObject *, PyObject *,
+			  PyCompilerFlags *, PyArena *);
+static PyObject *run_pyc_file(FILE *, const char *, PyObject *, PyObject *,
+			      PyCompilerFlags *);
+static void err_input(perrdetail *);
+static void initsigs(void);
+static void call_sys_exitfunc(void);
+static void call_ll_exitfuncs(void);
+extern void _PyUnicode_Init(void);
+extern void _PyUnicode_Fini(void);
+
+#ifdef WITH_THREAD
+extern void _PyGILState_Init(PyInterpreterState *, PyThreadState *);
+extern void _PyGILState_Fini(void);
+#endif /* WITH_THREAD */
+
+// Nagy
+int Py_CCT;			/* CCT collection on */
+int Py_txtCCT;		/* text dump of CCT */
+int Py_logCalls;	/* generate a binary call trace */
+int Py_txtLogCalls; /* dump a text call trace to a text file */
+int Py_cntCalls;  /* count calls */
+int Py_sampleLogs;
+int Py_maxLogRate;
+int Py_logInt;
+
+int Py_DebugFlag; /* Needed by parser.c */
+int Py_VerboseFlag; /* Needed by import.c */
+int Py_InteractiveFlag; /* Needed by Py_FdIsInteractive() below */
+int Py_NoSiteFlag; /* Suppress 'import site' */
+int Py_UseClassExceptionsFlag = 1; /* Needed by bltinmodule.c: deprecated */
+int Py_FrozenFlag; /* Needed by getpath.c */
+int Py_UnicodeFlag = 0; /* Needed by compile.c */
+int Py_IgnoreEnvironmentFlag; /* e.g. PYTHONPATH, PYTHONHOME */
+/* _XXX Py_QnewFlag should go away in 2.3.  It's true iff -Qnew is passed,
+  on the command line, and is used in 2.2 by ceval.c to make all "/" divisions
+  true divisions (which they will be in 2.3). */
+int _Py_QnewFlag = 0;
+
+/* Reference to 'warnings' module, to avoid importing it
+   on the fly when the import lock may be held.  See 683658/771097
+*/
+static PyObject *warnings_module = NULL;
+
+/* Returns a borrowed reference to the 'warnings' module, or NULL.
+   If the module is returned, it is guaranteed to have been obtained
+   without acquiring the import lock
+*/
+PyObject *PyModule_GetWarningsModule(void)
+{
+	PyObject *typ, *val, *tb;
+	PyObject *all_modules;
+	/* If we managed to get the module at init time, just use it */
+	if (warnings_module)
+		return warnings_module;
+	/* If it wasn't available at init time, it may be available
+	   now in sys.modules (common scenario is frozen apps: import
+	   at init time fails, but the frozen init code sets up sys.path
+	   correctly, then does an implicit import of warnings for us
+	*/
+	/* Save and restore any exceptions */
+	PyErr_Fetch(&typ, &val, &tb);
+
+	all_modules = PySys_GetObject("modules");
+	if (all_modules) {
+		warnings_module = PyDict_GetItemString(all_modules, "warnings");
+		/* We keep a ref in the global */
+		Py_XINCREF(warnings_module);
+	}
+	PyErr_Restore(typ, val, tb);
+	return warnings_module;
+}
+
+static int initialized = 0;
+
+/* API to access the initialized flag -- useful for esoteric use */
+
+int
+Py_IsInitialized(void)
+{
+	return initialized;
+}
+
+/* Global initializations.  Can be undone by Py_Finalize().  Don't
+   call this twice without an intervening Py_Finalize() call.  When
+   initializations fail, a fatal error is issued and the function does
+   not return.  On return, the first thread and interpreter state have
+   been created.
+
+   Locking: you must hold the interpreter lock while calling this.
+   (If the lock has not yet been initialized, that's equivalent to
+   having the lock, but you cannot use multiple threads.)
+
+*/
+
+static int
+add_flag(int flag, const char *envs)
+{
+	int env = atoi(envs);
+	if (flag < env)
+		flag = env;
+	if (flag < 1)
+		flag = 1;
+	return flag;
+}
+
+void
+Py_InitializeEx(int install_sigs)
+{
+	PyInterpreterState *interp;
+	PyThreadState *tstate;
+	PyObject *bimod, *sysmod;
+	char *p;
+#if defined(Py_USING_UNICODE) && defined(HAVE_LANGINFO_H) && defined(CODESET)
+	char *codeset;
+	char *saved_locale;
+	PyObject *sys_stream, *sys_isatty;
+#endif
+	extern void _Py_ReadyTypes(void);
+
+	if (initialized)
+		return;
+	initialized = 1;
+	
+	// Nagy
+	if (Py_CCT || Py_txtCCT)
+		initCCTManager();
+		
+	if (!Py_txtLogCalls)
+		Py_sampleLogs = 0;
+		
+	if (Py_txtLogCalls){
+		openLogFile(NULL);
+		if (Py_sampleLogs){
+    				initSampleVars(Py_maxLogRate, Py_logInt);
+    	}
+	}
+	if (Py_cntCalls)
+		resetCallCounts();	
+	
+
+	if ((p = Py_GETENV("PYTHONDEBUG")) && *p != '\0')
+		Py_DebugFlag = add_flag(Py_DebugFlag, p);
+	if ((p = Py_GETENV("PYTHONVERBOSE")) && *p != '\0')
+		Py_VerboseFlag = add_flag(Py_VerboseFlag, p);
+	if ((p = Py_GETENV("PYTHONOPTIMIZE")) && *p != '\0')
+		Py_OptimizeFlag = add_flag(Py_OptimizeFlag, p);
+
+	interp = PyInterpreterState_New();
+	if (interp == NULL)
+		Py_FatalError("Py_Initialize: can't make first interpreter");
+
+	tstate = PyThreadState_New(interp);
+	if (tstate == NULL)
+		Py_FatalError("Py_Initialize: can't make first thread");
+	(void) PyThreadState_Swap(tstate);
+
+	_Py_ReadyTypes();
+
+	if (!_PyFrame_Init())
+		Py_FatalError("Py_Initialize: can't init frames");
+
+	if (!_PyInt_Init())
+		Py_FatalError("Py_Initialize: can't init ints");
+
+	_PyFloat_Init();
+
+	interp->modules = PyDict_New();
+	if (interp->modules == NULL)
+		Py_FatalError("Py_Initialize: can't make modules dictionary");
+
+#ifdef Py_USING_UNICODE
+	/* Init Unicode implementation; relies on the codec registry */
+	_PyUnicode_Init();
+#endif
+
+	bimod = _PyBuiltin_Init();
+	if (bimod == NULL)
+		Py_FatalError("Py_Initialize: can't initialize __builtin__");
+	interp->builtins = PyModule_GetDict(bimod);
+	if (interp->builtins == NULL)
+		Py_FatalError("Py_Initialize: can't initialize builtins dict");
+	Py_INCREF(interp->builtins);
+
+	sysmod = _PySys_Init();
+	if (sysmod == NULL)
+		Py_FatalError("Py_Initialize: can't initialize sys");
+	interp->sysdict = PyModule_GetDict(sysmod);
+	if (interp->sysdict == NULL)
+		Py_FatalError("Py_Initialize: can't initialize sys dict");
+	Py_INCREF(interp->sysdict);
+	_PyImport_FixupExtension("sys", "sys");
+	PySys_SetPath(Py_GetPath());
+	PyDict_SetItemString(interp->sysdict, "modules",
+			     interp->modules);
+
+	_PyImport_Init();
+
+	/* initialize builtin exceptions */
+	_PyExc_Init();
+	_PyImport_FixupExtension("exceptions", "exceptions");
+
+	/* phase 2 of builtins */
+	_PyImport_FixupExtension("__builtin__", "__builtin__");
+
+	_PyImportHooks_Init();
+
+	if (install_sigs)
+		initsigs(); /* Signal handling stuff, including initintr() */
+
+	initmain(); /* Module __main__ */
+	if (!Py_NoSiteFlag)
+		initsite(); /* Module site */
+
+	/* auto-thread-state API, if available */
+#ifdef WITH_THREAD
+	_PyGILState_Init(interp, tstate);
+#endif /* WITH_THREAD */
+
+	warnings_module = PyImport_ImportModule("warnings");
+	if (!warnings_module)
+		PyErr_Clear();
+
+#if defined(Py_USING_UNICODE) && defined(HAVE_LANGINFO_H) && defined(CODESET)
+	/* On Unix, set the file system encoding according to the
+	   user's preference, if the CODESET names a well-known
+	   Python codec, and Py_FileSystemDefaultEncoding isn't
+	   initialized by other means. Also set the encoding of
+	   stdin and stdout if these are terminals.  */
+
+	saved_locale = strdup(setlocale(LC_CTYPE, NULL));
+	setlocale(LC_CTYPE, "");
+	codeset = nl_langinfo(CODESET);
+	if (codeset && *codeset) {
+		PyObject *enc = PyCodec_Encoder(codeset);
+		if (enc) {
+			codeset = strdup(codeset);
+			Py_DECREF(enc);
+		} else {
+			codeset = NULL;
+			PyErr_Clear();
+		}
+	} else
+		codeset = NULL;
+	setlocale(LC_CTYPE, saved_locale);
+	free(saved_locale);
+
+	if (codeset) {
+		sys_stream = PySys_GetObject("stdin");
+		sys_isatty = PyObject_CallMethod(sys_stream, "isatty", "");
+		if (!sys_isatty)
+			PyErr_Clear();
+		if(sys_isatty && PyObject_IsTrue(sys_isatty)) {
+			if (!PyFile_SetEncoding(sys_stream, codeset))
+				Py_FatalError("Cannot set codeset of stdin");
+		}
+		Py_XDECREF(sys_isatty);
+
+		sys_stream = PySys_GetObject("stdout");
+		sys_isatty = PyObject_CallMethod(sys_stream, "isatty", "");
+		if (!sys_isatty)
+			PyErr_Clear();
+		if(sys_isatty && PyObject_IsTrue(sys_isatty)) {
+			if (!PyFile_SetEncoding(sys_stream, codeset))
+				Py_FatalError("Cannot set codeset of stdout");
+		}
+		Py_XDECREF(sys_isatty);
+
+		sys_stream = PySys_GetObject("stderr");
+		sys_isatty = PyObject_CallMethod(sys_stream, "isatty", "");
+		if (!sys_isatty)
+			PyErr_Clear();
+		if(sys_isatty && PyObject_IsTrue(sys_isatty)) {
+			if (!PyFile_SetEncoding(sys_stream, codeset))
+				Py_FatalError("Cannot set codeset of stderr");
+		}
+		Py_XDECREF(sys_isatty);
+
+		if (!Py_FileSystemDefaultEncoding)
+			Py_FileSystemDefaultEncoding = codeset;
+		else
+			free(codeset);
+	}
+#endif
+}
+
+void
+Py_Initialize(void)
+{
+	Py_InitializeEx(1);
+}
+
+
+#ifdef COUNT_ALLOCS
+extern void dump_counts(FILE*);
+#endif
+
+/* Undo the effect of Py_Initialize().
+
+   Beware: if multiple interpreter and/or thread states exist, these
+   are not wiped out; only the current thread and interpreter state
+   are deleted.  But since everything else is deleted, those other
+   interpreter and thread states should no longer be used.
+
+   (XXX We should do better, e.g. wipe out all interpreters and
+   threads.)
+
+   Locking: as above.
+
+*/
+
+void
+Py_Finalize(void)
+{
+	PyInterpreterState *interp;
+	PyThreadState *tstate;
+ 
+	if (!initialized)
+		return;
+
+	/* The interpreter is still entirely intact at this point, and the
+	 * exit funcs may be relying on that.  In particular, if some thread
+	 * or exit func is still waiting to do an import, the import machinery
+	 * expects Py_IsInitialized() to return true.  So don't say the
+	 * interpreter is uninitialized until after the exit funcs have run.
+	 * Note that Threading.py uses an exit func to do a join on all the
+	 * threads created thru it, so this also protects pending imports in
+	 * the threads created via Threading.
+	 */
+	 
+	// Nagy
+	printf("Exiting\n");	 
+	 
+	call_sys_exitfunc();
+	initialized = 0;
+
+	/* Get current thread state and interpreter pointer */
+	tstate = PyThreadState_GET();
+	interp = tstate->interp;
+
+	/* Disable signal handling */
+	PyOS_FiniInterrupts();
+
+	/* drop module references we saved */
+	Py_XDECREF(warnings_module);
+	warnings_module = NULL;
+
+	/* Collect garbage.  This may call finalizers; it's nice to call these
+	 * before all modules are destroyed.
+	 * XXX If a __del__ or weakref callback is triggered here, and tries to
+	 * XXX import a module, bad things can happen, because Python no
+	 * XXX longer believes it's initialized.
+	 * XXX     Fatal Python error: Interpreter not initialized (version mismatch?)
+	 * XXX is easy to provoke that way.  I've also seen, e.g.,
+	 * XXX     Exception exceptions.ImportError: 'No module named sha'
+	 * XXX         in <function callback at 0x008F5718> ignored
+	 * XXX but I'm unclear on exactly how that one happens.  In any case,
+	 * XXX I haven't seen a real-life report of either of these.
+	 */
+	PyGC_Collect();
+#ifdef COUNT_ALLOCS
+	/* With COUNT_ALLOCS, it helps to run GC multiple times:
+	   each collection might release some types from the type
+	   list, so they become garbage. */
+	while (PyGC_Collect() > 0)
+		/* nothing */;
+#endif
+
+	/* Destroy all modules */
+	PyImport_Cleanup();
+
+	/* Collect final garbage.  This disposes of cycles created by
+	 * new-style class definitions, for example.
+	 * XXX This is disabled because it caused too many problems.  If
+	 * XXX a __del__ or weakref callback triggers here, Python code has
+	 * XXX a hard time running, because even the sys module has been
+	 * XXX cleared out (sys.stdout is gone, sys.excepthook is gone, etc).
+	 * XXX One symptom is a sequence of information-free messages
+	 * XXX coming from threads (if a __del__ or callback is invoked,
+	 * XXX other threads can execute too, and any exception they encounter
+	 * XXX triggers a comedy of errors as subsystem after subsystem
+	 * XXX fails to find what it *expects* to find in sys to help report
+	 * XXX the exception and consequent unexpected failures).  I've also
+	 * XXX seen segfaults then, after adding print statements to the
+	 * XXX Python code getting called.
+	 */
+#if 0
+	PyGC_Collect();
+#endif
+
+	/* Destroy the database used by _PyImport_{Fixup,Find}Extension */
+	_PyImport_Fini();
+
+	/* Debugging stuff */
+#ifdef COUNT_ALLOCS
+	dump_counts(stdout);
+#endif
+
+	PRINT_TOTAL_REFS();
+
+#ifdef Py_TRACE_REFS
+	/* Display all objects still alive -- this can invoke arbitrary
+	 * __repr__ overrides, so requires a mostly-intact interpreter.
+	 * Alas, a lot of stuff may still be alive now that will be cleaned
+	 * up later.
+	 */
+	if (Py_GETENV("PYTHONDUMPREFS"))
+		_Py_PrintReferences(stderr);
+#endif /* Py_TRACE_REFS */
+
+	/* Cleanup auto-thread-state */
+#ifdef WITH_THREAD
+	_PyGILState_Fini();
+#endif /* WITH_THREAD */
+
+	/* Clear interpreter state */
+	PyInterpreterState_Clear(interp);
+
+	/* Now we decref the exception classes.  After this point nothing
+	   can raise an exception.  That's okay, because each Fini() method
+	   below has been checked to make sure no exceptions are ever
+	   raised.
+	*/
+
+	_PyExc_Fini();
+
+	/* Delete current thread */
+	PyThreadState_Swap(NULL);
+	PyInterpreterState_Delete(interp);
+
+	/* Sundry finalizers */
+	PyMethod_Fini();
+	PyFrame_Fini();
+	PyCFunction_Fini();
+	PyTuple_Fini();
+	PyList_Fini();
+	PySet_Fini();
+	PyString_Fini();
+	PyInt_Fini();
+	PyFloat_Fini();
+
+#ifdef Py_USING_UNICODE
+	/* Cleanup Unicode implementation */
+	_PyUnicode_Fini();
+#endif
+
+	/* XXX Still allocated:
+	   - various static ad-hoc pointers to interned strings
+	   - int and float free list blocks
+	   - whatever various modules and libraries allocate
+	*/
+
+	PyGrammar_RemoveAccelerators(&_PyParser_Grammar);
+
+#ifdef Py_TRACE_REFS
+	/* Display addresses (& refcnts) of all objects still alive.
+	 * An address can be used to find the repr of the object, printed
+	 * above by _Py_PrintReferences.
+	 */
+	if (Py_GETENV("PYTHONDUMPREFS"))
+		_Py_PrintReferenceAddresses(stderr);
+#endif /* Py_TRACE_REFS */
+#ifdef PYMALLOC_DEBUG
+	if (Py_GETENV("PYTHONMALLOCSTATS"))
+		_PyObject_DebugMallocStats();
+#endif
+
+	call_ll_exitfuncs();
+}
+
+/* Create and initialize a new interpreter and thread, and return the
+   new thread.  This requires that Py_Initialize() has been called
+   first.
+
+   Unsuccessful initialization yields a NULL pointer.  Note that *no*
+   exception information is available even in this case -- the
+   exception information is held in the thread, and there is no
+   thread.
+
+   Locking: as above.
+
+*/
+
+PyThreadState *
+Py_NewInterpreter(void)
+{
+	PyInterpreterState *interp;
+	PyThreadState *tstate, *save_tstate;
+	PyObject *bimod, *sysmod;
+
+	if (!initialized)
+		Py_FatalError("Py_NewInterpreter: call Py_Initialize first");
+
+	interp = PyInterpreterState_New();
+	if (interp == NULL)
+		return NULL;
+
+	tstate = PyThreadState_New(interp);
+	if (tstate == NULL) {
+		PyInterpreterState_Delete(interp);
+		return NULL;
+	}
+
+	save_tstate = PyThreadState_Swap(tstate);
+
+	/* XXX The following is lax in error checking */
+
+	interp->modules = PyDict_New();
+
+	bimod = _PyImport_FindExtension("__builtin__", "__builtin__");
+	if (bimod != NULL) {
+		interp->builtins = PyModule_GetDict(bimod);
+		if (interp->builtins == NULL)
+			goto handle_error;
+		Py_INCREF(interp->builtins);
+	}
+	sysmod = _PyImport_FindExtension("sys", "sys");
+	if (bimod != NULL && sysmod != NULL) {
+		interp->sysdict = PyModule_GetDict(sysmod);
+		if (interp->sysdict == NULL)
+			goto handle_error;
+		Py_INCREF(interp->sysdict);
+		PySys_SetPath(Py_GetPath());
+		PyDict_SetItemString(interp->sysdict, "modules",
+				     interp->modules);
+		_PyImportHooks_Init();
+		initmain();
+		if (!Py_NoSiteFlag)
+			initsite();
+	}
+
+	if (!PyErr_Occurred())
+		return tstate;
+
+handle_error:
+	/* Oops, it didn't work.  Undo it all. */
+
+	PyErr_Print();
+	PyThreadState_Clear(tstate);
+	PyThreadState_Swap(save_tstate);
+	PyThreadState_Delete(tstate);
+	PyInterpreterState_Delete(interp);
+
+	return NULL;
+}
+
+/* Delete an interpreter and its last thread.  This requires that the
+   given thread state is current, that the thread has no remaining
+   frames, and that it is its interpreter's only remaining thread.
+   It is a fatal error to violate these constraints.
+
+   (Py_Finalize() doesn't have these constraints -- it zaps
+   everything, regardless.)
+
+   Locking: as above.
+
+*/
+
+void
+Py_EndInterpreter(PyThreadState *tstate)
+{
+	PyInterpreterState *interp = tstate->interp;
+
+	if (tstate != PyThreadState_GET())
+		Py_FatalError("Py_EndInterpreter: thread is not current");
+	if (tstate->frame != NULL)
+		Py_FatalError("Py_EndInterpreter: thread still has a frame");
+	if (tstate != interp->tstate_head || tstate->next != NULL)
+		Py_FatalError("Py_EndInterpreter: not the last thread");
+
+	PyImport_Cleanup();
+	PyInterpreterState_Clear(interp);
+	PyThreadState_Swap(NULL);
+	PyInterpreterState_Delete(interp);
+}
+
+static char *progname = "python";
+
+void
+Py_SetProgramName(char *pn)
+{
+	if (pn && *pn)
+		progname = pn;
+}
+
+char *
+Py_GetProgramName(void)
+{
+	return progname;
+}
+
+static char *default_home = NULL;
+
+void
+Py_SetPythonHome(char *home)
+{
+	default_home = home;
+}
+
+char *
+Py_GetPythonHome(void)
+{
+	char *home = default_home;
+	if (home == NULL && !Py_IgnoreEnvironmentFlag)
+		home = Py_GETENV("PYTHONHOME");
+	return home;
+}
+
+/* Create __main__ module */
+
+static void
+initmain(void)
+{
+	PyObject *m, *d;
+	m = PyImport_AddModule("__main__");
+	if (m == NULL)
+		Py_FatalError("can't create __main__ module");
+	d = PyModule_GetDict(m);
+	if (PyDict_GetItemString(d, "__builtins__") == NULL) {
+		PyObject *bimod = PyImport_ImportModule("__builtin__");
+		if (bimod == NULL ||
+		    PyDict_SetItemString(d, "__builtins__", bimod) != 0)
+			Py_FatalError("can't add __builtins__ to __main__");
+		Py_DECREF(bimod);
+	}
+}
+
+/* Import the site module (not into __main__ though) */
+
+static void
+initsite(void)
+{
+	PyObject *m, *f;
+	m = PyImport_ImportModule("site");
+	if (m == NULL) {
+		f = PySys_GetObject("stderr");
+		if (Py_VerboseFlag) {
+			PyFile_WriteString(
+				"'import site' failed; traceback:\n", f);
+			PyErr_Print();
+		}
+		else {
+			PyFile_WriteString(
+			  "'import site' failed; use -v for traceback\n", f);
+			PyErr_Clear();
+		}
+	}
+	else {
+		Py_DECREF(m);
+	}
+}
+
+/* Parse input from a file and execute it */
+
+int
+PyRun_AnyFileExFlags(FILE *fp, const char *filename, int closeit,
+		     PyCompilerFlags *flags)
+{
+	if (filename == NULL)
+		filename = "???";
+	if (Py_FdIsInteractive(fp, filename)) {
+		int err = PyRun_InteractiveLoopFlags(fp, filename, flags);
+		if (closeit)
+			fclose(fp);
+		return err;
+	}
+	else
+		return PyRun_SimpleFileExFlags(fp, filename, closeit, flags);
+}
+
+int
+PyRun_InteractiveLoopFlags(FILE *fp, const char *filename, PyCompilerFlags *flags)
+{
+	PyObject *v;
+	int ret;
+	PyCompilerFlags local_flags;
+
+	if (flags == NULL) {
+		flags = &local_flags;
+		local_flags.cf_flags = 0;
+	}
+	v = PySys_GetObject("ps1");
+	if (v == NULL) {
+		PySys_SetObject("ps1", v = PyString_FromString(">>> "));
+		Py_XDECREF(v);
+	}
+	v = PySys_GetObject("ps2");
+	if (v == NULL) {
+		PySys_SetObject("ps2", v = PyString_FromString("... "));
+		Py_XDECREF(v);
+	}
+	for (;;) {
+		ret = PyRun_InteractiveOneFlags(fp, filename, flags);
+		PRINT_TOTAL_REFS();
+		if (ret == E_EOF)
+			return 0;
+		/*
+		if (ret == E_NOMEM)
+			return -1;
+		*/
+	}
+}
+
+/* compute parser flags based on compiler flags */
+#define PARSER_FLAGS(flags) \
+	((flags) ? ((((flags)->cf_flags & PyCF_DONT_IMPLY_DEDENT) ? \
+		      PyPARSE_DONT_IMPLY_DEDENT : 0) \
+		    | ((flags)->cf_flags & CO_FUTURE_WITH_STATEMENT ? \
+		       PyPARSE_WITH_IS_KEYWORD : 0)) : 0)
+
+int
+PyRun_InteractiveOneFlags(FILE *fp, const char *filename, PyCompilerFlags *flags)
+{
+	PyObject *m, *d, *v, *w;
+	mod_ty mod;
+	PyArena *arena;
+	char *ps1 = "", *ps2 = "";
+	int errcode = 0;
+
+	v = PySys_GetObject("ps1");
+	if (v != NULL) {
+		v = PyObject_Str(v);
+		if (v == NULL)
+			PyErr_Clear();
+		else if (PyString_Check(v))
+			ps1 = PyString_AsString(v);
+	}
+	w = PySys_GetObject("ps2");
+	if (w != NULL) {
+		w = PyObject_Str(w);
+		if (w == NULL)
+			PyErr_Clear();
+		else if (PyString_Check(w))
+			ps2 = PyString_AsString(w);
+	}
+	arena = PyArena_New();
+	if (arena == NULL) {
+		Py_XDECREF(v);
+		Py_XDECREF(w);
+		return -1;
+	}
+	mod = PyParser_ASTFromFile(fp, filename,
+				   Py_single_input, ps1, ps2,
+				   flags, &errcode, arena);
+	Py_XDECREF(v);
+	Py_XDECREF(w);
+	if (mod == NULL) {
+		PyArena_Free(arena);
+		if (errcode == E_EOF) {
+			PyErr_Clear();
+			return E_EOF;
+		}
+		PyErr_Print();
+		return -1;
+	}
+	m = PyImport_AddModule("__main__");
+	if (m == NULL) {
+		PyArena_Free(arena);
+		return -1;
+	}
+	d = PyModule_GetDict(m);
+	v = run_mod(mod, filename, d, d, flags, arena);
+	PyArena_Free(arena);
+	if (v == NULL) {
+		PyErr_Print();
+		return -1;
+	}
+	Py_DECREF(v);
+	if (Py_FlushLine())
+		PyErr_Clear();
+	return 0;
+}
+
+/* Check whether a file maybe a pyc file: Look at the extension,
+   the file type, and, if we may close it, at the first few bytes. */
+
+static int
+maybe_pyc_file(FILE *fp, const char* filename, const char* ext, int closeit)
+{
+	if (strcmp(ext, ".pyc") == 0 || strcmp(ext, ".pyo") == 0)
+		return 1;
+
+	/* Only look into the file if we are allowed to close it, since
+	   it then should also be seekable. */
+	if (closeit) {
+		/* Read only two bytes of the magic. If the file was opened in
+		   text mode, the bytes 3 and 4 of the magic (\r\n) might not
+		   be read as they are on disk. */
+		unsigned int halfmagic = PyImport_GetMagicNumber() & 0xFFFF;
+		unsigned char buf[2];
+		/* Mess:  In case of -x, the stream is NOT at its start now,
+		   and ungetc() was used to push back the first newline,
+		   which makes the current stream position formally undefined,
+		   and a x-platform nightmare.
+		   Unfortunately, we have no direct way to know whether -x
+		   was specified.  So we use a terrible hack:  if the current
+		   stream position is not 0, we assume -x was specified, and
+		   give up.  Bug 132850 on SourceForge spells out the
+		   hopelessness of trying anything else (fseek and ftell
+		   don't work predictably x-platform for text-mode files).
+		*/
+		int ispyc = 0;
+		if (ftell(fp) == 0) {
+			if (fread(buf, 1, 2, fp) == 2 &&
+			    ((unsigned int)buf[1]<<8 | buf[0]) == halfmagic)
+				ispyc = 1;
+			rewind(fp);
+		}
+		return ispyc;
+	}
+	return 0;
+}
+
+int
+PyRun_SimpleFileExFlags(FILE *fp, const char *filename, int closeit,
+			PyCompilerFlags *flags)
+{
+	PyObject *m, *d, *v;
+	const char *ext;
+
+	m = PyImport_AddModule("__main__");
+	if (m == NULL)
+		return -1;
+	d = PyModule_GetDict(m);
+	if (PyDict_GetItemString(d, "__file__") == NULL) {
+		PyObject *f = PyString_FromString(filename);
+		if (f == NULL)
+			return -1;
+		if (PyDict_SetItemString(d, "__file__", f) < 0) {
+			Py_DECREF(f);
+			return -1;
+		}
+		Py_DECREF(f);
+	}
+	ext = filename + strlen(filename) - 4;
+	if (maybe_pyc_file(fp, filename, ext, closeit)) {
+		/* Try to run a pyc file. First, re-open in binary */
+		if (closeit)
+			fclose(fp);
+		if ((fp = fopen(filename, "rb")) == NULL) {
+			fprintf(stderr, "python: Can't reopen .pyc file\n");
+			return -1;
+		}
+		/* Turn on optimization if a .pyo file is given */
+		if (strcmp(ext, ".pyo") == 0)
+			Py_OptimizeFlag = 1;
+		v = run_pyc_file(fp, filename, d, d, flags);
+	} else {
+		v = PyRun_FileExFlags(fp, filename, Py_file_input, d, d,
+				      closeit, flags);
+	}
+	if (v == NULL) {
+		PyErr_Print();
+		return -1;
+	}
+	Py_DECREF(v);
+	if (Py_FlushLine())
+		PyErr_Clear();
+	return 0;
+}
+
+int
+PyRun_SimpleStringFlags(const char *command, PyCompilerFlags *flags)
+{
+	PyObject *m, *d, *v;
+	m = PyImport_AddModule("__main__");
+	if (m == NULL)
+		return -1;
+	d = PyModule_GetDict(m);
+	v = PyRun_StringFlags(command, Py_file_input, d, d, flags);
+	if (v == NULL) {
+		PyErr_Print();
+		return -1;
+	}
+	Py_DECREF(v);
+	if (Py_FlushLine())
+		PyErr_Clear();
+	return 0;
+}
+
+static int
+parse_syntax_error(PyObject *err, PyObject **message, const char **filename,
+		   int *lineno, int *offset, const char **text)
+{
+	long hold;
+	PyObject *v;
+
+	/* old style errors */
+	if (PyTuple_Check(err))
+		return PyArg_ParseTuple(err, "O(ziiz)", message, filename,
+					lineno, offset, text);
+
+	/* new style errors.  `err' is an instance */
+
+	if (! (v = PyObject_GetAttrString(err, "msg")))
+		goto finally;
+	*message = v;
+
+	if (!(v = PyObject_GetAttrString(err, "filename")))
+		goto finally;
+	if (v == Py_None)
+		*filename = NULL;
+	else if (! (*filename = PyString_AsString(v)))
+		goto finally;
+
+	Py_DECREF(v);
+	if (!(v = PyObject_GetAttrString(err, "lineno")))
+		goto finally;
+	hold = PyInt_AsLong(v);
+	Py_DECREF(v);
+	v = NULL;
+	if (hold < 0 && PyErr_Occurred())
+		goto finally;
+	*lineno = (int)hold;
+
+	if (!(v = PyObject_GetAttrString(err, "offset")))
+		goto finally;
+	if (v == Py_None) {
+		*offset = -1;
+		Py_DECREF(v);
+		v = NULL;
+	} else {
+		hold = PyInt_AsLong(v);
+		Py_DECREF(v);
+		v = NULL;
+		if (hold < 0 && PyErr_Occurred())
+			goto finally;
+		*offset = (int)hold;
+	}
+
+	if (!(v = PyObject_GetAttrString(err, "text")))
+		goto finally;
+	if (v == Py_None)
+		*text = NULL;
+	else if (! (*text = PyString_AsString(v)))
+		goto finally;
+	Py_DECREF(v);
+	return 1;
+
+finally:
+	Py_XDECREF(v);
+	return 0;
+}
+
+void
+PyErr_Print(void)
+{
+	PyErr_PrintEx(1);
+}
+
+static void
+print_error_text(PyObject *f, int offset, const char *text)
+{
+	char *nl;
+	if (offset >= 0) {
+		if (offset > 0 && offset == (int)strlen(text))
+			offset--;
+		for (;;) {
+			nl = strchr(text, '\n');
+			if (nl == NULL || nl-text >= offset)
+				break;
+			offset -= (int)(nl+1-text);
+			text = nl+1;
+		}
+		while (*text == ' ' || *text == '\t') {
+			text++;
+			offset--;
+		}
+	}
+	PyFile_WriteString("    ", f);
+	PyFile_WriteString(text, f);
+	if (*text == '\0' || text[strlen(text)-1] != '\n')
+		PyFile_WriteString("\n", f);
+	if (offset == -1)
+		return;
+	PyFile_WriteString("    ", f);
+	offset--;
+	while (offset > 0) {
+		PyFile_WriteString(" ", f);
+		offset--;
+	}
+	PyFile_WriteString("^\n", f);
+}
+
+static void
+handle_system_exit(void)
+{
+	PyObject *exception, *value, *tb;
+	int exitcode = 0;
+
+	PyErr_Fetch(&exception, &value, &tb);
+	if (Py_FlushLine())
+		PyErr_Clear();
+	fflush(stdout);
+	if (value == NULL || value == Py_None)
+		goto done;
+	if (PyExceptionInstance_Check(value)) {
+		/* The error code should be in the `code' attribute. */
+		PyObject *code = PyObject_GetAttrString(value, "code");
+		if (code) {
+			Py_DECREF(value);
+			value = code;
+			if (value == Py_None)
+				goto done;
+		}
+		/* If we failed to dig out the 'code' attribute,
+		   just let the else clause below print the error. */
+	}
+	if (PyInt_Check(value))
+		exitcode = (int)PyInt_AsLong(value);
+	else {
+		PyObject_Print(value, stderr, Py_PRINT_RAW);
+		PySys_WriteStderr("\n");
+		exitcode = 1;
+	}
+ done:
+	/* Restore and clear the exception info, in order to properly decref
+	 * the exception, value, and traceback.	 If we just exit instead,
+	 * these leak, which confuses PYTHONDUMPREFS output, and may prevent
+	 * some finalizers from running.
+	 */
+	PyErr_Restore(exception, value, tb);
+	PyErr_Clear();
+	Py_Exit(exitcode);
+	/* NOTREACHED */
+}
+
+void
+PyErr_PrintEx(int set_sys_last_vars)
+{
+	PyObject *exception, *v, *tb, *hook;
+
+	if (PyErr_ExceptionMatches(PyExc_SystemExit)) {
+		handle_system_exit();
+	}
+	PyErr_Fetch(&exception, &v, &tb);
+	if (exception == NULL)
+		return;
+	PyErr_NormalizeException(&exception, &v, &tb);
+	if (exception == NULL)
+		return;
+        /* Now we know v != NULL too */
+	if (set_sys_last_vars) {
+		PySys_SetObject("last_type", exception);
+		PySys_SetObject("last_value", v);
+		PySys_SetObject("last_traceback", tb);
+	}
+	hook = PySys_GetObject("excepthook");
+	if (hook) {
+		PyObject *args = PyTuple_Pack(3,
+		    exception, v, tb ? tb : Py_None);
+		PyObject *result = PyEval_CallObject(hook, args);
+		if (result == NULL) {
+			PyObject *exception2, *v2, *tb2;
+			if (PyErr_ExceptionMatches(PyExc_SystemExit)) {
+				handle_system_exit();
+			}
+			PyErr_Fetch(&exception2, &v2, &tb2);
+			PyErr_NormalizeException(&exception2, &v2, &tb2);
+			/* It should not be possible for exception2 or v2
+			   to be NULL. However PyErr_Display() can't
+			   tolerate NULLs, so just be safe. */
+			if (exception2 == NULL) {
+				exception2 = Py_None;
+				Py_INCREF(exception2);
+			}
+			if (v2 == NULL) {
+				v2 = Py_None;
+				Py_INCREF(v2);
+			}
+			if (Py_FlushLine())
+				PyErr_Clear();
+			fflush(stdout);
+			PySys_WriteStderr("Error in sys.excepthook:\n");
+			PyErr_Display(exception2, v2, tb2);
+			PySys_WriteStderr("\nOriginal exception was:\n");
+			PyErr_Display(exception, v, tb);
+			Py_DECREF(exception2);
+			Py_DECREF(v2);
+			Py_XDECREF(tb2);
+		}
+		Py_XDECREF(result);
+		Py_XDECREF(args);
+	} else {
+		PySys_WriteStderr("sys.excepthook is missing\n");
+		PyErr_Display(exception, v, tb);
+	}
+	Py_XDECREF(exception);
+	Py_XDECREF(v);
+	Py_XDECREF(tb);
+}
+
+void
+PyErr_Display(PyObject *exception, PyObject *value, PyObject *tb)
+{
+	int err = 0;
+	PyObject *f = PySys_GetObject("stderr");
+	Py_INCREF(value);
+	if (f == NULL)
+		fprintf(stderr, "lost sys.stderr\n");
+	else {
+		if (Py_FlushLine())
+			PyErr_Clear();
+		fflush(stdout);
+		if (tb && tb != Py_None)
+			err = PyTraceBack_Print(tb, f);
+		if (err == 0 &&
+		    PyObject_HasAttrString(value, "print_file_and_line"))
+		{
+			PyObject *message;
+			const char *filename, *text;
+			int lineno, offset;
+			if (!parse_syntax_error(value, &message, &filename,
+						&lineno, &offset, &text))
+				PyErr_Clear();
+			else {
+				char buf[10];
+				PyFile_WriteString("  File \"", f);
+				if (filename == NULL)
+					PyFile_WriteString("<string>", f);
+				else
+					PyFile_WriteString(filename, f);
+				PyFile_WriteString("\", line ", f);
+				PyOS_snprintf(buf, sizeof(buf), "%d", lineno);
+				PyFile_WriteString(buf, f);
+				PyFile_WriteString("\n", f);
+				if (text != NULL)
+					print_error_text(f, offset, text);
+				Py_DECREF(value);
+				value = message;
+				/* Can't be bothered to check all those
+				   PyFile_WriteString() calls */
+				if (PyErr_Occurred())
+					err = -1;
+			}
+		}
+		if (err) {
+			/* Don't do anything else */
+		}
+		else if (PyExceptionClass_Check(exception)) {
+			PyObject* moduleName;
+			char* className = PyExceptionClass_Name(exception);
+			if (className != NULL) {
+				char *dot = strrchr(className, '.');
+				if (dot != NULL)
+					className = dot+1;
+			}
+
+			moduleName = PyObject_GetAttrString(exception, "__module__");
+			if (moduleName == NULL)
+				err = PyFile_WriteString("<unknown>", f);
+			else {
+				char* modstr = PyString_AsString(moduleName);
+				if (modstr && strcmp(modstr, "exceptions"))
+				{
+					err = PyFile_WriteString(modstr, f);
+					err += PyFile_WriteString(".", f);
+				}
+				Py_DECREF(moduleName);
+			}
+			if (err == 0) {
+				if (className == NULL)
+				      err = PyFile_WriteString("<unknown>", f);
+				else
+				      err = PyFile_WriteString(className, f);
+			}
+		}
+		else
+			err = PyFile_WriteObject(exception, f, Py_PRINT_RAW);
+		if (err == 0 && (value != Py_None)) {
+			PyObject *s = PyObject_Str(value);
+			/* only print colon if the str() of the
+			   object is not the empty string
+			*/
+			if (s == NULL)
+				err = -1;
+			else if (!PyString_Check(s) ||
+				 PyString_GET_SIZE(s) != 0)
+				err = PyFile_WriteString(": ", f);
+			if (err == 0)
+			  err = PyFile_WriteObject(s, f, Py_PRINT_RAW);
+			Py_XDECREF(s);
+		}
+		if (err == 0)
+			err = PyFile_WriteString("\n", f);
+	}
+	Py_DECREF(value);
+	/* If an error happened here, don't show it.
+	   XXX This is wrong, but too many callers rely on this behavior. */
+	if (err != 0)
+		PyErr_Clear();
+}
+
+PyObject *
+PyRun_StringFlags(const char *str, int start, PyObject *globals,
+		  PyObject *locals, PyCompilerFlags *flags)
+{
+	PyObject *ret = NULL;
+	mod_ty mod;
+	PyArena *arena = PyArena_New();
+	if (arena == NULL)
+		return NULL;
+	
+	mod = PyParser_ASTFromString(str, "<string>", start, flags, arena);
+	if (mod != NULL)
+		ret = run_mod(mod, "<string>", globals, locals, flags, arena);
+	PyArena_Free(arena);
+	return ret;
+}
+
+PyObject *
+PyRun_FileExFlags(FILE *fp, const char *filename, int start, PyObject *globals,
+		  PyObject *locals, int closeit, PyCompilerFlags *flags)
+{
+	PyObject *ret;
+	mod_ty mod;
+	PyArena *arena = PyArena_New();
+	if (arena == NULL)
+		return NULL;
+	
+	mod = PyParser_ASTFromFile(fp, filename, start, 0, 0,
+				   flags, NULL, arena);
+	if (mod == NULL) {
+		PyArena_Free(arena);
+		return NULL;
+	}
+	if (closeit)
+		fclose(fp);
+	ret = run_mod(mod, filename, globals, locals, flags, arena);
+	PyArena_Free(arena);
+	return ret;
+}
+
+static PyObject *
+run_mod(mod_ty mod, const char *filename, PyObject *globals, PyObject *locals,
+	 PyCompilerFlags *flags, PyArena *arena)
+{
+	PyCodeObject *co;
+	PyObject *v;
+	co = PyAST_Compile(mod, filename, flags, arena);
+	if (co == NULL)
+		return NULL;
+	v = PyEval_EvalCode(co, globals, locals);
+	Py_DECREF(co);
+	return v;
+}
+
+static PyObject *
+run_pyc_file(FILE *fp, const char *filename, PyObject *globals,
+	     PyObject *locals, PyCompilerFlags *flags)
+{
+	PyCodeObject *co;
+	PyObject *v;
+	long magic;
+	long PyImport_GetMagicNumber(void);
+
+	magic = PyMarshal_ReadLongFromFile(fp);
+	if (magic != PyImport_GetMagicNumber()) {
+		PyErr_SetString(PyExc_RuntimeError,
+			   "Bad magic number in .pyc file");
+		return NULL;
+	}
+	(void) PyMarshal_ReadLongFromFile(fp);
+	v = PyMarshal_ReadLastObjectFromFile(fp);
+	fclose(fp);
+	if (v == NULL || !PyCode_Check(v)) {
+		Py_XDECREF(v);
+		PyErr_SetString(PyExc_RuntimeError,
+			   "Bad code object in .pyc file");
+		return NULL;
+	}
+	co = (PyCodeObject *)v;
+	v = PyEval_EvalCode(co, globals, locals);
+	if (v && flags)
+		flags->cf_flags |= (co->co_flags & PyCF_MASK);
+	Py_DECREF(co);
+	return v;
+}
+
+PyObject *
+Py_CompileStringFlags(const char *str, const char *filename, int start,
+		      PyCompilerFlags *flags)
+{
+	PyCodeObject *co;
+	mod_ty mod;
+	PyArena *arena = PyArena_New();
+	if (arena == NULL)
+		return NULL;
+
+	mod = PyParser_ASTFromString(str, filename, start, flags, arena);
+	if (mod == NULL) {
+		PyArena_Free(arena);
+		return NULL;
+	}
+	if (flags && (flags->cf_flags & PyCF_ONLY_AST)) {
+		PyObject *result = PyAST_mod2obj(mod);
+		PyArena_Free(arena);
+		return result;
+	}
+	co = PyAST_Compile(mod, filename, flags, arena);
+	PyArena_Free(arena);
+	return (PyObject *)co;
+}
+
+struct symtable *
+Py_SymtableString(const char *str, const char *filename, int start)
+{
+	struct symtable *st;
+	mod_ty mod;
+	PyArena *arena = PyArena_New();
+	if (arena == NULL)
+		return NULL;
+
+	mod = PyParser_ASTFromString(str, filename, start, NULL, arena);
+	if (mod == NULL) {
+		PyArena_Free(arena);
+		return NULL;
+	}
+	st = PySymtable_Build(mod, filename, 0);
+	PyArena_Free(arena);
+	return st;
+}
+
+/* Preferred access to parser is through AST. */
+mod_ty
+PyParser_ASTFromString(const char *s, const char *filename, int start,
+		       PyCompilerFlags *flags, PyArena *arena)
+{
+	mod_ty mod;
+	perrdetail err;
+	node *n = PyParser_ParseStringFlagsFilename(s, filename,
+					&_PyParser_Grammar, start, &err,
+					PARSER_FLAGS(flags));
+	if (n) {
+		mod = PyAST_FromNode(n, flags, filename, arena);
+		PyNode_Free(n);
+		return mod;
+	}
+	else {
+		err_input(&err);
+		return NULL;
+	}
+}
+
+mod_ty
+PyParser_ASTFromFile(FILE *fp, const char *filename, int start, char *ps1,
+		     char *ps2, PyCompilerFlags *flags, int *errcode,
+		     PyArena *arena)
+{
+	mod_ty mod;
+	perrdetail err;
+	node *n = PyParser_ParseFileFlags(fp, filename, &_PyParser_Grammar,
+				start, ps1, ps2, &err, PARSER_FLAGS(flags));
+	if (n) {
+		mod = PyAST_FromNode(n, flags, filename, arena);
+		PyNode_Free(n);
+		return mod;
+	}
+	else {
+		err_input(&err);
+		if (errcode)
+			*errcode = err.error;
+		return NULL;
+	}
+}
+
+/* Simplified interface to parsefile -- return node or set exception */
+
+node *
+PyParser_SimpleParseFileFlags(FILE *fp, const char *filename, int start, int flags)
+{
+	perrdetail err;
+	node *n = PyParser_ParseFileFlags(fp, filename, &_PyParser_Grammar,
+					  start, NULL, NULL, &err, flags);
+	if (n == NULL)
+		err_input(&err);
+
+	return n;
+}
+
+/* Simplified interface to parsestring -- return node or set exception */
+
+node *
+PyParser_SimpleParseStringFlags(const char *str, int start, int flags)
+{
+	perrdetail err;
+	node *n = PyParser_ParseStringFlags(str, &_PyParser_Grammar,
+					    start, &err, flags);
+	if (n == NULL)
+		err_input(&err);
+	return n;
+}
+
+node *
+PyParser_SimpleParseStringFlagsFilename(const char *str, const char *filename,
+					int start, int flags)
+{
+	perrdetail err;
+	node *n = PyParser_ParseStringFlagsFilename(str, filename,
+				&_PyParser_Grammar, start, &err, flags);
+	if (n == NULL)
+		err_input(&err);
+	return n;
+}
+
+node *
+PyParser_SimpleParseStringFilename(const char *str, const char *filename, int start)
+{
+	return PyParser_SimpleParseStringFlagsFilename(str, filename, start, 0);
+}
+
+/* May want to move a more generalized form of this to parsetok.c or
+   even parser modules. */
+
+void
+PyParser_SetError(perrdetail *err)
+{
+	err_input(err);
+}
+
+/* Set the error appropriate to the given input error code (see errcode.h) */
+
+static void
+err_input(perrdetail *err)
+{
+	PyObject *v, *w, *errtype;
+	PyObject* u = NULL;
+	char *msg = NULL;
+	errtype = PyExc_SyntaxError;
+	switch (err->error) {
+	case E_SYNTAX:
+		errtype = PyExc_IndentationError;
+		if (err->expected == INDENT)
+			msg = "expected an indented block";
+		else if (err->token == INDENT)
+			msg = "unexpected indent";
+		else if (err->token == DEDENT)
+			msg = "unexpected unindent";
+		else {
+			errtype = PyExc_SyntaxError;
+			msg = "invalid syntax";
+		}
+		break;
+	case E_TOKEN:
+		msg = "invalid token";
+		break;
+	case E_EOFS:
+		msg = "EOF while scanning triple-quoted string";
+		break;
+	case E_EOLS:
+		msg = "EOL while scanning single-quoted string";
+		break;
+	case E_INTR:
+		if (!PyErr_Occurred())
+			PyErr_SetNone(PyExc_KeyboardInterrupt);
+		return;
+	case E_NOMEM:
+		PyErr_NoMemory();
+		return;
+	case E_EOF:
+		msg = "unexpected EOF while parsing";
+		break;
+	case E_TABSPACE:
+		errtype = PyExc_TabError;
+		msg = "inconsistent use of tabs and spaces in indentation";
+		break;
+	case E_OVERFLOW:
+		msg = "expression too long";
+		break;
+	case E_DEDENT:
+		errtype = PyExc_IndentationError;
+		msg = "unindent does not match any outer indentation level";
+		break;
+	case E_TOODEEP:
+		errtype = PyExc_IndentationError;
+		msg = "too many levels of indentation";
+		break;
+	case E_DECODE: {
+		PyObject *type, *value, *tb;
+		PyErr_Fetch(&type, &value, &tb);
+		if (value != NULL) {
+			u = PyObject_Str(value);
+			if (u != NULL) {
+				msg = PyString_AsString(u);
+			}
+		}
+		if (msg == NULL)
+			msg = "unknown decode error";
+		Py_XDECREF(type);
+		Py_XDECREF(value);
+		Py_XDECREF(tb);
+		break;
+	}
+	case E_LINECONT:
+		msg = "unexpected character after line continuation character";
+		break;
+	default:
+		fprintf(stderr, "error=%d\n", err->error);
+		msg = "unknown parsing error";
+		break;
+	}
+	v = Py_BuildValue("(ziiz)", err->filename,
+			  err->lineno, err->offset, err->text);
+	if (err->text != NULL) {
+		PyObject_FREE(err->text);
+		err->text = NULL;
+	}
+	w = NULL;
+	if (v != NULL)
+		w = Py_BuildValue("(sO)", msg, v);
+	Py_XDECREF(u);
+	Py_XDECREF(v);
+	PyErr_SetObject(errtype, w);
+	Py_XDECREF(w);
+}
+
+/* Print fatal error message and abort */
+
+void
+Py_FatalError(const char *msg)
+{
+	fprintf(stderr, "Fatal Python error: %s\n", msg);
+#ifdef MS_WINDOWS
+	OutputDebugString("Fatal Python error: ");
+	OutputDebugString(msg);
+	OutputDebugString("\n");
+#ifdef _DEBUG
+	DebugBreak();
+#endif
+#endif /* MS_WINDOWS */
+	abort();
+}
+
+/* Clean up and exit */
+
+#ifdef WITH_THREAD
+#include "pythread.h"
+#endif
+
+#define NEXITFUNCS 32
+static void (*exitfuncs[NEXITFUNCS])(void);
+static int nexitfuncs = 0;
+
+int Py_AtExit(void (*func)(void))
+{
+	if (nexitfuncs >= NEXITFUNCS)
+		return -1;
+	exitfuncs[nexitfuncs++] = func;
+	return 0;
+}
+
+static void
+call_sys_exitfunc(void)
+{
+	PyObject *exitfunc = PySys_GetObject("exitfunc");
+
+	if (exitfunc) {
+		PyObject *res;
+		Py_INCREF(exitfunc);
+		PySys_SetObject("exitfunc", (PyObject *)NULL);
+		res = PyEval_CallObject(exitfunc, (PyObject *)NULL);
+		if (res == NULL) {
+			if (!PyErr_ExceptionMatches(PyExc_SystemExit)) {
+				PySys_WriteStderr("Error in sys.exitfunc:\n");
+			}
+			PyErr_Print();
+		}
+		Py_DECREF(exitfunc);
+	}
+
+	if (Py_FlushLine())
+		PyErr_Clear();
+}
+
+static void
+call_ll_exitfuncs(void)
+{
+	while (nexitfuncs > 0)
+		(*exitfuncs[--nexitfuncs])();
+
+	fflush(stdout);
+	fflush(stderr);
+}
+
+void
+Py_Exit(int sts)
+{
+	Py_Finalize();
+
+	exit(sts);
+}
+
+static void
+initsigs(void)
+{
+#ifdef SIGPIPE
+	PyOS_setsig(SIGPIPE, SIG_IGN);
+#endif
+#ifdef SIGXFZ
+	PyOS_setsig(SIGXFZ, SIG_IGN);
+#endif
+#ifdef SIGXFSZ
+	PyOS_setsig(SIGXFSZ, SIG_IGN);
+#endif
+	PyOS_InitInterrupts(); /* May imply initsignal() */
+}
+
+
+/*
+ * The file descriptor fd is considered ``interactive'' if either
+ *   a) isatty(fd) is TRUE, or
+ *   b) the -i flag was given, and the filename associated with
+ *      the descriptor is NULL or "<stdin>" or "???".
+ */
+int
+Py_FdIsInteractive(FILE *fp, const char *filename)
+{
+	if (isatty((int)fileno(fp)))
+		return 1;
+	if (!Py_InteractiveFlag)
+		return 0;
+	return (filename == NULL) ||
+	       (strcmp(filename, "<stdin>") == 0) ||
+	       (strcmp(filename, "???") == 0);
+}
+
+
+#if defined(USE_STACKCHECK)
+#if defined(WIN32) && defined(_MSC_VER)
+
+/* Stack checking for Microsoft C */
+
+#include <malloc.h>
+#include <excpt.h>
+
+/*
+ * Return non-zero when we run out of memory on the stack; zero otherwise.
+ */
+int
+PyOS_CheckStack(void)
+{
+	__try {
+		/* alloca throws a stack overflow exception if there's
+		   not enough space left on the stack */
+		alloca(PYOS_STACK_MARGIN * sizeof(void*));
+		return 0;
+	} __except (EXCEPTION_EXECUTE_HANDLER) {
+		/* just ignore all errors */
+	}
+	return 1;
+}
+
+#endif /* WIN32 && _MSC_VER */
+
+/* Alternate implementations can be added here... */
+
+#endif /* USE_STACKCHECK */
+
+
+/* Wrappers around sigaction() or signal(). */
+
+PyOS_sighandler_t
+PyOS_getsig(int sig)
+{
+#ifdef HAVE_SIGACTION
+	struct sigaction context;
+	if (sigaction(sig, NULL, &context) == -1)
+		return SIG_ERR;
+	return context.sa_handler;
+#else
+	PyOS_sighandler_t handler;
+/* Special signal handling for the secure CRT in Visual Studio 2005 */
+#if defined(_MSC_VER) && _MSC_VER >= 1400
+	switch (sig) {
+	/* Only these signals are valid */
+	case SIGINT:
+	case SIGILL:
+	case SIGFPE:
+	case SIGSEGV:
+	case SIGTERM:
+	case SIGBREAK:
+	case SIGABRT:
+		break;
+	/* Don't call signal() with other values or it will assert */
+	default:
+		return SIG_ERR;
+	}
+#endif /* _MSC_VER && _MSC_VER >= 1400 */
+	handler = signal(sig, SIG_IGN);
+	if (handler != SIG_ERR)
+		signal(sig, handler);
+	return handler;
+#endif
+}
+
+PyOS_sighandler_t
+PyOS_setsig(int sig, PyOS_sighandler_t handler)
+{
+#ifdef HAVE_SIGACTION
+	struct sigaction context, ocontext;
+	context.sa_handler = handler;
+	sigemptyset(&context.sa_mask);
+	context.sa_flags = 0;
+	if (sigaction(sig, &context, &ocontext) == -1)
+		return SIG_ERR;
+	return ocontext.sa_handler;
+#else
+	PyOS_sighandler_t oldhandler;
+	oldhandler = signal(sig, handler);
+#ifdef HAVE_SIGINTERRUPT
+	siginterrupt(sig, 1);
+#endif
+	return oldhandler;
+#endif
+}
+
+/* Deprecated C API functions still provided for binary compatiblity */
+
+#undef PyParser_SimpleParseFile
+PyAPI_FUNC(node *)
+PyParser_SimpleParseFile(FILE *fp, const char *filename, int start)
+{
+	return PyParser_SimpleParseFileFlags(fp, filename, start, 0);
+}
+
+#undef PyParser_SimpleParseString
+PyAPI_FUNC(node *)
+PyParser_SimpleParseString(const char *str, int start)
+{
+	return PyParser_SimpleParseStringFlags(str, start, 0);
+}
+
+#undef PyRun_AnyFile
+PyAPI_FUNC(int)
+PyRun_AnyFile(FILE *fp, const char *name)
+{
+	return PyRun_AnyFileExFlags(fp, name, 0, NULL);
+}
+
+#undef PyRun_AnyFileEx
+PyAPI_FUNC(int)
+PyRun_AnyFileEx(FILE *fp, const char *name, int closeit)
+{
+	return PyRun_AnyFileExFlags(fp, name, closeit, NULL);
+}
+
+#undef PyRun_AnyFileFlags
+PyAPI_FUNC(int)
+PyRun_AnyFileFlags(FILE *fp, const char *name, PyCompilerFlags *flags)
+{
+	return PyRun_AnyFileExFlags(fp, name, 0, flags);
+}
+
+#undef PyRun_File
+PyAPI_FUNC(PyObject *)
+PyRun_File(FILE *fp, const char *p, int s, PyObject *g, PyObject *l)
+{
+        return PyRun_FileExFlags(fp, p, s, g, l, 0, NULL);
+}
+
+#undef PyRun_FileEx
+PyAPI_FUNC(PyObject *)
+PyRun_FileEx(FILE *fp, const char *p, int s, PyObject *g, PyObject *l, int c)
+{
+        return PyRun_FileExFlags(fp, p, s, g, l, c, NULL);
+}
+
+#undef PyRun_FileFlags
+PyAPI_FUNC(PyObject *)
+PyRun_FileFlags(FILE *fp, const char *p, int s, PyObject *g, PyObject *l,
+		PyCompilerFlags *flags)
+{
+        return PyRun_FileExFlags(fp, p, s, g, l, 0, flags);
+}
+
+#undef PyRun_SimpleFile
+PyAPI_FUNC(int)
+PyRun_SimpleFile(FILE *f, const char *p)
+{
+	return PyRun_SimpleFileExFlags(f, p, 0, NULL);
+}
+
+#undef PyRun_SimpleFileEx
+PyAPI_FUNC(int)
+PyRun_SimpleFileEx(FILE *f, const char *p, int c)
+{
+	return PyRun_SimpleFileExFlags(f, p, c, NULL);
+}
+
+
+#undef PyRun_String
+PyAPI_FUNC(PyObject *)
+PyRun_String(const char *str, int s, PyObject *g, PyObject *l)
+{
+	return PyRun_StringFlags(str, s, g, l, NULL);
+}
+
+#undef PyRun_SimpleString
+PyAPI_FUNC(int)
+PyRun_SimpleString(const char *s)
+{
+	return PyRun_SimpleStringFlags(s, NULL);
+}
+
+#undef Py_CompileString
+PyAPI_FUNC(PyObject *)
+Py_CompileString(const char *str, const char *p, int s)
+{
+	return Py_CompileStringFlags(str, p, s, NULL);
+}
+
+#undef PyRun_InteractiveOne
+PyAPI_FUNC(int)
+PyRun_InteractiveOne(FILE *f, const char *p)
+{
+	return PyRun_InteractiveOneFlags(f, p, NULL);
+}
+
+#undef PyRun_InteractiveLoop
+PyAPI_FUNC(int)
+PyRun_InteractiveLoop(FILE *f, const char *p)
+{
+	return PyRun_InteractiveLoopFlags(f, p, NULL);
+}
+
+#ifdef __cplusplus
+}
+#endif
+
diff -Naur Python-2.5-base/Tools/webchecker/webchecker.py Python-2.5/Tools/webchecker/webchecker.py
--- Python-2.5-base/Tools/webchecker/webchecker.py	2006-07-26 11:15:45.000000000 -0700
+++ Python-2.5/Tools/webchecker/webchecker.py	2009-03-17 15:50:58.000000000 -0700
@@ -103,7 +103,7 @@
 """
 
 
-__version__ = "$Revision: 50851 $"
+__version__ = "$Revision: 1.1.1.1 $"
 
 
 import sys
diff -Naur Python-2.5-base/Tools/webchecker/websucker.py Python-2.5/Tools/webchecker/websucker.py
--- Python-2.5-base/Tools/webchecker/websucker.py	2002-09-11 13:36:02.000000000 -0700
+++ Python-2.5/Tools/webchecker/websucker.py	2009-03-17 15:50:58.000000000 -0700
@@ -2,7 +2,7 @@
 
 """A variant on webchecker that creates a mirror copy of a remote site."""
 
-__version__ = "$Revision: 28654 $"
+__version__ = "$Revision: 1.1.1.1 $"
 
 import os
 import sys
diff -Naur Python-2.5-base/Tools/world/world Python-2.5/Tools/world/world
--- Python-2.5-base/Tools/world/world	2002-07-15 12:53:28.000000000 -0700
+++ Python-2.5/Tools/world/world	2009-03-17 15:50:58.000000000 -0700
@@ -79,7 +79,7 @@
     --help
         Print this message.
 """
-__version__ = '$Revision: 27624 $'
+__version__ = '$Revision: 1.1.1.1 $'
 
 
 import sys
diff -Naur Python-2.5-base/build/scripts-2.5/idle Python-2.5/build/scripts-2.5/idle
--- Python-2.5-base/build/scripts-2.5/idle	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/build/scripts-2.5/idle	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,5 @@
+#!/usr/local/bin/python
+
+from idlelib.PyShell import main
+if __name__ == '__main__':
+    main()
diff -Naur Python-2.5-base/build/scripts-2.5/pydoc Python-2.5/build/scripts-2.5/pydoc
--- Python-2.5-base/build/scripts-2.5/pydoc	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/build/scripts-2.5/pydoc	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,5 @@
+#!/usr/local/bin/python
+
+import pydoc
+if __name__ == '__main__':
+    pydoc.cli()
diff -Naur Python-2.5-base/build/scripts-2.5/smtpd.py Python-2.5/build/scripts-2.5/smtpd.py
--- Python-2.5-base/build/scripts-2.5/smtpd.py	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/build/scripts-2.5/smtpd.py	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,549 @@
+#!/usr/local/bin/python
+"""An RFC 2821 smtp proxy.
+
+Usage: %(program)s [options] [localhost:localport [remotehost:remoteport]]
+
+Options:
+
+    --nosetuid
+    -n
+        This program generally tries to setuid `nobody', unless this flag is
+        set.  The setuid call will fail if this program is not run as root (in
+        which case, use this flag).
+
+    --version
+    -V
+        Print the version number and exit.
+
+    --class classname
+    -c classname
+        Use `classname' as the concrete SMTP proxy class.  Uses `PureProxy' by
+        default.
+
+    --debug
+    -d
+        Turn on debugging prints.
+
+    --help
+    -h
+        Print this message and exit.
+
+Version: %(__version__)s
+
+If localhost is not given then `localhost' is used, and if localport is not
+given then 8025 is used.  If remotehost is not given then `localhost' is used,
+and if remoteport is not given, then 25 is used.
+"""
+
+
+# Overview:
+#
+# This file implements the minimal SMTP protocol as defined in RFC 821.  It
+# has a hierarchy of classes which implement the backend functionality for the
+# smtpd.  A number of classes are provided:
+#
+#   SMTPServer - the base class for the backend.  Raises NotImplementedError
+#   if you try to use it.
+#
+#   DebuggingServer - simply prints each message it receives on stdout.
+#
+#   PureProxy - Proxies all messages to a real smtpd which does final
+#   delivery.  One known problem with this class is that it doesn't handle
+#   SMTP errors from the backend server at all.  This should be fixed
+#   (contributions are welcome!).
+#
+#   MailmanProxy - An experimental hack to work with GNU Mailman
+#   <www.list.org>.  Using this server as your real incoming smtpd, your
+#   mailhost will automatically recognize and accept mail destined to Mailman
+#   lists when those lists are created.  Every message not destined for a list
+#   gets forwarded to a real backend smtpd, as with PureProxy.  Again, errors
+#   are not handled correctly yet.
+#
+# Please note that this script requires Python 2.0
+#
+# Author: Barry Warsaw <barry@python.org>
+#
+# TODO:
+#
+# - support mailbox delivery
+# - alias files
+# - ESMTP
+# - handle error codes from the backend smtpd
+
+import sys
+import os
+import errno
+import getopt
+import time
+import socket
+import asyncore
+import asynchat
+
+__all__ = ["SMTPServer","DebuggingServer","PureProxy","MailmanProxy"]
+
+program = sys.argv[0]
+__version__ = 'Python SMTP proxy version 0.2'
+
+
+class Devnull:
+    def write(self, msg): pass
+    def flush(self): pass
+
+
+DEBUGSTREAM = Devnull()
+NEWLINE = '\n'
+EMPTYSTRING = ''
+COMMASPACE = ', '
+
+
+
+def usage(code, msg=''):
+    print >> sys.stderr, __doc__ % globals()
+    if msg:
+        print >> sys.stderr, msg
+    sys.exit(code)
+
+
+
+class SMTPChannel(asynchat.async_chat):
+    COMMAND = 0
+    DATA = 1
+
+    def __init__(self, server, conn, addr):
+        asynchat.async_chat.__init__(self, conn)
+        self.__server = server
+        self.__conn = conn
+        self.__addr = addr
+        self.__line = []
+        self.__state = self.COMMAND
+        self.__greeting = 0
+        self.__mailfrom = None
+        self.__rcpttos = []
+        self.__data = ''
+        self.__fqdn = socket.getfqdn()
+        self.__peer = conn.getpeername()
+        print >> DEBUGSTREAM, 'Peer:', repr(self.__peer)
+        self.push('220 %s %s' % (self.__fqdn, __version__))
+        self.set_terminator('\r\n')
+
+    # Overrides base class for convenience
+    def push(self, msg):
+        asynchat.async_chat.push(self, msg + '\r\n')
+
+    # Implementation of base class abstract method
+    def collect_incoming_data(self, data):
+        self.__line.append(data)
+
+    # Implementation of base class abstract method
+    def found_terminator(self):
+        line = EMPTYSTRING.join(self.__line)
+        print >> DEBUGSTREAM, 'Data:', repr(line)
+        self.__line = []
+        if self.__state == self.COMMAND:
+            if not line:
+                self.push('500 Error: bad syntax')
+                return
+            method = None
+            i = line.find(' ')
+            if i < 0:
+                command = line.upper()
+                arg = None
+            else:
+                command = line[:i].upper()
+                arg = line[i+1:].strip()
+            method = getattr(self, 'smtp_' + command, None)
+            if not method:
+                self.push('502 Error: command "%s" not implemented' % command)
+                return
+            method(arg)
+            return
+        else:
+            if self.__state != self.DATA:
+                self.push('451 Internal confusion')
+                return
+            # Remove extraneous carriage returns and de-transparency according
+            # to RFC 821, Section 4.5.2.
+            data = []
+            for text in line.split('\r\n'):
+                if text and text[0] == '.':
+                    data.append(text[1:])
+                else:
+                    data.append(text)
+            self.__data = NEWLINE.join(data)
+            status = self.__server.process_message(self.__peer,
+                                                   self.__mailfrom,
+                                                   self.__rcpttos,
+                                                   self.__data)
+            self.__rcpttos = []
+            self.__mailfrom = None
+            self.__state = self.COMMAND
+            self.set_terminator('\r\n')
+            if not status:
+                self.push('250 Ok')
+            else:
+                self.push(status)
+
+    # SMTP and ESMTP commands
+    def smtp_HELO(self, arg):
+        if not arg:
+            self.push('501 Syntax: HELO hostname')
+            return
+        if self.__greeting:
+            self.push('503 Duplicate HELO/EHLO')
+        else:
+            self.__greeting = arg
+            self.push('250 %s' % self.__fqdn)
+
+    def smtp_NOOP(self, arg):
+        if arg:
+            self.push('501 Syntax: NOOP')
+        else:
+            self.push('250 Ok')
+
+    def smtp_QUIT(self, arg):
+        # args is ignored
+        self.push('221 Bye')
+        self.close_when_done()
+
+    # factored
+    def __getaddr(self, keyword, arg):
+        address = None
+        keylen = len(keyword)
+        if arg[:keylen].upper() == keyword:
+            address = arg[keylen:].strip()
+            if not address:
+                pass
+            elif address[0] == '<' and address[-1] == '>' and address != '<>':
+                # Addresses can be in the form <person@dom.com> but watch out
+                # for null address, e.g. <>
+                address = address[1:-1]
+        return address
+
+    def smtp_MAIL(self, arg):
+        print >> DEBUGSTREAM, '===> MAIL', arg
+        address = self.__getaddr('FROM:', arg)
+        if not address:
+            self.push('501 Syntax: MAIL FROM:<address>')
+            return
+        if self.__mailfrom:
+            self.push('503 Error: nested MAIL command')
+            return
+        self.__mailfrom = address
+        print >> DEBUGSTREAM, 'sender:', self.__mailfrom
+        self.push('250 Ok')
+
+    def smtp_RCPT(self, arg):
+        print >> DEBUGSTREAM, '===> RCPT', arg
+        if not self.__mailfrom:
+            self.push('503 Error: need MAIL command')
+            return
+        address = self.__getaddr('TO:', arg)
+        if not address:
+            self.push('501 Syntax: RCPT TO: <address>')
+            return
+        self.__rcpttos.append(address)
+        print >> DEBUGSTREAM, 'recips:', self.__rcpttos
+        self.push('250 Ok')
+
+    def smtp_RSET(self, arg):
+        if arg:
+            self.push('501 Syntax: RSET')
+            return
+        # Resets the sender, recipients, and data, but not the greeting
+        self.__mailfrom = None
+        self.__rcpttos = []
+        self.__data = ''
+        self.__state = self.COMMAND
+        self.push('250 Ok')
+
+    def smtp_DATA(self, arg):
+        if not self.__rcpttos:
+            self.push('503 Error: need RCPT command')
+            return
+        if arg:
+            self.push('501 Syntax: DATA')
+            return
+        self.__state = self.DATA
+        self.set_terminator('\r\n.\r\n')
+        self.push('354 End data with <CR><LF>.<CR><LF>')
+
+
+
+class SMTPServer(asyncore.dispatcher):
+    def __init__(self, localaddr, remoteaddr):
+        self._localaddr = localaddr
+        self._remoteaddr = remoteaddr
+        asyncore.dispatcher.__init__(self)
+        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
+        # try to re-use a server port if possible
+        self.set_reuse_addr()
+        self.bind(localaddr)
+        self.listen(5)
+        print >> DEBUGSTREAM, \
+              '%s started at %s\n\tLocal addr: %s\n\tRemote addr:%s' % (
+            self.__class__.__name__, time.ctime(time.time()),
+            localaddr, remoteaddr)
+
+    def handle_accept(self):
+        conn, addr = self.accept()
+        print >> DEBUGSTREAM, 'Incoming connection from %s' % repr(addr)
+        channel = SMTPChannel(self, conn, addr)
+
+    # API for "doing something useful with the message"
+    def process_message(self, peer, mailfrom, rcpttos, data):
+        """Override this abstract method to handle messages from the client.
+
+        peer is a tuple containing (ipaddr, port) of the client that made the
+        socket connection to our smtp port.
+
+        mailfrom is the raw address the client claims the message is coming
+        from.
+
+        rcpttos is a list of raw addresses the client wishes to deliver the
+        message to.
+
+        data is a string containing the entire full text of the message,
+        headers (if supplied) and all.  It has been `de-transparencied'
+        according to RFC 821, Section 4.5.2.  In other words, a line
+        containing a `.' followed by other text has had the leading dot
+        removed.
+
+        This function should return None, for a normal `250 Ok' response;
+        otherwise it returns the desired response string in RFC 821 format.
+
+        """
+        raise NotImplementedError
+
+
+
+class DebuggingServer(SMTPServer):
+    # Do something with the gathered message
+    def process_message(self, peer, mailfrom, rcpttos, data):
+        inheaders = 1
+        lines = data.split('\n')
+        print '---------- MESSAGE FOLLOWS ----------'
+        for line in lines:
+            # headers first
+            if inheaders and not line:
+                print 'X-Peer:', peer[0]
+                inheaders = 0
+            print line
+        print '------------ END MESSAGE ------------'
+
+
+
+class PureProxy(SMTPServer):
+    def process_message(self, peer, mailfrom, rcpttos, data):
+        lines = data.split('\n')
+        # Look for the last header
+        i = 0
+        for line in lines:
+            if not line:
+                break
+            i += 1
+        lines.insert(i, 'X-Peer: %s' % peer[0])
+        data = NEWLINE.join(lines)
+        refused = self._deliver(mailfrom, rcpttos, data)
+        # TBD: what to do with refused addresses?
+        print >> DEBUGSTREAM, 'we got some refusals:', refused
+
+    def _deliver(self, mailfrom, rcpttos, data):
+        import smtplib
+        refused = {}
+        try:
+            s = smtplib.SMTP()
+            s.connect(self._remoteaddr[0], self._remoteaddr[1])
+            try:
+                refused = s.sendmail(mailfrom, rcpttos, data)
+            finally:
+                s.quit()
+        except smtplib.SMTPRecipientsRefused, e:
+            print >> DEBUGSTREAM, 'got SMTPRecipientsRefused'
+            refused = e.recipients
+        except (socket.error, smtplib.SMTPException), e:
+            print >> DEBUGSTREAM, 'got', e.__class__
+            # All recipients were refused.  If the exception had an associated
+            # error code, use it.  Otherwise,fake it with a non-triggering
+            # exception code.
+            errcode = getattr(e, 'smtp_code', -1)
+            errmsg = getattr(e, 'smtp_error', 'ignore')
+            for r in rcpttos:
+                refused[r] = (errcode, errmsg)
+        return refused
+
+
+
+class MailmanProxy(PureProxy):
+    def process_message(self, peer, mailfrom, rcpttos, data):
+        from cStringIO import StringIO
+        from Mailman import Utils
+        from Mailman import Message
+        from Mailman import MailList
+        # If the message is to a Mailman mailing list, then we'll invoke the
+        # Mailman script directly, without going through the real smtpd.
+        # Otherwise we'll forward it to the local proxy for disposition.
+        listnames = []
+        for rcpt in rcpttos:
+            local = rcpt.lower().split('@')[0]
+            # We allow the following variations on the theme
+            #   listname
+            #   listname-admin
+            #   listname-owner
+            #   listname-request
+            #   listname-join
+            #   listname-leave
+            parts = local.split('-')
+            if len(parts) > 2:
+                continue
+            listname = parts[0]
+            if len(parts) == 2:
+                command = parts[1]
+            else:
+                command = ''
+            if not Utils.list_exists(listname) or command not in (
+                    '', 'admin', 'owner', 'request', 'join', 'leave'):
+                continue
+            listnames.append((rcpt, listname, command))
+        # Remove all list recipients from rcpttos and forward what we're not
+        # going to take care of ourselves.  Linear removal should be fine
+        # since we don't expect a large number of recipients.
+        for rcpt, listname, command in listnames:
+            rcpttos.remove(rcpt)
+        # If there's any non-list destined recipients left,
+        print >> DEBUGSTREAM, 'forwarding recips:', ' '.join(rcpttos)
+        if rcpttos:
+            refused = self._deliver(mailfrom, rcpttos, data)
+            # TBD: what to do with refused addresses?
+            print >> DEBUGSTREAM, 'we got refusals:', refused
+        # Now deliver directly to the list commands
+        mlists = {}
+        s = StringIO(data)
+        msg = Message.Message(s)
+        # These headers are required for the proper execution of Mailman.  All
+        # MTAs in existance seem to add these if the original message doesn't
+        # have them.
+        if not msg.getheader('from'):
+            msg['From'] = mailfrom
+        if not msg.getheader('date'):
+            msg['Date'] = time.ctime(time.time())
+        for rcpt, listname, command in listnames:
+            print >> DEBUGSTREAM, 'sending message to', rcpt
+            mlist = mlists.get(listname)
+            if not mlist:
+                mlist = MailList.MailList(listname, lock=0)
+                mlists[listname] = mlist
+            # dispatch on the type of command
+            if command == '':
+                # post
+                msg.Enqueue(mlist, tolist=1)
+            elif command == 'admin':
+                msg.Enqueue(mlist, toadmin=1)
+            elif command == 'owner':
+                msg.Enqueue(mlist, toowner=1)
+            elif command == 'request':
+                msg.Enqueue(mlist, torequest=1)
+            elif command in ('join', 'leave'):
+                # TBD: this is a hack!
+                if command == 'join':
+                    msg['Subject'] = 'subscribe'
+                else:
+                    msg['Subject'] = 'unsubscribe'
+                msg.Enqueue(mlist, torequest=1)
+
+
+
+class Options:
+    setuid = 1
+    classname = 'PureProxy'
+
+
+
+def parseargs():
+    global DEBUGSTREAM
+    try:
+        opts, args = getopt.getopt(
+            sys.argv[1:], 'nVhc:d',
+            ['class=', 'nosetuid', 'version', 'help', 'debug'])
+    except getopt.error, e:
+        usage(1, e)
+
+    options = Options()
+    for opt, arg in opts:
+        if opt in ('-h', '--help'):
+            usage(0)
+        elif opt in ('-V', '--version'):
+            print >> sys.stderr, __version__
+            sys.exit(0)
+        elif opt in ('-n', '--nosetuid'):
+            options.setuid = 0
+        elif opt in ('-c', '--class'):
+            options.classname = arg
+        elif opt in ('-d', '--debug'):
+            DEBUGSTREAM = sys.stderr
+
+    # parse the rest of the arguments
+    if len(args) < 1:
+        localspec = 'localhost:8025'
+        remotespec = 'localhost:25'
+    elif len(args) < 2:
+        localspec = args[0]
+        remotespec = 'localhost:25'
+    elif len(args) < 3:
+        localspec = args[0]
+        remotespec = args[1]
+    else:
+        usage(1, 'Invalid arguments: %s' % COMMASPACE.join(args))
+
+    # split into host/port pairs
+    i = localspec.find(':')
+    if i < 0:
+        usage(1, 'Bad local spec: %s' % localspec)
+    options.localhost = localspec[:i]
+    try:
+        options.localport = int(localspec[i+1:])
+    except ValueError:
+        usage(1, 'Bad local port: %s' % localspec)
+    i = remotespec.find(':')
+    if i < 0:
+        usage(1, 'Bad remote spec: %s' % remotespec)
+    options.remotehost = remotespec[:i]
+    try:
+        options.remoteport = int(remotespec[i+1:])
+    except ValueError:
+        usage(1, 'Bad remote port: %s' % remotespec)
+    return options
+
+
+
+if __name__ == '__main__':
+    options = parseargs()
+    # Become nobody
+    if options.setuid:
+        try:
+            import pwd
+        except ImportError:
+            print >> sys.stderr, \
+                  'Cannot import module "pwd"; try running with -n option.'
+            sys.exit(1)
+        nobody = pwd.getpwnam('nobody')[2]
+        try:
+            os.setuid(nobody)
+        except OSError, e:
+            if e.errno != errno.EPERM: raise
+            print >> sys.stderr, \
+                  'Cannot setuid "nobody"; try running with -n option.'
+            sys.exit(1)
+    classname = options.classname
+    if "." in classname:
+        lastdot = classname.rfind(".")
+        mod = __import__(classname[:lastdot], globals(), locals(), [""])
+        classname = classname[lastdot+1:]
+    else:
+        import __main__ as mod
+    class_ = getattr(mod, classname)
+    proxy = class_((options.localhost, options.localport),
+                   (options.remotehost, options.remoteport))
+    try:
+        asyncore.loop()
+    except KeyboardInterrupt:
+        pass
diff -Naur Python-2.5-base/build/temp.linux-x86_64-2.5/libffi/config.log Python-2.5/build/temp.linux-x86_64-2.5/libffi/config.log
--- Python-2.5-base/build/temp.linux-x86_64-2.5/libffi/config.log	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/build/temp.linux-x86_64-2.5/libffi/config.log	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,576 @@
+This file contains any messages produced by compilers while
+running configure, to aid debugging if configure makes a mistake.
+
+It was created by libffi configure 2.1, which was
+generated by GNU Autoconf 2.59.  Invocation command line was
+
+  $ /home/nagy/research/pythonCCT/Python-2.5/Modules/_ctypes/libffi/configure 
+
+## --------- ##
+## Platform. ##
+## --------- ##
+
+hostname = tarheels
+uname -m = x86_64
+uname -r = 2.6.24.3-pfmon2-nofreqscaling
+uname -s = Linux
+uname -v = #7 SMP Thu Jan 22 19:53:28 PST 2009
+
+/usr/bin/uname -p = unknown
+/bin/uname -X     = unknown
+
+/bin/arch              = unknown
+/usr/bin/arch -k       = unknown
+/usr/convex/getsysinfo = unknown
+hostinfo               = unknown
+/bin/machine           = unknown
+/usr/bin/oslevel       = unknown
+/bin/universe          = unknown
+
+PATH: /usr/local/sbin
+PATH: /usr/local/bin
+PATH: /usr/sbin
+PATH: /usr/bin
+PATH: /sbin
+PATH: /bin
+PATH: /usr/games
+
+
+## ----------- ##
+## Core tests. ##
+## ----------- ##
+
+configure:1328: checking build system type
+configure:1346: result: x86_64-unknown-linux-gnu
+configure:1354: checking host system type
+configure:1368: result: x86_64-unknown-linux-gnu
+configure:1376: checking target system type
+configure:1390: result: x86_64-unknown-linux-gnu
+configure:1454: checking for gcc
+configure:1480: result: gcc -pthread
+configure:1724: checking for C compiler version
+configure:1727: gcc -pthread --version </dev/null >&5
+gcc (GCC) 4.2.4 (Ubuntu 4.2.4-1ubuntu3)
+Copyright (C) 2007 Free Software Foundation, Inc.
+This is free software; see the source for copying conditions.  There is NO
+warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+
+configure:1730: $? = 0
+configure:1732: gcc -pthread -v </dev/null >&5
+Using built-in specs.
+Target: x86_64-linux-gnu
+Configured with: ../src/configure -v --enable-languages=c,c++,fortran,objc,obj-c++,treelang --prefix=/usr --enable-shared --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.2 --program-suffix=-4.2 --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-mpfr --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
+Thread model: posix
+gcc version 4.2.4 (Ubuntu 4.2.4-1ubuntu3)
+configure:1735: $? = 0
+configure:1737: gcc -pthread -V </dev/null >&5
+gcc: '-V' must come at the start of the command line
+configure:1740: $? = 1
+configure:1763: checking for C compiler default output file name
+configure:1766: gcc -pthread    conftest.c  >&5
+configure:1769: $? = 0
+configure:1815: result: a.out
+configure:1820: checking whether the C compiler works
+configure:1826: ./a.out
+configure:1829: $? = 0
+configure:1846: result: yes
+configure:1853: checking whether we are cross compiling
+configure:1855: result: no
+configure:1858: checking for suffix of executables
+configure:1860: gcc -pthread -o conftest    conftest.c  >&5
+configure:1863: $? = 0
+configure:1888: result: 
+configure:1894: checking for suffix of object files
+configure:1915: gcc -pthread -c   conftest.c >&5
+configure:1918: $? = 0
+configure:1940: result: o
+configure:1944: checking whether we are using the GNU C compiler
+configure:1968: gcc -pthread -c   conftest.c >&5
+configure:1974: $? = 0
+configure:1977: test -z 			 || test ! -s conftest.err
+configure:1980: $? = 0
+configure:1983: test -s conftest.o
+configure:1986: $? = 0
+configure:1999: result: yes
+configure:2005: checking whether gcc -pthread accepts -g
+configure:2026: gcc -pthread -c -g  conftest.c >&5
+configure:2032: $? = 0
+configure:2035: test -z 			 || test ! -s conftest.err
+configure:2038: $? = 0
+configure:2041: test -s conftest.o
+configure:2044: $? = 0
+configure:2055: result: yes
+configure:2072: checking for gcc -pthread option to accept ANSI C
+configure:2142: gcc -pthread  -c   conftest.c >&5
+configure:2148: $? = 0
+configure:2151: test -z 			 || test ! -s conftest.err
+configure:2154: $? = 0
+configure:2157: test -s conftest.o
+configure:2160: $? = 0
+configure:2178: result: none needed
+configure:2196: gcc -pthread -c   conftest.c >&5
+conftest.c:2: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'me'
+configure:2202: $? = 1
+configure: failed program was:
+| #ifndef __cplusplus
+|   choke me
+| #endif
+configure:2342: checking how to run the C preprocessor
+configure:2377: gcc -pthread -E  conftest.c
+configure:2383: $? = 0
+configure:2415: gcc -pthread -E  conftest.c
+conftest.c:9:28: error: ac_nonexistent.h: No such file or directory
+configure:2421: $? = 1
+configure: failed program was:
+| /* confdefs.h.  */
+| 
+| #define PACKAGE_NAME "libffi"
+| #define PACKAGE_TARNAME "libffi"
+| #define PACKAGE_VERSION "2.1"
+| #define PACKAGE_STRING "libffi 2.1"
+| #define PACKAGE_BUGREPORT "http://gcc.gnu.org/bugs.html"
+| /* end confdefs.h.  */
+| #include <ac_nonexistent.h>
+configure:2460: result: gcc -pthread -E
+configure:2484: gcc -pthread -E  conftest.c
+configure:2490: $? = 0
+configure:2522: gcc -pthread -E  conftest.c
+conftest.c:9:28: error: ac_nonexistent.h: No such file or directory
+configure:2528: $? = 1
+configure: failed program was:
+| /* confdefs.h.  */
+| 
+| #define PACKAGE_NAME "libffi"
+| #define PACKAGE_TARNAME "libffi"
+| #define PACKAGE_VERSION "2.1"
+| #define PACKAGE_STRING "libffi 2.1"
+| #define PACKAGE_BUGREPORT "http://gcc.gnu.org/bugs.html"
+| /* end confdefs.h.  */
+| #include <ac_nonexistent.h>
+configure:2572: checking for egrep
+configure:2582: result: grep -E
+configure:2587: checking for ANSI C header files
+configure:2612: gcc -pthread -c   conftest.c >&5
+configure:2618: $? = 0
+configure:2621: test -z 			 || test ! -s conftest.err
+configure:2624: $? = 0
+configure:2627: test -s conftest.o
+configure:2630: $? = 0
+configure:2719: gcc -pthread -o conftest    conftest.c  >&5
+conftest.c: In function 'main':
+conftest.c:26: warning: incompatible implicit declaration of built-in function 'exit'
+configure:2722: $? = 0
+configure:2724: ./conftest
+configure:2727: $? = 0
+configure:2742: result: yes
+configure:2766: checking for sys/types.h
+configure:2782: gcc -pthread -c   conftest.c >&5
+configure:2788: $? = 0
+configure:2791: test -z 			 || test ! -s conftest.err
+configure:2794: $? = 0
+configure:2797: test -s conftest.o
+configure:2800: $? = 0
+configure:2811: result: yes
+configure:2766: checking for sys/stat.h
+configure:2782: gcc -pthread -c   conftest.c >&5
+configure:2788: $? = 0
+configure:2791: test -z 			 || test ! -s conftest.err
+configure:2794: $? = 0
+configure:2797: test -s conftest.o
+configure:2800: $? = 0
+configure:2811: result: yes
+configure:2766: checking for stdlib.h
+configure:2782: gcc -pthread -c   conftest.c >&5
+configure:2788: $? = 0
+configure:2791: test -z 			 || test ! -s conftest.err
+configure:2794: $? = 0
+configure:2797: test -s conftest.o
+configure:2800: $? = 0
+configure:2811: result: yes
+configure:2766: checking for string.h
+configure:2782: gcc -pthread -c   conftest.c >&5
+configure:2788: $? = 0
+configure:2791: test -z 			 || test ! -s conftest.err
+configure:2794: $? = 0
+configure:2797: test -s conftest.o
+configure:2800: $? = 0
+configure:2811: result: yes
+configure:2766: checking for memory.h
+configure:2782: gcc -pthread -c   conftest.c >&5
+configure:2788: $? = 0
+configure:2791: test -z 			 || test ! -s conftest.err
+configure:2794: $? = 0
+configure:2797: test -s conftest.o
+configure:2800: $? = 0
+configure:2811: result: yes
+configure:2766: checking for strings.h
+configure:2782: gcc -pthread -c   conftest.c >&5
+configure:2788: $? = 0
+configure:2791: test -z 			 || test ! -s conftest.err
+configure:2794: $? = 0
+configure:2797: test -s conftest.o
+configure:2800: $? = 0
+configure:2811: result: yes
+configure:2766: checking for inttypes.h
+configure:2782: gcc -pthread -c   conftest.c >&5
+configure:2788: $? = 0
+configure:2791: test -z 			 || test ! -s conftest.err
+configure:2794: $? = 0
+configure:2797: test -s conftest.o
+configure:2800: $? = 0
+configure:2811: result: yes
+configure:2766: checking for stdint.h
+configure:2782: gcc -pthread -c   conftest.c >&5
+configure:2788: $? = 0
+configure:2791: test -z 			 || test ! -s conftest.err
+configure:2794: $? = 0
+configure:2797: test -s conftest.o
+configure:2800: $? = 0
+configure:2811: result: yes
+configure:2766: checking for unistd.h
+configure:2782: gcc -pthread -c   conftest.c >&5
+configure:2788: $? = 0
+configure:2791: test -z 			 || test ! -s conftest.err
+configure:2794: $? = 0
+configure:2797: test -s conftest.o
+configure:2800: $? = 0
+configure:2811: result: yes
+configure:2837: checking sys/mman.h usability
+configure:2849: gcc -pthread -c   conftest.c >&5
+configure:2855: $? = 0
+configure:2858: test -z 			 || test ! -s conftest.err
+configure:2861: $? = 0
+configure:2864: test -s conftest.o
+configure:2867: $? = 0
+configure:2877: result: yes
+configure:2881: checking sys/mman.h presence
+configure:2891: gcc -pthread -E  conftest.c
+configure:2897: $? = 0
+configure:2917: result: yes
+configure:2952: checking for sys/mman.h
+configure:2959: result: yes
+configure:2976: checking for mmap
+configure:3033: gcc -pthread -o conftest    conftest.c  >&5
+configure:3039: $? = 0
+configure:3042: test -z 			 || test ! -s conftest.err
+configure:3045: $? = 0
+configure:3048: test -s conftest
+configure:3051: $? = 0
+configure:3063: result: yes
+configure:3075: checking for sys/mman.h
+configure:3080: result: yes
+configure:3217: checking for mmap
+configure:3304: result: yes
+configure:3318: checking whether read-only mmap of a plain file works
+configure:3335: result: yes
+configure:3337: checking whether mmap from /dev/zero works
+configure:3359: result: yes
+configure:3363: checking for MAP_ANON(YMOUS)
+configure:3391: gcc -pthread -c   conftest.c >&5
+configure:3397: $? = 0
+configure:3400: test -z 			 || test ! -s conftest.err
+configure:3403: $? = 0
+configure:3406: test -s conftest.o
+configure:3409: $? = 0
+configure:3420: result: yes
+configure:3426: checking whether mmap with MAP_ANON(YMOUS) works
+configure:3443: result: yes
+configure:3539: checking for ANSI C header files
+configure:3694: result: yes
+configure:3708: checking for memcpy
+configure:3765: gcc -pthread -o conftest    conftest.c  >&5
+conftest.c:49: warning: conflicting types for built-in function 'memcpy'
+configure:3771: $? = 0
+configure:3774: test -z 			 || test ! -s conftest.err
+configure:3777: $? = 0
+configure:3780: test -s conftest
+configure:3783: $? = 0
+configure:3795: result: yes
+configure:3807: checking for working alloca.h
+configure:3828: gcc -pthread -o conftest    conftest.c  >&5
+configure:3834: $? = 0
+configure:3837: test -z 			 || test ! -s conftest.err
+configure:3840: $? = 0
+configure:3843: test -s conftest
+configure:3846: $? = 0
+configure:3858: result: yes
+configure:3868: checking for alloca
+configure:3909: gcc -pthread -o conftest    conftest.c  >&5
+configure:3915: $? = 0
+configure:3918: test -z 			 || test ! -s conftest.err
+configure:3921: $? = 0
+configure:3924: test -s conftest
+configure:3927: $? = 0
+configure:3939: result: yes
+configure:4162: checking for double
+configure:4186: gcc -pthread -c   conftest.c >&5
+configure:4192: $? = 0
+configure:4195: test -z 			 || test ! -s conftest.err
+configure:4198: $? = 0
+configure:4201: test -s conftest.o
+configure:4204: $? = 0
+configure:4215: result: yes
+configure:4218: checking size of double
+configure:4530: gcc -pthread -o conftest    conftest.c  >&5
+configure:4533: $? = 0
+configure:4535: ./conftest
+configure:4538: $? = 0
+configure:4561: result: 8
+configure:4568: checking for long double
+configure:4592: gcc -pthread -c   conftest.c >&5
+configure:4598: $? = 0
+configure:4601: test -z 			 || test ! -s conftest.err
+configure:4604: $? = 0
+configure:4607: test -s conftest.o
+configure:4610: $? = 0
+configure:4621: result: yes
+configure:4624: checking size of long double
+configure:4936: gcc -pthread -o conftest    conftest.c  >&5
+configure:4939: $? = 0
+configure:4941: ./conftest
+configure:4944: $? = 0
+configure:4967: result: 16
+configure:4989: checking whether byte ordering is bigendian
+configure:5016: gcc -pthread -c   conftest.c >&5
+configure:5022: $? = 0
+configure:5025: test -z 			 || test ! -s conftest.err
+configure:5028: $? = 0
+configure:5031: test -s conftest.o
+configure:5034: $? = 0
+configure:5058: gcc -pthread -c   conftest.c >&5
+conftest.c: In function 'main':
+conftest.c:38: error: 'not' undeclared (first use in this function)
+conftest.c:38: error: (Each undeclared identifier is reported only once
+conftest.c:38: error: for each function it appears in.)
+conftest.c:38: error: expected ';' before 'big'
+configure:5064: $? = 1
+configure: failed program was:
+| /* confdefs.h.  */
+| 
+| #define PACKAGE_NAME "libffi"
+| #define PACKAGE_TARNAME "libffi"
+| #define PACKAGE_VERSION "2.1"
+| #define PACKAGE_STRING "libffi 2.1"
+| #define PACKAGE_BUGREPORT "http://gcc.gnu.org/bugs.html"
+| #define STDC_HEADERS 1
+| #define HAVE_SYS_TYPES_H 1
+| #define HAVE_SYS_STAT_H 1
+| #define HAVE_STDLIB_H 1
+| #define HAVE_STRING_H 1
+| #define HAVE_MEMORY_H 1
+| #define HAVE_STRINGS_H 1
+| #define HAVE_INTTYPES_H 1
+| #define HAVE_STDINT_H 1
+| #define HAVE_UNISTD_H 1
+| #define HAVE_SYS_MMAN_H 1
+| #define HAVE_MMAP 1
+| #define HAVE_MMAP_FILE 1
+| #define HAVE_MMAP_DEV_ZERO 1
+| #define HAVE_MMAP_ANON 1
+| #define STDC_HEADERS 1
+| #define HAVE_MEMCPY 1
+| #define HAVE_ALLOCA_H 1
+| #define HAVE_ALLOCA 1
+| #define SIZEOF_DOUBLE 8
+| #define SIZEOF_LONG_DOUBLE 16
+| #define HAVE_LONG_DOUBLE 1
+| /* end confdefs.h.  */
+| #include <sys/types.h>
+| #include <sys/param.h>
+| 
+| int
+| main ()
+| {
+| #if BYTE_ORDER != BIG_ENDIAN
+|  not big endian
+| #endif
+| 
+|   ;
+|   return 0;
+| }
+configure:5197: result: no
+configure:5354: checking whether .eh_frame section should be read-only
+configure:5373: result: yes
+configure:5394: checking for __attribute__((visibility("hidden")))
+configure:5403: gcc -pthread -Werror -S conftest.c -o conftest.s 1>&5
+configure:5406: $? = 0
+configure:5415: result: yes
+configure:5556: creating ./config.status
+
+## ---------------------- ##
+## Running config.status. ##
+## ---------------------- ##
+
+This file was extended by libffi config.status 2.1, which was
+generated by GNU Autoconf 2.59.  Invocation command line was
+
+  CONFIG_FILES    = 
+  CONFIG_HEADERS  = 
+  CONFIG_LINKS    = 
+  CONFIG_COMMANDS = 
+  $ ./config.status 
+
+on tarheels
+
+config.status:717: creating include/ffi.h
+config.status:717: creating fficonfig.py
+config.status:775: creating fficonfig.h
+config.status:966: linking /home/nagy/research/pythonCCT/Python-2.5/Modules/_ctypes/libffi/src/x86/ffitarget.h to include/ffitarget.h
+config.status:966: linking /home/nagy/research/pythonCCT/Python-2.5/Modules/_ctypes/libffi/include/ffi_common.h to include/ffi_common.h
+config.status:1203: executing include commands
+config.status:1203: executing src commands
+
+## ---------------- ##
+## Cache variables. ##
+## ---------------- ##
+
+ac_cv_build=x86_64-unknown-linux-gnu
+ac_cv_build_alias=x86_64-unknown-linux-gnu
+ac_cv_c_bigendian=no
+ac_cv_c_compiler_gnu=yes
+ac_cv_decl_map_anon=yes
+ac_cv_env_CPPFLAGS_set=
+ac_cv_env_CPPFLAGS_value=
+ac_cv_env_CPP_set=
+ac_cv_env_CPP_value=
+ac_cv_env_build_alias_set=
+ac_cv_env_build_alias_value=
+ac_cv_env_host_alias_set=
+ac_cv_env_host_alias_value=
+ac_cv_env_target_alias_set=
+ac_cv_env_target_alias_value=
+ac_cv_exeext=
+ac_cv_func_alloca_works=yes
+ac_cv_func_memcpy=yes
+ac_cv_func_mmap=yes
+ac_cv_func_mmap_anon=yes
+ac_cv_func_mmap_dev_zero=yes
+ac_cv_func_mmap_file=yes
+ac_cv_header_inttypes_h=yes
+ac_cv_header_memory_h=yes
+ac_cv_header_stdc=yes
+ac_cv_header_stdint_h=yes
+ac_cv_header_stdlib_h=yes
+ac_cv_header_string_h=yes
+ac_cv_header_strings_h=yes
+ac_cv_header_sys_mman_h=yes
+ac_cv_header_sys_stat_h=yes
+ac_cv_header_sys_types_h=yes
+ac_cv_header_unistd_h=yes
+ac_cv_host=x86_64-unknown-linux-gnu
+ac_cv_host_alias=x86_64-unknown-linux-gnu
+ac_cv_objext=o
+ac_cv_prog_CPP='gcc -pthread -E'
+ac_cv_prog_ac_ct_CC='gcc -pthread'
+ac_cv_prog_cc_g=yes
+ac_cv_prog_cc_stdc=
+ac_cv_prog_egrep='grep -E'
+ac_cv_sizeof_double=8
+ac_cv_sizeof_long_double=16
+ac_cv_target=x86_64-unknown-linux-gnu
+ac_cv_target_alias=x86_64-unknown-linux-gnu
+ac_cv_type_double=yes
+ac_cv_type_long_double=yes
+ac_cv_working_alloca_h=yes
+libffi_cv_hidden_visibility_attribute=yes
+libffi_cv_ro_eh_frame=yes
+
+## ----------------- ##
+## Output variables. ##
+## ----------------- ##
+
+ALLOCA=''
+CC='gcc -pthread'
+CFLAGS=''
+CPP='gcc -pthread -E'
+CPPFLAGS=''
+DEFS='-DHAVE_CONFIG_H'
+ECHO_C=''
+ECHO_N='-n'
+ECHO_T=''
+EGREP='grep -E'
+EXEEXT=''
+HAVE_LONG_DOUBLE='1'
+LIBOBJS=''
+LIBS=''
+LTLIBOBJS=''
+MKTARGET='X86_64'
+OBJEXT='o'
+PACKAGE_BUGREPORT='http://gcc.gnu.org/bugs.html'
+PACKAGE_NAME='libffi'
+PACKAGE_STRING='libffi 2.1'
+PACKAGE_TARNAME='libffi'
+PACKAGE_VERSION='2.1'
+PATH_SEPARATOR=':'
+SHELL='/bin/sh'
+TARGET='X86_64'
+TARGETDIR='x86'
+ac_ct_CC='gcc -pthread'
+bindir='${exec_prefix}/bin'
+build='x86_64-unknown-linux-gnu'
+build_alias=''
+build_cpu='x86_64'
+build_os='linux-gnu'
+build_vendor='unknown'
+datadir='${prefix}/share'
+exec_prefix='${prefix}'
+host='x86_64-unknown-linux-gnu'
+host_alias=''
+host_cpu='x86_64'
+host_os='linux-gnu'
+host_vendor='unknown'
+includedir='${prefix}/include'
+infodir='${prefix}/info'
+libdir='${exec_prefix}/lib'
+libexecdir='${exec_prefix}/libexec'
+localstatedir='${prefix}/var'
+mandir='${prefix}/man'
+oldincludedir='/usr/include'
+prefix='/usr/local'
+program_transform_name='s,x,x,'
+sbindir='${exec_prefix}/sbin'
+sharedstatedir='${prefix}/com'
+sysconfdir='${prefix}/etc'
+target='x86_64-unknown-linux-gnu'
+target_alias=''
+target_cpu='x86_64'
+target_os='linux-gnu'
+target_vendor='unknown'
+
+## ----------- ##
+## confdefs.h. ##
+## ----------- ##
+
+#define EH_FRAME_FLAGS "a"
+#define FFI_NO_RAW_API 1
+#define HAVE_ALLOCA 1
+#define HAVE_ALLOCA_H 1
+#define HAVE_HIDDEN_VISIBILITY_ATTRIBUTE 1
+#define HAVE_INTTYPES_H 1
+#define HAVE_LONG_DOUBLE 1
+#define HAVE_MEMCPY 1
+#define HAVE_MEMORY_H 1
+#define HAVE_MMAP 1
+#define HAVE_MMAP_ANON 1
+#define HAVE_MMAP_DEV_ZERO 1
+#define HAVE_MMAP_FILE 1
+#define HAVE_RO_EH_FRAME 1
+#define HAVE_STDINT_H 1
+#define HAVE_STDLIB_H 1
+#define HAVE_STRINGS_H 1
+#define HAVE_STRING_H 1
+#define HAVE_SYS_MMAN_H 1
+#define HAVE_SYS_STAT_H 1
+#define HAVE_SYS_TYPES_H 1
+#define HAVE_UNISTD_H 1
+#define PACKAGE_BUGREPORT "http://gcc.gnu.org/bugs.html"
+#define PACKAGE_NAME "libffi"
+#define PACKAGE_STRING "libffi 2.1"
+#define PACKAGE_TARNAME "libffi"
+#define PACKAGE_VERSION "2.1"
+#define SIZEOF_DOUBLE 8
+#define SIZEOF_LONG_DOUBLE 16
+#define STDC_HEADERS 1
+#define STDC_HEADERS 1
+
+configure: exit 0
diff -Naur Python-2.5-base/build/temp.linux-x86_64-2.5/libffi/include/ffi.h Python-2.5/build/temp.linux-x86_64-2.5/libffi/include/ffi.h
--- Python-2.5-base/build/temp.linux-x86_64-2.5/libffi/include/ffi.h	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/build/temp.linux-x86_64-2.5/libffi/include/ffi.h	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,313 @@
+/* -----------------------------------------------------------------*-C-*-
+   libffi @VERSION@ - Copyright (c) 1996-2003  Red Hat, Inc.
+
+   Permission is hereby granted, free of charge, to any person obtaining
+   a copy of this software and associated documentation files (the
+   ``Software''), to deal in the Software without restriction, including
+   without limitation the rights to use, copy, modify, merge, publish,
+   distribute, sublicense, and/or sell copies of the Software, and to
+   permit persons to whom the Software is furnished to do so, subject to
+   the following conditions:
+
+   The above copyright notice and this permission notice shall be included
+   in all copies or substantial portions of the Software.
+
+   THE SOFTWARE IS PROVIDED ``AS IS'', WITHOUT WARRANTY OF ANY KIND, EXPRESS
+   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+   IN NO EVENT SHALL CYGNUS SOLUTIONS BE LIABLE FOR ANY CLAIM, DAMAGES OR
+   OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
+   ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
+   OTHER DEALINGS IN THE SOFTWARE.
+
+   ----------------------------------------------------------------------- */
+
+/* -------------------------------------------------------------------
+   The basic API is described in the README file.
+
+   The raw API is designed to bypass some of the argument packing
+   and unpacking on architectures for which it can be avoided.
+
+   The closure API allows interpreted functions to be packaged up
+   inside a C function pointer, so that they can be called as C functions,
+   with no understanding on the client side that they are interpreted.
+   It can also be used in other cases in which it is necessary to package
+   up a user specified parameter and a function pointer as a single
+   function pointer.
+
+   The closure API must be implemented in order to get its functionality,
+   e.g. for use by gij.  Routines are provided to emulate the raw API
+   if the underlying platform doesn't allow faster implementation.
+
+   More details on the raw and cloure API can be found in:
+
+   http://gcc.gnu.org/ml/java/1999-q3/msg00138.html
+
+   and
+
+   http://gcc.gnu.org/ml/java/1999-q3/msg00174.html
+   -------------------------------------------------------------------- */
+
+#ifndef LIBFFI_H
+#define LIBFFI_H
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+/* Specify which architecture libffi is configured for. */
+#define X86_64
+
+/* ---- System configuration information --------------------------------- */
+
+#include <ffitarget.h>
+
+#ifndef LIBFFI_ASM
+
+#include <stddef.h>
+#include <limits.h>
+
+/* LONG_LONG_MAX is not always defined (not if STRICT_ANSI, for example).
+   But we can find it either under the correct ANSI name, or under GNU
+   C's internal name.  */
+#ifdef LONG_LONG_MAX
+# define FFI_LONG_LONG_MAX LONG_LONG_MAX
+#else
+# ifdef LLONG_MAX
+#  define FFI_LONG_LONG_MAX LLONG_MAX
+# else
+#  ifdef __GNUC__
+#   define FFI_LONG_LONG_MAX __LONG_LONG_MAX__
+#  endif
+# endif
+#endif
+
+#if SCHAR_MAX == 127
+# define ffi_type_uchar                ffi_type_uint8
+# define ffi_type_schar                ffi_type_sint8
+#else
+ #error "char size not supported"
+#endif
+
+#if SHRT_MAX == 32767
+# define ffi_type_ushort       ffi_type_uint16
+# define ffi_type_sshort       ffi_type_sint16
+#elif SHRT_MAX == 2147483647
+# define ffi_type_ushort       ffi_type_uint32
+# define ffi_type_sshort       ffi_type_sint32
+#else
+ #error "short size not supported"
+#endif
+
+#if INT_MAX == 32767
+# define ffi_type_uint         ffi_type_uint16
+# define ffi_type_sint         ffi_type_sint16
+#elif INT_MAX == 2147483647
+# define ffi_type_uint         ffi_type_uint32
+# define ffi_type_sint         ffi_type_sint32
+#elif INT_MAX == 9223372036854775807
+# define ffi_type_uint         ffi_type_uint64
+# define ffi_type_sint         ffi_type_sint64
+#else
+ #error "int size not supported"
+#endif
+
+#define ffi_type_ulong         ffi_type_uint64
+#define ffi_type_slong         ffi_type_sint64
+#if LONG_MAX == 2147483647
+# if FFI_LONG_LONG_MAX != 9223372036854775807
+  #error "no 64-bit data type supported"
+# endif
+#elif LONG_MAX != 9223372036854775807
+ #error "long size not supported"
+#endif
+
+/* The closure code assumes that this works on pointers, i.e. a size_t	*/
+/* can hold a pointer.							*/
+
+typedef struct _ffi_type
+{
+  size_t size;
+  unsigned short alignment;
+  unsigned short type;
+  /*@null@*/ struct _ffi_type **elements;
+} ffi_type;
+
+/* These are defined in types.c */
+extern ffi_type ffi_type_void;
+extern ffi_type ffi_type_uint8;
+extern ffi_type ffi_type_sint8;
+extern ffi_type ffi_type_uint16;
+extern ffi_type ffi_type_sint16;
+extern ffi_type ffi_type_uint32;
+extern ffi_type ffi_type_sint32;
+extern ffi_type ffi_type_uint64;
+extern ffi_type ffi_type_sint64;
+extern ffi_type ffi_type_float;
+extern ffi_type ffi_type_double;
+extern ffi_type ffi_type_longdouble;
+extern ffi_type ffi_type_pointer;
+
+
+typedef enum {
+  FFI_OK = 0,
+  FFI_BAD_TYPEDEF,
+  FFI_BAD_ABI 
+} ffi_status;
+
+typedef unsigned FFI_TYPE;
+
+typedef struct {
+  ffi_abi abi;
+  unsigned nargs;
+  /*@dependent@*/ ffi_type **arg_types;
+  /*@dependent@*/ ffi_type *rtype;
+  unsigned bytes;
+  unsigned flags;
+#ifdef FFI_EXTRA_CIF_FIELDS
+  FFI_EXTRA_CIF_FIELDS;
+#endif
+} ffi_cif;
+
+/* ---- Definitions for the raw API -------------------------------------- */
+
+#ifndef FFI_SIZEOF_ARG
+# if LONG_MAX == 2147483647
+#  define FFI_SIZEOF_ARG        4
+# elif LONG_MAX == 9223372036854775807
+#  define FFI_SIZEOF_ARG        8
+# endif
+#endif
+
+typedef union {
+  ffi_sarg  sint;
+  ffi_arg   uint;
+  float	    flt;
+  char      data[FFI_SIZEOF_ARG];
+  void*     ptr;
+} ffi_raw;
+
+void ffi_raw_call (/*@dependent@*/ ffi_cif *cif, 
+		   void (*fn)(void), 
+		   /*@out@*/ void *rvalue, 
+		   /*@dependent@*/ ffi_raw *avalue);
+
+void ffi_ptrarray_to_raw (ffi_cif *cif, void **args, ffi_raw *raw);
+void ffi_raw_to_ptrarray (ffi_cif *cif, ffi_raw *raw, void **args);
+size_t ffi_raw_size (ffi_cif *cif);
+
+/* This is analogous to the raw API, except it uses Java parameter	*/
+/* packing, even on 64-bit machines.  I.e. on 64-bit machines		*/
+/* longs and doubles are followed by an empty 64-bit word.		*/
+
+void ffi_java_raw_call (/*@dependent@*/ ffi_cif *cif, 
+		        void (*fn)(void), 
+		        /*@out@*/ void *rvalue, 
+		        /*@dependent@*/ ffi_raw *avalue);
+
+void ffi_java_ptrarray_to_raw (ffi_cif *cif, void **args, ffi_raw *raw);
+void ffi_java_raw_to_ptrarray (ffi_cif *cif, ffi_raw *raw, void **args);
+size_t ffi_java_raw_size (ffi_cif *cif);
+
+/* ---- Definitions for closures ----------------------------------------- */
+
+#if FFI_CLOSURES
+
+typedef struct {
+  char tramp[FFI_TRAMPOLINE_SIZE];
+  ffi_cif   *cif;
+  void     (*fun)(ffi_cif*,void*,void**,void*);
+  void      *user_data;
+} ffi_closure __attribute__((aligned (8)));
+
+ffi_status
+ffi_prep_closure (ffi_closure*,
+		  ffi_cif *,
+		  void (*fun)(ffi_cif*,void*,void**,void*),
+		  void *user_data);
+
+typedef struct {
+  char tramp[FFI_TRAMPOLINE_SIZE];
+
+  ffi_cif   *cif;
+
+#if !FFI_NATIVE_RAW_API
+
+  /* if this is enabled, then a raw closure has the same layout 
+     as a regular closure.  We use this to install an intermediate 
+     handler to do the transaltion, void** -> ffi_raw*. */
+
+  void     (*translate_args)(ffi_cif*,void*,void**,void*);
+  void      *this_closure;
+
+#endif
+
+  void     (*fun)(ffi_cif*,void*,ffi_raw*,void*);
+  void      *user_data;
+
+} ffi_raw_closure;
+
+ffi_status
+ffi_prep_raw_closure (ffi_raw_closure*,
+		      ffi_cif *cif,
+		      void (*fun)(ffi_cif*,void*,ffi_raw*,void*),
+		      void *user_data);
+
+ffi_status
+ffi_prep_java_raw_closure (ffi_raw_closure*,
+		           ffi_cif *cif,
+		           void (*fun)(ffi_cif*,void*,ffi_raw*,void*),
+		           void *user_data);
+
+#endif /* FFI_CLOSURES */
+
+/* ---- Public interface definition -------------------------------------- */
+
+ffi_status ffi_prep_cif(/*@out@*/ /*@partial@*/ ffi_cif *cif, 
+			ffi_abi abi,
+			unsigned int nargs, 
+			/*@dependent@*/ /*@out@*/ /*@partial@*/ ffi_type *rtype, 
+			/*@dependent@*/ ffi_type **atypes);
+
+void ffi_call(/*@dependent@*/ ffi_cif *cif, 
+	      void (*fn)(void), 
+	      /*@out@*/ void *rvalue, 
+	      /*@dependent@*/ void **avalue);
+
+/* Useful for eliminating compiler warnings */
+#define FFI_FN(f) ((void (*)())f)
+
+/* ---- Definitions shared with assembly code ---------------------------- */
+
+#endif
+
+/* If these change, update src/mips/ffitarget.h. */
+#define FFI_TYPE_VOID       0    
+#define FFI_TYPE_INT        1
+#define FFI_TYPE_FLOAT      2    
+#define FFI_TYPE_DOUBLE     3
+#if 1
+#define FFI_TYPE_LONGDOUBLE 4
+#else
+#define FFI_TYPE_LONGDOUBLE FFI_TYPE_DOUBLE
+#endif
+#define FFI_TYPE_UINT8      5   
+#define FFI_TYPE_SINT8      6
+#define FFI_TYPE_UINT16     7 
+#define FFI_TYPE_SINT16     8
+#define FFI_TYPE_UINT32     9
+#define FFI_TYPE_SINT32     10
+#define FFI_TYPE_UINT64     11
+#define FFI_TYPE_SINT64     12
+#define FFI_TYPE_STRUCT     13
+#define FFI_TYPE_POINTER    14
+
+/* This should always refer to the last type code (for sanity checks) */
+#define FFI_TYPE_LAST       FFI_TYPE_POINTER
+
+#ifdef __cplusplus
+}
+#endif
+
+#endif
+
diff -Naur Python-2.5-base/build/temp.linux-x86_64-2.5/libffi/include/ffi_common.h Python-2.5/build/temp.linux-x86_64-2.5/libffi/include/ffi_common.h
--- Python-2.5-base/build/temp.linux-x86_64-2.5/libffi/include/ffi_common.h	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/build/temp.linux-x86_64-2.5/libffi/include/ffi_common.h	2009-01-29 10:17:33.000000000 -0800
@@ -0,0 +1,95 @@
+/* -----------------------------------------------------------------------
+   ffi_common.h - Copyright (c) 1996  Red Hat, Inc.
+
+   Common internal definitions and macros. Only necessary for building
+   libffi.
+   ----------------------------------------------------------------------- */
+
+#ifndef FFI_COMMON_H
+#define FFI_COMMON_H
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+#include <fficonfig.h>
+
+/* Do not move this. Some versions of AIX are very picky about where
+   this is positioned. */
+#ifdef __GNUC__
+# define alloca __builtin_alloca
+#else
+# if HAVE_ALLOCA_H
+#  include <alloca.h>
+# else
+#  ifdef _AIX
+ #pragma alloca
+#  else
+#   ifndef alloca /* predefined by HP cc +Olibcalls */
+char *alloca ();
+#   endif
+#  endif
+# endif
+#endif
+
+/* Check for the existence of memcpy. */
+#if STDC_HEADERS
+# include <string.h>
+#else
+# ifndef HAVE_MEMCPY
+#  define memcpy(d, s, n) bcopy ((s), (d), (n))
+# endif
+#endif
+
+#if defined(FFI_DEBUG) 
+#include <stdio.h>
+#endif
+
+#ifdef FFI_DEBUG
+/*@exits@*/ void ffi_assert(/*@temp@*/ char *expr, /*@temp@*/ char *file, int line);
+void ffi_stop_here(void);
+void ffi_type_test(/*@temp@*/ /*@out@*/ ffi_type *a, /*@temp@*/ char *file, int line);
+
+#define FFI_ASSERT(x) ((x) ? (void)0 : ffi_assert(#x, __FILE__,__LINE__))
+#define FFI_ASSERT_AT(x, f, l) ((x) ? 0 : ffi_assert(#x, (f), (l)))
+#define FFI_ASSERT_VALID_TYPE(x) ffi_type_test (x, __FILE__, __LINE__)
+#else
+#define FFI_ASSERT(x) 
+#define FFI_ASSERT_AT(x, f, l)
+#define FFI_ASSERT_VALID_TYPE(x)
+#endif
+
+#define ALIGN(v, a)  (((((size_t) (v))-1) | ((a)-1))+1)
+#define ALIGN_DOWN(v, a) (((size_t) (v)) & -a)
+
+/* Perform machine dependent cif processing */
+ffi_status ffi_prep_cif_machdep(ffi_cif *cif);
+
+/* Extended cif, used in callback from assembly routine */
+typedef struct
+{
+  /*@dependent@*/ ffi_cif *cif;
+  /*@dependent@*/ void *rvalue;
+  /*@dependent@*/ void **avalue;
+} extended_cif;
+
+/* Terse sized type definitions.  */
+typedef unsigned int UINT8  __attribute__((__mode__(__QI__)));
+typedef signed int   SINT8  __attribute__((__mode__(__QI__)));
+typedef unsigned int UINT16 __attribute__((__mode__(__HI__)));
+typedef signed int   SINT16 __attribute__((__mode__(__HI__)));
+typedef unsigned int UINT32 __attribute__((__mode__(__SI__)));
+typedef signed int   SINT32 __attribute__((__mode__(__SI__)));
+typedef unsigned int UINT64 __attribute__((__mode__(__DI__)));
+typedef signed int   SINT64 __attribute__((__mode__(__DI__)));
+
+typedef float FLOAT32;
+
+
+#ifdef __cplusplus
+}
+#endif
+
+#endif
+
+
diff -Naur Python-2.5-base/build/temp.linux-x86_64-2.5/libffi/include/ffitarget.h Python-2.5/build/temp.linux-x86_64-2.5/libffi/include/ffitarget.h
--- Python-2.5-base/build/temp.linux-x86_64-2.5/libffi/include/ffitarget.h	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/build/temp.linux-x86_64-2.5/libffi/include/ffitarget.h	2009-01-29 10:17:33.000000000 -0800
@@ -0,0 +1,81 @@
+/* -----------------------------------------------------------------*-C-*-
+   ffitarget.h - Copyright (c) 1996-2003  Red Hat, Inc.
+   Target configuration macros for x86 and x86-64.
+
+   Permission is hereby granted, free of charge, to any person obtaining
+   a copy of this software and associated documentation files (the
+   ``Software''), to deal in the Software without restriction, including
+   without limitation the rights to use, copy, modify, merge, publish,
+   distribute, sublicense, and/or sell copies of the Software, and to
+   permit persons to whom the Software is furnished to do so, subject to
+   the following conditions:
+
+   The above copyright notice and this permission notice shall be included
+   in all copies or substantial portions of the Software.
+
+   THE SOFTWARE IS PROVIDED ``AS IS'', WITHOUT WARRANTY OF ANY KIND, EXPRESS
+   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+   IN NO EVENT SHALL CYGNUS SOLUTIONS BE LIABLE FOR ANY CLAIM, DAMAGES OR
+   OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
+   ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
+   OTHER DEALINGS IN THE SOFTWARE.
+
+   ----------------------------------------------------------------------- */
+
+#ifndef LIBFFI_TARGET_H
+#define LIBFFI_TARGET_H
+
+/* ---- System specific configurations ----------------------------------- */
+
+#if defined (X86_64) && defined (__i386__)
+#undef X86_64
+#define X86
+#endif
+
+/* ---- Generic type definitions ----------------------------------------- */
+
+#ifndef LIBFFI_ASM
+typedef unsigned long          ffi_arg;
+typedef signed long            ffi_sarg;
+
+typedef enum ffi_abi {
+  FFI_FIRST_ABI = 0,
+
+  /* ---- Intel x86 Win32 ---------- */
+#ifdef X86_WIN32
+  FFI_SYSV,
+  FFI_STDCALL,
+  /* TODO: Add fastcall support for the sake of completeness */
+  FFI_DEFAULT_ABI = FFI_SYSV,
+#endif
+
+  /* ---- Intel x86 and AMD x86-64 - */
+#if !defined(X86_WIN32) && (defined(__i386__) || defined(__x86_64__)) 
+  FFI_SYSV,
+  FFI_UNIX64,   /* Unix variants all use the same ABI for x86-64  */
+#ifdef __i386__
+  FFI_DEFAULT_ABI = FFI_SYSV,
+#else
+  FFI_DEFAULT_ABI = FFI_UNIX64,
+#endif
+#endif
+
+  FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
+} ffi_abi;
+#endif
+
+/* ---- Definitions for closures ----------------------------------------- */
+
+#define FFI_CLOSURES 1
+
+#ifdef X86_64
+#define FFI_TRAMPOLINE_SIZE 24
+#define FFI_NATIVE_RAW_API 0
+#else
+#define FFI_TRAMPOLINE_SIZE 10
+#define FFI_NATIVE_RAW_API 1	/* x86 has native raw api support */
+#endif
+
+#endif
+
diff -Naur Python-2.5-base/configure.in Python-2.5/configure.in
--- Python-2.5-base/configure.in	2006-09-04 19:54:42.000000000 -0700
+++ Python-2.5/configure.in	2009-03-17 15:50:58.000000000 -0700
@@ -3,7 +3,7 @@
 # Set VERSION so we only need to edit in one place (i.e., here)
 m4_define(PYTHON_VERSION, 2.5)
 
-AC_REVISION($Revision: 51727 $)
+AC_REVISION($Revision: 1.1.1.1 $)
 AC_PREREQ(2.59)
 AC_INIT(python, PYTHON_VERSION, http://www.python.org/python-bugs)
 AC_CONFIG_SRCDIR([Include/object.h])
diff -Naur Python-2.5-base/pyconfig.h Python-2.5/pyconfig.h
--- Python-2.5-base/pyconfig.h	1969-12-31 16:00:00.000000000 -0800
+++ Python-2.5/pyconfig.h	2009-03-17 15:50:58.000000000 -0700
@@ -0,0 +1,997 @@
+/* pyconfig.h.  Generated by configure.  */
+/* pyconfig.h.in.  Generated from configure.in by autoheader.  */
+
+
+#ifndef Py_PYCONFIG_H
+#define Py_PYCONFIG_H
+
+
+/* Define for AIX if your compiler is a genuine IBM xlC/xlC_r and you want
+   support for AIX C++ shared extension modules. */
+/* #undef AIX_GENUINE_CPLUSPLUS */
+
+/* Define this if you have AtheOS threads. */
+/* #undef ATHEOS_THREADS */
+
+/* Define this if you have BeOS threads. */
+/* #undef BEOS_THREADS */
+
+/* Define if you have the Mach cthreads package */
+/* #undef C_THREADS */
+
+/* Define if --enable-ipv6 is specified */
+#define ENABLE_IPV6 1
+
+/* Define if getpgrp() must be called as getpgrp(0). */
+/* #undef GETPGRP_HAVE_ARG */
+
+/* Define if gettimeofday() does not have second (timezone) argument This is
+   the case on Motorola V4 (R40V4.2) */
+/* #undef GETTIMEOFDAY_NO_TZ */
+
+/* struct addrinfo (netdb.h) */
+#define HAVE_ADDRINFO 1
+
+/* Define to 1 if you have the `alarm' function. */
+#define HAVE_ALARM 1
+
+/* Define this if your time.h defines altzone. */
+/* #undef HAVE_ALTZONE */
+
+/* Define to 1 if you have the <asm/types.h> header file. */
+#define HAVE_ASM_TYPES_H 1
+
+/* Define to 1 if you have the `bind_textdomain_codeset' function. */
+#define HAVE_BIND_TEXTDOMAIN_CODESET 1
+
+/* Define to 1 if you have the <bluetooth/bluetooth.h> header file. */
+/* #undef HAVE_BLUETOOTH_BLUETOOTH_H */
+
+/* Define to 1 if you have the <bluetooth.h> header file. */
+/* #undef HAVE_BLUETOOTH_H */
+
+/* Define if nice() returns success/failure instead of the new priority. */
+/* #undef HAVE_BROKEN_NICE */
+
+/* Define if poll() sets errno on invalid file descriptors. */
+/* #undef HAVE_BROKEN_POLL */
+
+/* Define if the Posix semaphores do not work on your system */
+/* #undef HAVE_BROKEN_POSIX_SEMAPHORES */
+
+/* Define if pthread_sigmask() does not work on your system. */
+/* #undef HAVE_BROKEN_PTHREAD_SIGMASK */
+
+/* Define to 1 if you have the `chown' function. */
+#define HAVE_CHOWN 1
+
+/* Define if you have the 'chroot' function. */
+#define HAVE_CHROOT 1
+
+/* Define to 1 if you have the `clock' function. */
+#define HAVE_CLOCK 1
+
+/* Define to 1 if you have the `confstr' function. */
+#define HAVE_CONFSTR 1
+
+/* Define to 1 if you have the <conio.h> header file. */
+/* #undef HAVE_CONIO_H */
+
+/* Define to 1 if you have the `ctermid' function. */
+#define HAVE_CTERMID 1
+
+/* Define if you have the 'ctermid_r' function. */
+/* #undef HAVE_CTERMID_R */
+
+/* Define to 1 if you have the <curses.h> header file. */
+#define HAVE_CURSES_H 1
+
+/* Define if you have the 'is_term_resized' function. */
+#define HAVE_CURSES_IS_TERM_RESIZED 1
+
+/* Define if you have the 'resizeterm' function. */
+#define HAVE_CURSES_RESIZETERM 1
+
+/* Define if you have the 'resize_term' function. */
+#define HAVE_CURSES_RESIZE_TERM 1
+
+/* Define to 1 if you have the device macros. */
+#define HAVE_DEVICE_MACROS 1
+
+/* Define if we have /dev/ptc. */
+/* #undef HAVE_DEV_PTC */
+
+/* Define if we have /dev/ptmx. */
+#define HAVE_DEV_PTMX 1
+
+/* Define to 1 if you have the <direct.h> header file. */
+/* #undef HAVE_DIRECT_H */
+
+/* Define to 1 if you have the <dirent.h> header file, and it defines `DIR'.
+   */
+#define HAVE_DIRENT_H 1
+
+/* Define to 1 if you have the <dlfcn.h> header file. */
+#define HAVE_DLFCN_H 1
+
+/* Define to 1 if you have the `dlopen' function. */
+#define HAVE_DLOPEN 1
+
+/* Define to 1 if you have the `dup2' function. */
+#define HAVE_DUP2 1
+
+/* Defined when any dynamic module loading is enabled. */
+#define HAVE_DYNAMIC_LOADING 1
+
+/* Define to 1 if you have the <errno.h> header file. */
+#define HAVE_ERRNO_H 1
+
+/* Define to 1 if you have the `execv' function. */
+#define HAVE_EXECV 1
+
+/* Define if you have the 'fchdir' function. */
+#define HAVE_FCHDIR 1
+
+/* Define to 1 if you have the <fcntl.h> header file. */
+#define HAVE_FCNTL_H 1
+
+/* Define if you have the 'fdatasync' function. */
+#define HAVE_FDATASYNC 1
+
+/* Define if you have the 'flock' function. */
+#define HAVE_FLOCK 1
+
+/* Define to 1 if you have the `fork' function. */
+#define HAVE_FORK 1
+
+/* Define to 1 if you have the `forkpty' function. */
+#define HAVE_FORKPTY 1
+
+/* Define to 1 if you have the `fpathconf' function. */
+#define HAVE_FPATHCONF 1
+
+/* Define to 1 if you have the `fseek64' function. */
+/* #undef HAVE_FSEEK64 */
+
+/* Define to 1 if you have the `fseeko' function. */
+#define HAVE_FSEEKO 1
+
+/* Define to 1 if you have the `fstatvfs' function. */
+#define HAVE_FSTATVFS 1
+
+/* Define if you have the 'fsync' function. */
+#define HAVE_FSYNC 1
+
+/* Define to 1 if you have the `ftell64' function. */
+/* #undef HAVE_FTELL64 */
+
+/* Define to 1 if you have the `ftello' function. */
+#define HAVE_FTELLO 1
+
+/* Define to 1 if you have the `ftime' function. */
+#define HAVE_FTIME 1
+
+/* Define to 1 if you have the `ftruncate' function. */
+#define HAVE_FTRUNCATE 1
+
+/* Define to 1 if you have the `gai_strerror' function. */
+#define HAVE_GAI_STRERROR 1
+
+/* Define if you have the getaddrinfo function. */
+#define HAVE_GETADDRINFO 1
+
+/* Define to 1 if you have the `getcwd' function. */
+#define HAVE_GETCWD 1
+
+/* Define this if you have flockfile(), getc_unlocked(), and funlockfile() */
+#define HAVE_GETC_UNLOCKED 1
+
+/* Define to 1 if you have the `getgroups' function. */
+#define HAVE_GETGROUPS 1
+
+/* Define to 1 if you have the `gethostbyname' function. */
+/* #undef HAVE_GETHOSTBYNAME */
+
+/* Define this if you have some version of gethostbyname_r() */
+#define HAVE_GETHOSTBYNAME_R 1
+
+/* Define this if you have the 3-arg version of gethostbyname_r(). */
+/* #undef HAVE_GETHOSTBYNAME_R_3_ARG */
+
+/* Define this if you have the 5-arg version of gethostbyname_r(). */
+/* #undef HAVE_GETHOSTBYNAME_R_5_ARG */
+
+/* Define this if you have the 6-arg version of gethostbyname_r(). */
+#define HAVE_GETHOSTBYNAME_R_6_ARG 1
+
+/* Define to 1 if you have the `getloadavg' function. */
+#define HAVE_GETLOADAVG 1
+
+/* Define to 1 if you have the `getlogin' function. */
+#define HAVE_GETLOGIN 1
+
+/* Define to 1 if you have the `getnameinfo' function. */
+#define HAVE_GETNAMEINFO 1
+
+/* Define if you have the 'getpagesize' function. */
+#define HAVE_GETPAGESIZE 1
+
+/* Define to 1 if you have the `getpeername' function. */
+#define HAVE_GETPEERNAME 1
+
+/* Define to 1 if you have the `getpgid' function. */
+#define HAVE_GETPGID 1
+
+/* Define to 1 if you have the `getpgrp' function. */
+#define HAVE_GETPGRP 1
+
+/* Define to 1 if you have the `getpid' function. */
+#define HAVE_GETPID 1
+
+/* Define to 1 if you have the `getpriority' function. */
+#define HAVE_GETPRIORITY 1
+
+/* Define to 1 if you have the `getpwent' function. */
+#define HAVE_GETPWENT 1
+
+/* Define to 1 if you have the `getsid' function. */
+#define HAVE_GETSID 1
+
+/* Define to 1 if you have the `getspent' function. */
+#define HAVE_GETSPENT 1
+
+/* Define to 1 if you have the `getspnam' function. */
+#define HAVE_GETSPNAM 1
+
+/* Define to 1 if you have the `gettimeofday' function. */
+#define HAVE_GETTIMEOFDAY 1
+
+/* Define to 1 if you have the `getwd' function. */
+#define HAVE_GETWD 1
+
+/* Define to 1 if you have the <grp.h> header file. */
+#define HAVE_GRP_H 1
+
+/* Define if you have the 'hstrerror' function. */
+#define HAVE_HSTRERROR 1
+
+/* Define to 1 if you have the `hypot' function. */
+#define HAVE_HYPOT 1
+
+/* Define if you have the 'inet_aton' function. */
+#define HAVE_INET_ATON 1
+
+/* Define if you have the 'inet_pton' function. */
+#define HAVE_INET_PTON 1
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#define HAVE_INTTYPES_H 1
+
+/* Define to 1 if you have the <io.h> header file. */
+/* #undef HAVE_IO_H */
+
+/* Define to 1 if you have the `kill' function. */
+#define HAVE_KILL 1
+
+/* Define to 1 if you have the `killpg' function. */
+#define HAVE_KILLPG 1
+
+/* Define to 1 if you have the <langinfo.h> header file. */
+#define HAVE_LANGINFO_H 1
+
+/* Defined to enable large file support when an off_t is bigger than a long
+   and long long is available and at least as big as an off_t. You may need to
+   add some flags for configuration and compilation to enable this mode. (For
+   Solaris and Linux, the necessary defines are already defined.) */
+/* #undef HAVE_LARGEFILE_SUPPORT */
+
+/* Define to 1 if you have the `lchown' function. */
+#define HAVE_LCHOWN 1
+
+/* Define to 1 if you have the `dl' library (-ldl). */
+#define HAVE_LIBDL 1
+
+/* Define to 1 if you have the `dld' library (-ldld). */
+/* #undef HAVE_LIBDLD */
+
+/* Define to 1 if you have the `ieee' library (-lieee). */
+/* #undef HAVE_LIBIEEE */
+
+/* Define to 1 if you have the <libintl.h> header file. */
+#define HAVE_LIBINTL_H 1
+
+/* Define to 1 if you have the `readline' library (-lreadline). */
+/* #undef HAVE_LIBREADLINE */
+
+/* Define to 1 if you have the `resolv' library (-lresolv). */
+/* #undef HAVE_LIBRESOLV */
+
+/* Define to 1 if you have the `termcap' library (-ltermcap). */
+/* #undef HAVE_LIBTERMCAP */
+
+/* Define to 1 if you have the <libutil.h> header file. */
+/* #undef HAVE_LIBUTIL_H */
+
+/* Define if you have the 'link' function. */
+#define HAVE_LINK 1
+
+/* Define to 1 if you have the <linux/netlink.h> header file. */
+#define HAVE_LINUX_NETLINK_H 1
+
+/* Define this if you have the type long long. */
+#define HAVE_LONG_LONG 1
+
+/* Define to 1 if you have the `lstat' function. */
+#define HAVE_LSTAT 1
+
+/* Define this if you have the makedev macro. */
+#define HAVE_MAKEDEV 1
+
+/* Define to 1 if you have the `memmove' function. */
+#define HAVE_MEMMOVE 1
+
+/* Define to 1 if you have the <memory.h> header file. */
+#define HAVE_MEMORY_H 1
+
+/* Define to 1 if you have the `mkfifo' function. */
+#define HAVE_MKFIFO 1
+
+/* Define to 1 if you have the `mknod' function. */
+#define HAVE_MKNOD 1
+
+/* Define to 1 if you have the `mktime' function. */
+#define HAVE_MKTIME 1
+
+/* Define to 1 if you have the `mremap' function. */
+#define HAVE_MREMAP 1
+
+/* Define to 1 if you have the <ncurses.h> header file. */
+#define HAVE_NCURSES_H 1
+
+/* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
+/* #undef HAVE_NDIR_H */
+
+/* Define to 1 if you have the <netpacket/packet.h> header file. */
+#define HAVE_NETPACKET_PACKET_H 1
+
+/* Define to 1 if you have the `nice' function. */
+#define HAVE_NICE 1
+
+/* Define to 1 if you have the `openpty' function. */
+#define HAVE_OPENPTY 1
+
+/* Define to 1 if you have the `pathconf' function. */
+#define HAVE_PATHCONF 1
+
+/* Define to 1 if you have the `pause' function. */
+#define HAVE_PAUSE 1
+
+/* Define to 1 if you have the `plock' function. */
+/* #undef HAVE_PLOCK */
+
+/* Define to 1 if you have the `poll' function. */
+#define HAVE_POLL 1
+
+/* Define to 1 if you have the <poll.h> header file. */
+#define HAVE_POLL_H 1
+
+/* Define to 1 if you have the <process.h> header file. */
+/* #undef HAVE_PROCESS_H */
+
+/* Define if your compiler supports function prototype */
+#define HAVE_PROTOTYPES 1
+
+/* Define if you have GNU PTH threads. */
+/* #undef HAVE_PTH */
+
+/* Defined for Solaris 2.6 bug in pthread header. */
+/* #undef HAVE_PTHREAD_DESTRUCTOR */
+
+/* Define to 1 if you have the <pthread.h> header file. */
+#define HAVE_PTHREAD_H 1
+
+/* Define to 1 if you have the `pthread_init' function. */
+/* #undef HAVE_PTHREAD_INIT */
+
+/* Define to 1 if you have the `pthread_sigmask' function. */
+#define HAVE_PTHREAD_SIGMASK 1
+
+/* Define to 1 if you have the <pty.h> header file. */
+#define HAVE_PTY_H 1
+
+/* Define to 1 if you have the `putenv' function. */
+#define HAVE_PUTENV 1
+
+/* Define to 1 if you have the `readlink' function. */
+#define HAVE_READLINK 1
+
+/* Define to 1 if you have the `realpath' function. */
+#define HAVE_REALPATH 1
+
+/* Define if you have readline 2.1 */
+/* #undef HAVE_RL_CALLBACK */
+
+/* Define if you can turn off readline's signal handling. */
+/* #undef HAVE_RL_CATCH_SIGNAL */
+
+/* Define if you have readline 2.2 */
+/* #undef HAVE_RL_COMPLETION_APPEND_CHARACTER */
+
+/* Define if you have readline 4.2 */
+/* #undef HAVE_RL_COMPLETION_MATCHES */
+
+/* Define if you have readline 4.0 */
+/* #undef HAVE_RL_PRE_INPUT_HOOK */
+
+/* Define to 1 if you have the `select' function. */
+#define HAVE_SELECT 1
+
+/* Define to 1 if you have the `setegid' function. */
+#define HAVE_SETEGID 1
+
+/* Define to 1 if you have the `seteuid' function. */
+#define HAVE_SETEUID 1
+
+/* Define to 1 if you have the `setgid' function. */
+#define HAVE_SETGID 1
+
+/* Define if you have the 'setgroups' function. */
+#define HAVE_SETGROUPS 1
+
+/* Define to 1 if you have the `setlocale' function. */
+#define HAVE_SETLOCALE 1
+
+/* Define to 1 if you have the `setpgid' function. */
+#define HAVE_SETPGID 1
+
+/* Define to 1 if you have the `setpgrp' function. */
+#define HAVE_SETPGRP 1
+
+/* Define to 1 if you have the `setregid' function. */
+#define HAVE_SETREGID 1
+
+/* Define to 1 if you have the `setreuid' function. */
+#define HAVE_SETREUID 1
+
+/* Define to 1 if you have the `setsid' function. */
+#define HAVE_SETSID 1
+
+/* Define to 1 if you have the `setuid' function. */
+#define HAVE_SETUID 1
+
+/* Define to 1 if you have the `setvbuf' function. */
+#define HAVE_SETVBUF 1
+
+/* Define to 1 if you have the <shadow.h> header file. */
+#define HAVE_SHADOW_H 1
+
+/* Define to 1 if you have the `sigaction' function. */
+#define HAVE_SIGACTION 1
+
+/* Define to 1 if you have the `siginterrupt' function. */
+#define HAVE_SIGINTERRUPT 1
+
+/* Define to 1 if you have the <signal.h> header file. */
+#define HAVE_SIGNAL_H 1
+
+/* Define to 1 if you have the `sigrelse' function. */
+#define HAVE_SIGRELSE 1
+
+/* Define to 1 if you have the `snprintf' function. */
+#define HAVE_SNPRINTF 1
+
+/* Define if sockaddr has sa_len member */
+/* #undef HAVE_SOCKADDR_SA_LEN */
+
+/* struct sockaddr_storage (sys/socket.h) */
+#define HAVE_SOCKADDR_STORAGE 1
+
+/* Define if you have the 'socketpair' function. */
+#define HAVE_SOCKETPAIR 1
+
+/* Define if your compiler provides ssize_t */
+#define HAVE_SSIZE_T 1
+
+/* Define to 1 if you have the `statvfs' function. */
+#define HAVE_STATVFS 1
+
+/* Define if you have struct stat.st_mtim.tv_nsec */
+#define HAVE_STAT_TV_NSEC 1
+
+/* Define if you have struct stat.st_mtimensec */
+/* #undef HAVE_STAT_TV_NSEC2 */
+
+/* Define if your compiler supports variable length function prototypes (e.g.
+   void fprintf(FILE *, char *, ...);) *and* <stdarg.h> */
+#define HAVE_STDARG_PROTOTYPES 1
+
+/* Define to 1 if you have the <stdint.h> header file. */
+#define HAVE_STDINT_H 1
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#define HAVE_STDLIB_H 1
+
+/* Define to 1 if you have the `strdup' function. */
+#define HAVE_STRDUP 1
+
+/* Define to 1 if you have the `strerror' function. */
+#define HAVE_STRERROR 1
+
+/* Define to 1 if you have the `strftime' function. */
+#define HAVE_STRFTIME 1
+
+/* Define to 1 if you have the <strings.h> header file. */
+#define HAVE_STRINGS_H 1
+
+/* Define to 1 if you have the <string.h> header file. */
+#define HAVE_STRING_H 1
+
+/* Define to 1 if you have the <stropts.h> header file. */
+#define HAVE_STROPTS_H 1
+
+/* Define to 1 if `st_birthtime' is member of `struct stat'. */
+/* #undef HAVE_STRUCT_STAT_ST_BIRTHTIME */
+
+/* Define to 1 if `st_blksize' is member of `struct stat'. */
+#define HAVE_STRUCT_STAT_ST_BLKSIZE 1
+
+/* Define to 1 if `st_blocks' is member of `struct stat'. */
+#define HAVE_STRUCT_STAT_ST_BLOCKS 1
+
+/* Define to 1 if `st_flags' is member of `struct stat'. */
+/* #undef HAVE_STRUCT_STAT_ST_FLAGS */
+
+/* Define to 1 if `st_gen' is member of `struct stat'. */
+/* #undef HAVE_STRUCT_STAT_ST_GEN */
+
+/* Define to 1 if `st_rdev' is member of `struct stat'. */
+#define HAVE_STRUCT_STAT_ST_RDEV 1
+
+/* Define to 1 if `tm_zone' is member of `struct tm'. */
+#define HAVE_STRUCT_TM_TM_ZONE 1
+
+/* Define to 1 if your `struct stat' has `st_blocks'. Deprecated, use
+   `HAVE_STRUCT_STAT_ST_BLOCKS' instead. */
+#define HAVE_ST_BLOCKS 1
+
+/* Define if you have the 'symlink' function. */
+#define HAVE_SYMLINK 1
+
+/* Define to 1 if you have the `sysconf' function. */
+#define HAVE_SYSCONF 1
+
+/* Define to 1 if you have the <sysexits.h> header file. */
+#define HAVE_SYSEXITS_H 1
+
+/* Define to 1 if you have the <sys/audioio.h> header file. */
+/* #undef HAVE_SYS_AUDIOIO_H */
+
+/* Define to 1 if you have the <sys/bsdtty.h> header file. */
+/* #undef HAVE_SYS_BSDTTY_H */
+
+/* Define to 1 if you have the <sys/dir.h> header file, and it defines `DIR'.
+   */
+/* #undef HAVE_SYS_DIR_H */
+
+/* Define to 1 if you have the <sys/file.h> header file. */
+#define HAVE_SYS_FILE_H 1
+
+/* Define to 1 if you have the <sys/loadavg.h> header file. */
+/* #undef HAVE_SYS_LOADAVG_H */
+
+/* Define to 1 if you have the <sys/lock.h> header file. */
+/* #undef HAVE_SYS_LOCK_H */
+
+/* Define to 1 if you have the <sys/mkdev.h> header file. */
+/* #undef HAVE_SYS_MKDEV_H */
+
+/* Define to 1 if you have the <sys/modem.h> header file. */
+/* #undef HAVE_SYS_MODEM_H */
+
+/* Define to 1 if you have the <sys/ndir.h> header file, and it defines `DIR'.
+   */
+/* #undef HAVE_SYS_NDIR_H */
+
+/* Define to 1 if you have the <sys/param.h> header file. */
+#define HAVE_SYS_PARAM_H 1
+
+/* Define to 1 if you have the <sys/poll.h> header file. */
+#define HAVE_SYS_POLL_H 1
+
+/* Define to 1 if you have the <sys/resource.h> header file. */
+#define HAVE_SYS_RESOURCE_H 1
+
+/* Define to 1 if you have the <sys/select.h> header file. */
+#define HAVE_SYS_SELECT_H 1
+
+/* Define to 1 if you have the <sys/socket.h> header file. */
+#define HAVE_SYS_SOCKET_H 1
+
+/* Define to 1 if you have the <sys/statvfs.h> header file. */
+#define HAVE_SYS_STATVFS_H 1
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#define HAVE_SYS_STAT_H 1
+
+/* Define to 1 if you have the <sys/times.h> header file. */
+#define HAVE_SYS_TIMES_H 1
+
+/* Define to 1 if you have the <sys/time.h> header file. */
+#define HAVE_SYS_TIME_H 1
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#define HAVE_SYS_TYPES_H 1
+
+/* Define to 1 if you have the <sys/un.h> header file. */
+#define HAVE_SYS_UN_H 1
+
+/* Define to 1 if you have the <sys/utsname.h> header file. */
+#define HAVE_SYS_UTSNAME_H 1
+
+/* Define to 1 if you have the <sys/wait.h> header file. */
+#define HAVE_SYS_WAIT_H 1
+
+/* Define to 1 if you have the `tcgetpgrp' function. */
+#define HAVE_TCGETPGRP 1
+
+/* Define to 1 if you have the `tcsetpgrp' function. */
+#define HAVE_TCSETPGRP 1
+
+/* Define to 1 if you have the `tempnam' function. */
+#define HAVE_TEMPNAM 1
+
+/* Define to 1 if you have the <termios.h> header file. */
+#define HAVE_TERMIOS_H 1
+
+/* Define to 1 if you have the <term.h> header file. */
+#define HAVE_TERM_H 1
+
+/* Define to 1 if you have the <thread.h> header file. */
+/* #undef HAVE_THREAD_H */
+
+/* Define to 1 if you have the `timegm' function. */
+#define HAVE_TIMEGM 1
+
+/* Define to 1 if you have the `times' function. */
+#define HAVE_TIMES 1
+
+/* Define to 1 if you have the `tmpfile' function. */
+#define HAVE_TMPFILE 1
+
+/* Define to 1 if you have the `tmpnam' function. */
+#define HAVE_TMPNAM 1
+
+/* Define to 1 if you have the `tmpnam_r' function. */
+#define HAVE_TMPNAM_R 1
+
+/* Define to 1 if your `struct tm' has `tm_zone'. Deprecated, use
+   `HAVE_STRUCT_TM_TM_ZONE' instead. */
+#define HAVE_TM_ZONE 1
+
+/* Define to 1 if you have the `truncate' function. */
+#define HAVE_TRUNCATE 1
+
+/* Define to 1 if you don't have `tm_zone' but do have the external array
+   `tzname'. */
+/* #undef HAVE_TZNAME */
+
+/* Define this if you have tcl and TCL_UTF_MAX==6 */
+/* #undef HAVE_UCS4_TCL */
+
+/* Define this if you have the type uintptr_t. */
+/* #undef HAVE_UINTPTR_T */
+
+/* Define to 1 if you have the `uname' function. */
+#define HAVE_UNAME 1
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#define HAVE_UNISTD_H 1
+
+/* Define to 1 if you have the `unsetenv' function. */
+#define HAVE_UNSETENV 1
+
+/* Define if you have a useable wchar_t type defined in wchar.h; useable means
+   wchar_t must be an unsigned type with at least 16 bits. (see
+   Include/unicodeobject.h). */
+/* #undef HAVE_USABLE_WCHAR_T */
+
+/* Define to 1 if you have the `utimes' function. */
+#define HAVE_UTIMES 1
+
+/* Define to 1 if you have the <utime.h> header file. */
+#define HAVE_UTIME_H 1
+
+/* Define to 1 if you have the `wait3' function. */
+#define HAVE_WAIT3 1
+
+/* Define to 1 if you have the `wait4' function. */
+#define HAVE_WAIT4 1
+
+/* Define to 1 if you have the `waitpid' function. */
+#define HAVE_WAITPID 1
+
+/* Define if the compiler provides a wchar.h header file. */
+#define HAVE_WCHAR_H 1
+
+/* Define to 1 if you have the `wcscoll' function. */
+#define HAVE_WCSCOLL 1
+
+/* Define if tzset() actually switches the local timezone in a meaningful way.
+   */
+#define HAVE_WORKING_TZSET 1
+
+/* Define if the zlib library has inflateCopy */
+#define HAVE_ZLIB_COPY 1
+
+/* Define to 1 if you have the `_getpty' function. */
+/* #undef HAVE__GETPTY */
+
+/* Define if you are using Mach cthreads directly under /include */
+/* #undef HURD_C_THREADS */
+
+/* Define if you are using Mach cthreads under mach / */
+/* #undef MACH_C_THREADS */
+
+/* Define to 1 if `major', `minor', and `makedev' are declared in <mkdev.h>.
+   */
+/* #undef MAJOR_IN_MKDEV */
+
+/* Define to 1 if `major', `minor', and `makedev' are declared in
+   <sysmacros.h>. */
+/* #undef MAJOR_IN_SYSMACROS */
+
+/* Define if mvwdelch in curses.h is an expression. */
+#define MVWDELCH_IS_EXPRESSION 1
+
+/* Define to the address where bug reports for this package should be sent. */
+/* #undef PACKAGE_BUGREPORT */
+
+/* Define to the full name of this package. */
+/* #undef PACKAGE_NAME */
+
+/* Define to the full name and version of this package. */
+/* #undef PACKAGE_STRING */
+
+/* Define to the one symbol short name of this package. */
+/* #undef PACKAGE_TARNAME */
+
+/* Define to the version of this package. */
+/* #undef PACKAGE_VERSION */
+
+/* Defined if PTHREAD_SCOPE_SYSTEM supported. */
+#define PTHREAD_SYSTEM_SCHED_SUPPORTED 1
+
+/* Define to printf format modifier for Py_ssize_t */
+#define PY_FORMAT_SIZE_T "z"
+
+/* Define as the integral type used for Unicode representation. */
+#define PY_UNICODE_TYPE unsigned short
+
+/* Define if you want to build an interpreter with many run-time checks. */
+/* #undef Py_DEBUG */
+
+/* Defined if Python is built as a shared library. */
+/* #undef Py_ENABLE_SHARED */
+
+/* Define as the size of the unicode type. */
+#define Py_UNICODE_SIZE 2
+
+/* Define if you want to have a Unicode type. */
+#define Py_USING_UNICODE 1
+
+/* Define as the return type of signal handlers (`int' or `void'). */
+#define RETSIGTYPE void
+
+/* Define if setpgrp() must be called as setpgrp(0, 0). */
+/* #undef SETPGRP_HAVE_ARG */
+
+/* Define this to be extension of shared libraries (including the dot!). */
+#define SHLIB_EXT ".so"
+
+/* Define if i>>j for signed int i does not extend the sign bit when i < 0 */
+/* #undef SIGNED_RIGHT_SHIFT_ZERO_FILLS */
+
+/* The size of a `double', as computed by sizeof. */
+#define SIZEOF_DOUBLE 8
+
+/* The size of a `float', as computed by sizeof. */
+#define SIZEOF_FLOAT 4
+
+/* The size of a `fpos_t', as computed by sizeof. */
+#define SIZEOF_FPOS_T 16
+
+/* The size of a `int', as computed by sizeof. */
+#define SIZEOF_INT 4
+
+/* The size of a `long', as computed by sizeof. */
+#define SIZEOF_LONG 8
+
+/* The size of a `long long', as computed by sizeof. */
+#define SIZEOF_LONG_LONG 8
+
+/* The number of bytes in an off_t. */
+#define SIZEOF_OFF_T 8
+
+/* The number of bytes in a pthread_t. */
+#define SIZEOF_PTHREAD_T 8
+
+/* The size of a `short', as computed by sizeof. */
+#define SIZEOF_SHORT 2
+
+/* The size of a `size_t', as computed by sizeof. */
+#define SIZEOF_SIZE_T 8
+
+/* The number of bytes in a time_t. */
+#define SIZEOF_TIME_T 8
+
+/* The size of a `uintptr_t', as computed by sizeof. */
+/* #undef SIZEOF_UINTPTR_T */
+
+/* The size of a `void *', as computed by sizeof. */
+#define SIZEOF_VOID_P 8
+
+/* The size of a `wchar_t', as computed by sizeof. */
+#define SIZEOF_WCHAR_T 4
+
+/* Define to 1 if you have the ANSI C header files. */
+#define STDC_HEADERS 1
+
+/* Define if you can safely include both <sys/select.h> and <sys/time.h>
+   (which you can't on SCO ODT 3.0). */
+#define SYS_SELECT_WITH_SYS_TIME 1
+
+/* Define to 1 if you can safely include both <sys/time.h> and <time.h>. */
+#define TIME_WITH_SYS_TIME 1
+
+/* Define to 1 if your <sys/time.h> declares `struct tm'. */
+/* #undef TM_IN_SYS_TIME */
+
+/* Define if you want to use MacPython modules on MacOSX in unix-Python. */
+/* #undef USE_TOOLBOX_OBJECT_GLUE */
+
+/* Define if a va_list is an array of some kind */
+#define VA_LIST_IS_ARRAY 1
+
+/* Define if you want SIGFPE handled (see Include/pyfpe.h). */
+/* #undef WANT_SIGFPE_HANDLER */
+
+/* Define if you want wctype.h functions to be used instead of the one
+   supplied by Python itself. (see Include/unicodectype.h). */
+/* #undef WANT_WCTYPE_FUNCTIONS */
+
+/* Define if WINDOW in curses.h offers a field _flags. */
+#define WINDOW_HAS_FLAGS 1
+
+/* Define if you want documentation strings in extension modules */
+#define WITH_DOC_STRINGS 1
+
+/* Define if you want to use the new-style (Openstep, Rhapsody, MacOS) dynamic
+   linker (dyld) instead of the old-style (NextStep) dynamic linker (rld).
+   Dyld is necessary to support frameworks. */
+/* #undef WITH_DYLD */
+
+/* Define to 1 if libintl is needed for locale functions. */
+/* #undef WITH_LIBINTL */
+
+/* Define if you want to produce an OpenStep/Rhapsody framework (shared
+   library plus accessory files). */
+/* #undef WITH_NEXT_FRAMEWORK */
+
+/* Define if you want to compile in Python-specific mallocs */
+#define WITH_PYMALLOC 1
+
+/* Define if you want to compile in rudimentary thread support */
+#define WITH_THREAD 1
+
+/* Define to profile with the Pentium timestamp counter */
+/* #undef WITH_TSC */
+
+
+ /* Define to 1 if your processor stores words with the most significant byte
+    first (like Motorola and SPARC, unlike Intel and VAX).
+
+    The block below does compile-time checking for endianness on platforms
+    that use GCC and therefore allows compiling fat binaries on OSX by using
+    '-arch ppc -arch i386' as the compile flags. The phrasing was choosen
+    such that the configure-result is used on systems that don't use GCC.
+  */
+#ifdef __BIG_ENDIAN__
+#define WORDS_BIGENDIAN 1
+#else
+#ifndef __LITTLE_ENDIAN__
+/* #undef WORDS_BIGENDIAN */
+#endif
+#endif
+
+/* Define to 1 if on AIX 3.
+   System headers sometimes define this.
+   We just want to avoid a redefinition error message.  */
+#ifndef _ALL_SOURCE
+/* # undef _ALL_SOURCE */
+#endif
+
+/* Define on Irix to enable u_int */
+#define _BSD_TYPES 1
+
+/* This must be set to 64 on some systems to enable large file support. */
+#define _FILE_OFFSET_BITS 64
+
+/* Define on Linux to activate all library features */
+#define _GNU_SOURCE 1
+
+/* This must be defined on some systems to enable large file support. */
+#define _LARGEFILE_SOURCE 1
+
+/* Define on NetBSD to activate all library features */
+#define _NETBSD_SOURCE 1
+
+/* Define _OSF_SOURCE to get the makedev macro. */
+/* #undef _OSF_SOURCE */
+
+/* Define to activate features from IEEE Stds 1003.1-2001 */
+#define _POSIX_C_SOURCE 200112L
+
+/* Define if you have POSIX threads, and your system does not define that. */
+/* #undef _POSIX_THREADS */
+
+/* Define to force use of thread-safe errno, h_errno, and other functions */
+/* #undef _REENTRANT */
+
+/* Define to the level of X/Open that your system supports */
+#define _XOPEN_SOURCE 600
+
+/* Define to activate Unix95-and-earlier features */
+#define _XOPEN_SOURCE_EXTENDED 1
+
+/* Define on FreeBSD to activate all library features */
+#define __BSD_VISIBLE 1
+
+/* Define to 1 if type `char' is unsigned and you are not using gcc.  */
+#ifndef __CHAR_UNSIGNED__
+/* # undef __CHAR_UNSIGNED__ */
+#endif
+
+/* Defined on Solaris to see additional function prototypes. */
+/* #undef __EXTENSIONS__ */
+
+/* Define to 'long' if <time.h> doesn't define. */
+/* #undef clock_t */
+
+/* Define to empty if `const' does not conform to ANSI C. */
+/* #undef const */
+
+/* Define to `int' if <sys/types.h> doesn't define. */
+/* #undef gid_t */
+
+/* Define to `int' if <sys/types.h> does not define. */
+/* #undef mode_t */
+
+/* Define to `long' if <sys/types.h> does not define. */
+/* #undef off_t */
+
+/* Define to `int' if <sys/types.h> does not define. */
+/* #undef pid_t */
+
+/* Define to empty if the keyword does not work. */
+/* #undef signed */
+
+/* Define to `unsigned' if <sys/types.h> does not define. */
+/* #undef size_t */
+
+/* Define to `int' if <sys/socket.h> does not define. */
+/* #undef socklen_t */
+
+/* Define to `int' if <sys/types.h> doesn't define. */
+/* #undef uid_t */
+
+/* Define to empty if the keyword does not work. */
+/* #undef volatile */
+
+
+/* Define the macros needed if on a UnixWare 7.x system. */
+#if defined(__USLC__) && defined(__SCO_VERSION__)
+#define STRICT_SYSV_CURSES /* Don't use ncurses extensions */
+#endif
+
+#endif /*Py_PYCONFIG_H*/
+
diff -Naur Python-2.5-base/setup.py Python-2.5/setup.py
--- Python-2.5-base/setup.py	2006-08-09 16:42:18.000000000 -0700
+++ Python-2.5/setup.py	2009-03-17 15:50:58.000000000 -0700
@@ -1,7 +1,7 @@
 # Autodetecting setup.py script for building the Python extensions
 #
 
-__version__ = "$Revision: 51184 $"
+__version__ = "$Revision: 1.1.1.1 $"
 
 import sys, os, imp, re, optparse
 
